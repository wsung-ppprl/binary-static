webpackJsonp([0,4],[function(e,t,n){"use strict";var i=function(e){Object.keys(e).forEach(function(t){window[t]=e[t]})};window.$=window.jQuery=n(1),n(2),n(298),i(n(302)),i(n(372)),n(373),n(374),n(375),n(376);var r=n(377);$(window).on("load",r.init),$(window).on("pageshow",function(e){e.originalEvent.persisted&&r.init()})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i=n(303),r=n(370),a=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];switch(e){case"CashierJP":return r.errorHandler();case"MBPrice":return n&&i.processBuy(n[0],n[1])}return function(){return null}};e.exports={HandleClick:a}},function(e,t,n){"use strict";var i=n(304),r=n(308),a=n(327),o=n(318),s=n(328),c=n(364),l=n(329).redrawChart,d=n(310),u=n(368),p=n(319).localize,f=n(309).getPropertyValue,h=n(309).isEmptyObject,m=n(315).jpClient,g=n(325).formatMoney,_=function(){var e=".prices-wrapper .price-rows",t=m(),n={},v={},y=[],b=0,w=!1,x=!1,k={},C=void 0,I=function(e){e.barriers.forEach(function(t){var r=E(t);n[r]||(n[r]={}),e.contract_type.forEach(function(e){n[r][e]={},v[e]||(v[e]=i.getTemplate(e))})})},S=function(){s.bindAnalysisTabEvent(),s.request(),l()},E=function(e){return!e.barrier&&e.error&&(e=e.error.details),(e.barrier2?e.barrier2+"_":"")+e.barrier},T=function(e){return h(e.proposal_array.proposals)?void S():(Object.keys(e.proposal_array.proposals).forEach(function(t){e.proposal_array.proposals[t].forEach(function(i){var r=E(i),a=$.extend({},n[r][t]);n[r][t]=$.extend({echo_req:e.echo_req},i),h(a)||a.error||(n[r][t].prev_price=a.ask_price)})}),w||B(),void A())},B=function(){C||(C=$(e)),y.length||(y=Object.keys(n).sort(function(e,t){return+t.split("_")[0]-+e.split("_")[0]}));var t=$("#templates .price-row");y.forEach(function(e){k[e]=t.clone().attr("data-barrier",e),k[e].find(".barrier").html(e.split("_").join("<br />")),C.append(k[e])}),o.wait("get_account_status").then(function(e){x=/unwelcome/.test(e.get_account_status.status),x&&a.show({text:p("Sorry, your account is not authorised for any further contract purchases."),uid:"UNWELCOME",dismissible:!1})}),y.forEach(function(e){Object.keys(v).forEach(function(t){$(C[+v[t].order]).append(q(O(n[e][t],t)))})}),_.hidePriceOverlay(),a.hideSpinnerShowTrading(),w=!0,S()},A=function(){Object.keys(v).forEach(function(t){y.forEach(function(i){var r=n[i][t],a=document.querySelectorAll(e+' div[data-barrier="'+E(r)+'"]');if(a.length){var o=v[t].opposite;q(O(r,t)),q(O(n[i][o],o))}})})},O=function(e,t){var r=E(e),a=e.echo_req.amount,o=n[r][v[t].opposite],s=i.getRemainingTime();return{payout:a/1e3,contract_type:t,barrier:r,is_active:!e.error&&e.ask_price&&!x&&s>120,message:e.error&&"RateLimit"!==e.error.code?e.error.message:"",ask_price:P(e),sell_price:a-P(o),ask_price_movement:e.error?"":L(e.prev_price,e.ask_price),sell_price_movement:o&&!o.error?L(o.ask_price,o.prev_price):""}},P=function(e){return e.error||0===+e.ask_price?f(e,["error","details","display_value"])||e.echo_req.amount:e.ask_price},L=function(e,t){return t>e?"up":t<e?"down":""},q=function(e){var n=$('<button class="price-button'+(e.is_active?"":" inactive")+'"\n            '+(e.is_active?" onclick=\"return HandleClick('MBPrice', '"+e.barrier+"', '"+e.contract_type+"')\"":"")+"\n            "+(e.message?' data-balloon="'+e.message+'"':"")+'>\n                <span class="value-wrapper">\n                    <span class="dynamics '+(e.ask_price_movement||"")+'"></span>\n                    '+D(e.ask_price)+"\n                </span>\n                "+(t?'<span class="base-value">('+D(e.ask_price/e.payout)+")</span>":"")+"\n            </button>"),i=$('<span class="price-wrapper'+(e.sell_price?"":" inactive")+'">\n                <span class="'+(e.sell_price_movement||"")+'"></span>\n                '+D(e.sell_price)+"\n                "+(t?'<span class="base-value">('+D(e.sell_price/e.payout)+")</span>":"")+"\n            </span>"),r=k[e.barrier],a=v[e.contract_type].order;r.find(".buy-price:eq("+a+")").html(n),r.find(".sell-price:eq("+a+")").html(i)},j=function(e,t){if(e&&t){if(!d.isLoggedIn())return void a.show({text:p("Please log in."),uid:"LOGIN_ERROR",dismissible:!0});_.showPriceOverlay(),_.sendBuyRequest(e,t)}},D=function(e){return g(i.getCurrency(),e,1)},M=function(){n={},v={},y=[],w=!1,k={},$(e).html()&&$("#loading-overlay").height($(e).height()).setVisibility(1),$(e).html("")},R=function(e,t){if(r.get("disable_trading"))return void a.show({text:"You have disabled the trading.",uid:"TRADING_DISABLED",dismissible:!0});a.hide("TRADING_DISABLED");var s=n[e][t];if(s&&!s.error){var l={buy:1,price:s.ask_price,parameters:{amount:s.echo_req.amount,barrier:s.barrier,basis:"payout",contract_type:t,currency:i.getCurrency(),symbol:s.echo_req.symbol,date_expiry:s.echo_req.date_expiry,trading_period_start:s.echo_req.trading_period_start,app_markup_percentage:"0"}};s.barrier2&&(l.parameters.barrier2=s.barrier2),o.send(l).then(function(e){e.error?(N(),a.show({text:e.error.message,uid:"BUY_ERROR",dismissible:!0})):(a.hide("BUY_ERROR"),c.init($("<div />",{contract_id:e.buy.contract_id}).get(0)),u.pushPurchaseData(e))})}},V=function(){$("#disable-overlay").setVisibility(1),$("#loading-overlay").setVisibility(0)},N=function(){r.get("disable_trading")||$("#disable-overlay").setVisibility(0),$("#loading-overlay").setVisibility(0)};return{display:T,addPriceObj:I,processBuy:j,cleanup:M,sendBuyRequest:R,showPriceOverlay:V,hidePriceOverlay:N,getReqId:function(){return b},increaseReqId:function(){b++,M()},getPrices:function(){return n},onUnload:function(){M(),b=0,C=void 0}}}();e.exports=_},function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=n(305),a=n(308),o=n(310),s=n(314).get,c=n(319).localize,l=n(309).isEmptyObject,d=n(315).jpClient,u=n(326).padLeft,p=function(){var e=void 0,t="invisible",n=function(e){var t=void 0,n=void 0,a=void 0;"object"===("undefined"==typeof e?"undefined":i(e))?(t=e.date_start.epoch,n=e.date_expiry.epoch,a=e.duration):(t=e.split("_")[0],n=e.split("_")[1],a=e.split("_")[2]);var o=function(e){var t=r.utc(1e3*e).utcOffset(d()?"+09:00":"+00:00").locale(s().toLowerCase()).format("MMM Do, HH:mm");return d()&&(t=t.replace(/08:59/,"09:00«")),t};return{start:o(t),end:o(n),duration:a?a.replace("0d","1d"):""}},f=function(t){if(e&&!l(e)){var i=void 0,r=void 0,o=[],s=e.contracts_for.available,c=a.get("category"),d=$("#period");if(c&&s){for(var u=0;u<s.length;u++)if(s[u].contract_category===c){if(i=s[u].trading_period,!i)return;r=[i.date_start.epoch,i.date_expiry.epoch,i.duration].join("_"),o.indexOf(r)<0&&o.push(r)}o.sort(x);var f=d.find(".list");t&&f.empty();var h=function(e){var t=n(e),i=t.duration.toUpperCase().replace(/([A-Z])/,"$1<br>");return $("<div/>",{value:e,html:'<div class="duration gr-3">'+i+'</div><div class="end gr-6 gr-5-m">'+t.end+'</div><div class="remaining-time gr-3 gr-4-m"></div>',class:"gr-row"})};if(0===f.children().length){var m=a.get("period");o.indexOf(m)===-1&&(m=""),o.forEach(function(e,t){var n=!m&&0===t||e===m,i=h(e);f.append(i),n&&E(d,e)}),a.set("period",d.attr("value")),p.displayRemainingTime(!0)}else{var g=[],_=[];if(f.find("> div").each(function(){g.push($(this).val())}),o.forEach(function(e){g.indexOf(e)<0&&_.push(e)}),_.length>0){var v=void 0;g=g.concat(_).sort(x),g.forEach(function(e,t){f.find('[value="'+e+'"]').length<1&&(v=h(e),t<1?$(v).insertBefore(f.children().eq(t)):$(v).insertAfter(f.children().eq(t-1)))})}g.forEach(function(e){o.indexOf(e)<0&&f.find('[value="'+e+'"]').remove()})}}}},h=void 0,m=void 0,g=void 0,_=void 0,v=void 0,y=void 0,b=function e(t){("undefined"==typeof m||t)&&(h=$("#period"),m=h.find(".list > div, .current > div")),m&&(m.each(function(e){g=$(m[e]),_=g.find(".remaining-time");var t=parseInt(g.attr("value").split("_")[1])-window.time.unix();t<120&&_.addClass("alert");var n=[],i=[],a=r.duration(1e3*t),o={month:a.months(),day:a.days(),hour:a.hours(),minute:a.minutes(),second:a.seconds()};Object.keys(o).forEach(function(e){/(month|day)/.test(e)?o[e]&&n.push(o[e]+c(e[0].toUpperCase())):i.push(u(o[e]||0,2,"0"))}),_.text(n.join("")+" "+i.join(":"))}),y=parseInt(h.attr("value").split("_")[1])-window.time.unix(),y<=0?location.reload():y<120&&$(".price-button").addClass("inactive"),v&&w(),v=setTimeout(e,500))},w=function(){clearTimeout(v)},x=function(e,t){var n=e.split("_"),i=t.split("_"),r=n[1]-n[0],a=i[1]-i[0];return n[1]===i[1]?r-a:n[1]-i[1]},k=function(t){if(e&&!l(e)){var n=e.contracts_for.available,i=$("#category"),r=[{value:"callput",type1:"PUT",type2:"CALLE"},{value:"touchnotouch",type1:"ONETOUCH",type2:"NOTOUCH"},{value:"endsinout",type1:"EXPIRYRANGEE",type2:"EXPIRYMISS"},{value:"staysinout",type1:"RANGE",type2:"UPORDOWN"}],o=i.find(".list");if(t&&o.empty(),0===o.children().length){var s=a.get("category");r.forEach(function(e,t){if(n.find(function(t){return t.contract_category===e.value})){var r=!s&&0===t||e.value===s,a=$("<div/>",{value:e.value,html:'<span class="contract-type gr-6 '+e.type1+'"><span>'+c(I(e.type1).name)+'</span></span>\n                                <span class="contract-type gr-6 '+e.type2+' negative-color"><span>'+c(I(e.type2).name)+"</span></span>",class:"gr-row"});o.append(a),r&&E(i,e.value)}}),a.set("category",i.attr("value"))}f(t)}},C=function(){if(!e||l(e))return[];var t=[],n=a.get("category"),i=a.get("period").split("_");return e.contracts_for.available.forEach(function(e){e.contract_category===n&&e.trading_period&&+e.trading_period.date_start.epoch===+i[0]&&+e.trading_period.date_expiry.epoch===+i[1]&&t.push(e)}),t},I=function(e){var t={PUT:{opposite:"CALLE",order:0,name:"Lower",description:"[_1] [_2] payout if [_3] is strictly lower than Barrier at close on [_4]."},CALLE:{opposite:"PUT",order:1,name:"Higher",description:"[_1] [_2] payout if [_3] is strictly higher than or equal to Barrier at close on [_4]."},ONETOUCH:{opposite:"NOTOUCH",order:0,name:"Touches",description:"[_1] [_2] payout if [_3] touches Barrier through close on [_4]."},NOTOUCH:{opposite:"ONETOUCH",order:1,name:"Does Not Touch",description:"[_1] [_2] payout if [_3] does not touch Barrier through close on [_4]."},EXPIRYRANGEE:{opposite:"EXPIRYMISS",order:0,name:"Ends Between",description:"[_1] [_2] payout if [_3] ends on or between low and high values of Barrier at close on [_4]."},EXPIRYMISS:{opposite:"EXPIRYRANGEE",order:1,name:"Ends Outside",description:"[_1] [_2] payout if [_3] ends outside low and high values of Barrier at close on [_4]."},RANGE:{opposite:"UPORDOWN",order:0,name:"Stays Between",description:"[_1] [_2] payout if [_3] stays between low and high values of Barrier through close on [_4]."},UPORDOWN:{opposite:"RANGE",order:1,name:"Goes Outside",description:"[_1] [_2] payout if [_3] goes outside of low and high values of Barrier through close on [_4]."}};return e?t[e]:t},S=function(){return o.get("currency")||$("#currency").attr("value")||"JPY"},E=function(e,n,i){var r=e.find('.list [value="'+n+'"]');r.length&&(i?e.attr("value",n).find("> .current").find("img").attr("src",r.find("img").attr("src")).end().find(".name").text(r.text()):e.attr("value",n).find("> .current").html(r.clone()),e.find(".list ."+t).removeClass(t),r.addClass(t))};return{populatePeriods:f,populateOptions:k,displayRemainingTime:b,getRemainingTime:function(){return y},getCurrentContracts:C,getTemplate:I,getCurrency:S,getContractsResponse:function(){return e},setContractsResponse:function(t){e=t},setCurrentItem:E,onUnload:function(){w(),e={},m=void 0}}}();e.exports=p},,,,function(e,t,n){"use strict";var i=n(309).isEmptyObject,r=function(){var e={},t=function(t){return n(),e[t]},n=function(){i(e)&&(e=JSON.parse(localStorage.getItem("mb_trading"))||{})},r=function(){localStorage.setItem("mb_trading",JSON.stringify(e))},a=function(t,i){t&&(i=i||"",n(),e[t]!==i&&(e[t]=i,r()))},o=function(){for(var t=arguments.length,i=Array(t),a=0;a<t;a++)i[a]=arguments[a];n();var o=!1;i.forEach(function(t){t in e&&(delete e[t],o=!0)}),o&&r()};return{get:t,set:a,remove:o,clear:function(){e={}}}}();e.exports=r},function(e,t){"use strict";var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dark";e.empty().append('<div class="barspinner '+t+'"><div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div><div class="rect5"></div></div>')},i=function(e){e||(e="div,p,area,nav,section,header,canvas,aside,span");var t=[],n=function(){if($(this).is(":visible")){var e=$(this).css("z-index");isNaN(e)||t.push(e)}};return $(e).each(n),t.length?Math.max.apply(Math,t):null},r=function(e,t){if(t=t||"data.csv",navigator.msSaveBlob)navigator.msSaveBlob(new Blob([e],{type:"text/csv;charset=utf-8;"}),t);else{var n="data:text/csv;charset=utf-8,"+e,i=document.createElement("a");i.href=encodeURI(n),i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i)}},a=function(e,t){return e.replace(/\[_(\d+)]/g,function(e,n){return t[+n-1]})},o=function(e){var t=!0;return e&&e instanceof Object&&Object.keys(e).forEach(function(n){e.hasOwnProperty(n)&&(t=!1)}),t},s=function(e){return o(e)?e:$.extend({},e)},c=function e(t,n){return Array.isArray(n)||(n=[n]),!o(t)&&n[0]in t&&n&&n.length>1?e(t[n[0]],n.slice(1)):t?s(t[n[0]]):void 0},l=function(){var e=window.location.hash;e&&$('a[href="'+e+'"]').click()},d=function(e){e.addClass("clear"),$(document).on("mousemove",".clear",function(e){e.stopPropagation(),$(e.currentTarget)[u(this.offsetWidth-18<e.clientX-this.getBoundingClientRect().left)]("onClear")}).on("mousedown",".onClear",function(e){e.stopPropagation(),$(e.currentTarget).attr("data-value",""),$(e.currentTarget).removeClass("clear onClear").val("").change()})},u=function(e){return e?"addClass":"removeClass"};e.exports={showLoadingImage:n,getHighestZIndex:i,downloadCSV:r,template:a,isEmptyObject:o,getPropertyValue:c,handleHash:l,clearable:d}},function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=n(311),a=n(305),o=n(312).CookieStorage,s=n(312).LocalStore,c=n(312).State,l=n(313).defaultRedirectUrl,d=n(309).getPropertyValue,u=n(320).getLoginToken,p=n(315).jpClient,f=n(318),h=n(324),m=function(){var e={},t=function(t){return t?t.split("+").sort().map(function(t){var n=t.split(":"),i=n[0],r="R"===n[1],a=/^MF/.test(i),o=/^MLT/.test(i);return r&&(e.has_real=r),a&&(e.has_financial=a),o&&(e.has_gaming=o),{id:i,real:r,disabled:"D"===n[2],financial:a,non_financial:o}}):[]},n=function(){e.loginid_array=t(r.get("loginid_list")||""),_("email",r.get("email")),_("loginid",r.get("loginid")),_("residence",r.get("residence")),I()},m=function(){return v("tokens")&&u()&&r.get("loginid")&&e.loginid_array.length>0},g=function(){var e=r.get("loginid_list"),t=r.get("loginid");if(t&&e){var n=new RegExp("^(MX|MF|VRTC|MLT|CR|FOG|VRTJ|JP)[0-9]+$","i");n.test(t)||j(),e.split("+").forEach(function(e){n.test(e.split(":")[0])||j()})}},_=function(t,n){return e[t]=n,s.set("client."+t,n)},v=function(t){var n=e[t]||s.get("client."+t)||"";return Array.isArray(n)||1!==+n&&0!==+n&&"true"!==n&&"false"!==n||(n=JSON.parse(n||!1)),n},y=function(e){var t=e.authorize;r.get("email")||(E("email",t.email),_("email",t.email)),_("session_start",parseInt(a().valueOf()/1e3)),_("is_virtual",t.is_virtual),_("landing_company_name",t.landing_company_name),_("landing_company_fullname",t.landing_company_fullname),C(t.currency)},b=function(){if(v("is_virtual"))return!1;var e=c.get(["response","website_status","website_status","terms_conditions_version"]),t=c.get(["response","get_settings","get_settings"]);return t.hasOwnProperty("client_tnc_status")&&t.client_tnc_status!==e},w=function(){Object.keys(localStorage).forEach(function(e){/^client\.(?!(tokens$))/.test(e)&&s.set(e,"")});var e=window.location.hash;/no-reality-check/.test(e)&&(window.location.hash=e.replace("no-reality-check",""))},x=function(e){return d(JSON.parse(v("tokens")||"{}"),[e])||{}},k=function(e){return d(x(e),["token"])},C=function(e){var t=v("tokens"),n=t&&t.length>0?JSON.parse(t):{},i=n[v("loginid")];i.currency||(i.currency=e,_("tokens",JSON.stringify(n))),_("currency",e)},I=function(){var e=x(v("loginid"));if("object"!==("undefined"==typeof e?"undefined":i(e))){var t=v("tokens"),n=t&&t.length>0?JSON.parse(t):{};Object.keys(n).forEach(function(e){n[e]={token:n[e]}}),_("tokens",JSON.stringify(n))}},S=function(e,t){if(!e||!t||k(e))return!1;var n=v("tokens"),i=n&&n.length>0?JSON.parse(n):{};return i[e]={token:t,currency:""},_("tokens",JSON.stringify(i)),!0},E=function(e,t,n){var i=new Date;i.setDate(i.getDate()+60);var r=new o(e,n);r.write(t,i,!0)},T=function(e,t,n,i){e&&t&&n&&(S(t,n),E("email",e),E("login",n),E("loginid",t),E("loginid_list",i?t+":V:E":t+":R:E+"+r.get("loginid_list")),localStorage.setItem("GTM_new_account","1"),localStorage.setItem("active_loginid",t),h.clear(),window.location.href=l())},B=function(e,t){return(e||{}).shortcode===t},A=function(e){return B(e.financial_company,"maltainvest")},O=function(e){return!e.gaming_company&&B(e.financial_company,"maltainvest")},P=function(e){return!e.gaming_company&&B(e.financial_company,"japan")},L=function(){var t=!1,n=!1;return e.loginid_array.forEach(function(e){e.disabled||(e.financial?t=!0:e.non_financial&&(n=!0))}),n&&t},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"body";m()?f.wait("authorize","website_status").then(function(){$("#client-logged-in").addClass("gr-centered"),$(".client_logged_in").setVisibility(1),v("is_virtual")?($(e).find(".client_virtual").setVisibility(1),$("#topbar").addClass("secondary-bg-color").removeClass("primary-color-dark")):($(e).find(".client_real").not(p()?".ja-hide":"").setVisibility(1),$("#topbar").addClass("primary-color-dark").removeClass("secondary-bg-color"))}):($(e).find(".client_logged_out").setVisibility(1),$("#topbar").addClass("primary-color-dark").removeClass("secondary-bg-color"))},j=function(e){e&&sessionStorage.setItem("showLoginPage",1),f.send({logout:"1"})},D=function(e){if(1===e.logout){w(),s.remove("client.tokens");var t=["login","loginid","loginid_list","email","settings","reality_check","affiliate_token","affiliate_tracking","residence"],n=["."+document.domain.split(".").slice(-2).join("."),"."+document.domain],i=window.location.pathname.split("/",2)[1];""!==i&&(i="/"+i),t.forEach(function(e){var t=new RegExp(e);r.remove(e,{path:"/",domain:n[0]}),r.remove(e,{path:"/",domain:n[1]}),r.remove(e),t.test(document.cookie)&&i&&(r.remove(e,{path:i,domain:n[0]}),r.remove(e,{path:i,domain:n[1]}),r.remove(e,{path:i}))}),window.location.reload()}},M=function(){var t=c.get(["response","landing_company","landing_company"])||{},n={};return Object.keys(t).forEach(function(i){e.landing_company_name===t[i].shortcode&&(n=t[i])}),n},R=function(){return(e.loginid_array.find(function(e){return e.id===v("loginid")})||{}).financial},V=function(){return R()&&!/crs_tin_information/.test((c.get(["response","get_account_status","get_account_status"])||{}).status)},N=function(e){return e?e.replace("\\","_"):""};return{init:n,validateLoginid:g,set:_,get:v,responseAuthorize:y,shouldAcceptTnc:b,clear:w,getToken:k,setCurrency:C,setCookie:E,processNewAccount:T,isLoggedIn:m,sendLogoutRequest:j,doLogout:D,isFinancial:R,shouldCompleteTax:V,getMT5AccountType:N,canUpgradeGamingToFinancial:A,canUpgradeVirtualToFinancial:O,canUpgradeVirtualToJapan:P,hasGamingFinancialEnabled:L,activateByClientType:q,currentLandingCompany:M}}();e.exports=m},,function(e,t,n){"use strict";var i=n(311),r=n(309).getPropertyValue,a=n(309).isEmptyObject,o=function(e){if("undefined"==typeof e)return!1;var t="test";try{return e.setItem(t,"1"),e.removeItem(t),!0}catch(e){return!1}},s=function(e){this.storage=e};s.prototype={get:function(e){return this.storage.getItem(e)||void 0},set:function(e,t){"undefined"!=typeof t&&this.storage.setItem(e,t)},remove:function(e){this.storage.removeItem(e)},clear:function(){this.storage.clear()}};var c=function(e){this.store="undefined"!=typeof e?e:{}};c.prototype={get:function(e){return r(this.store,e)},set:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.store;Array.isArray(e)||(e=[e]),e.length>1?(e[0]in n&&!a(n[e[0]])||(n[e[0]]={}),this.set(e.slice(1),t,n[e[0]])):n[e[0]]=t},remove:function(){for(var e=this,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];n.forEach(function(t){delete e.store[t]})},clear:function(){this.store={}},has:function(e){return void 0!==this.get(e)},keys:function(){return Object.keys(this.store)},call:function(e){"function"==typeof this.get(e)&&this.get(e)()}};var l=new c;l.set("response",{});var d=function(e,t){this.initialized=!1,this.cookie_name=e;var n=window.location.hostname;this.domain=t||(/\.binary\.com/i.test(n)?"."+n.split(".").slice(-2).join("."):n),this.path="/",this.expires=new Date("Thu, 1 Jan 2037 12:00:00 GMT"),this.value={}};d.prototype={read:function(){var e=i.get(this.cookie_name);try{this.value=e?JSON.parse(e):{}}catch(e){this.value={}}this.initialized=!0},write:function(e,t,n){this.initialized||this.read(),this.value=e,t&&(this.expires=t),i.set(this.cookie_name,this.value,{expires:this.expires,path:this.path,domain:this.domain,secure:!!n})},get:function(e){return this.initialized||this.read(),this.value[e]},set:function(e,t){this.initialized||this.read(),this.value[e]=t,i.set(this.cookie_name,this.value,{expires:new Date(this.expires),path:this.path,domain:this.domain})},remove:function(){i.remove(this.cookie_name,{path:this.path,domain:this.domain})}};var u=void 0,p=void 0;o(window.localStorage)&&(p=new s(window.localStorage)),o(window.sessionStorage)&&(u=new s(window.sessionStorage)),p||(p=new c),u||(u=new c),e.exports={isStorageSupported:o,Store:s,InScriptStore:c,CookieStorage:d,State:l,SessionStore:u,LocalStore:p}},function(e,t,n){"use strict";var i=n(314).urlLang,r=n(315).jpClient;n(323);var a=function(){var e=void 0,t=void 0,n=function(t){e=t?a(t):window?window.location:""},a=function(e){return $("<a>",{href:decodeURIComponent(e)})[0]},o=function(){e=window?window.location:e},s=function(t){for(var n=[],i=((t?new URL(t):e).search||"").substr(1).split("&"),r=i.length;r--;){var a=i[r].split("=");n.push(a)}return n},c=function(e){for(var t={},n=s(e),i=n.length;i--;)n[i][0]&&(t[n[i][0]]=n[i][1]);return t},l=function(e){return Object.keys(e).map(function(t){return t+"="+e[t]}).join("&")},d=function(e,t){e?e.length>0&&"/"===e[0]&&(e=e.substr(1)):e="";var n=i().toLowerCase(),r=window.location.href;return""+r.substring(0,r.indexOf("/"+n+"/")+n.length+2)+(e||"home"+("ja"===n?"-jp":""))+".html"+(t?"?"+t:"")},u=function(e){return e?e.length>0&&"/"===e[0]&&(e=e.substr(1)):e="",t&&0!==t.length||(t=$('script[src*="binary.min.js"],script[src*="binary.js"]').attr("src"),t=t&&t.length>0?t.substr(0,t.indexOf("/js/")+1):"https://www.binary.com/"),t+e},p=function(){return d(r()?"multi_barriers_trading":"trading")};return{init:n,reset:o,paramsHash:c,param:function(e){return c()[e]},getLocation:a,paramsHashToString:l,urlFor:d,urlForStatic:u,defaultRedirectUrl:p}}();e.exports=a},function(e,t,n){"use strict";var i=n(311),r=n(312).CookieStorage,a=function(){var e={ACH:"Translations",EN:"English",DE:"Deutsch",ES:"Español",FR:"Français",ID:"Indonesia",IT:"Italiano",JA:"日本語",PL:"Polish",PT:"Português",RU:"Русский",TH:"Thai",VI:"Tiếng Việt",ZH_CN:"简体中文",ZH_TW:"繁體中文"},t=function(e){if(!i.get("language")||e){var t=new r("language");t.write(e||c())}},n=null,a=new RegExp("^("+Object.keys(e).join("|")+")$","i"),o=function(e){if(n&&!e)return n;var t=(e||window.location.href).split("/").slice(3),i=t.find(function(e){return a.test(e)})||"";return e||(n=i),i},s=null,c=function(){if(/ach/i.test(s)||/ach/i.test(o())){var e=i.get("jipt_language_code_binary-static");e&&(s=e.toUpperCase().replace("-","_").toUpperCase(),$("body").addClass(s))}return s=s||(o()||i.get("language")||"EN").toUpperCase()},l=function(e){return window.location.href.replace(new RegExp("/"+c()+"/","i"),"/"+e.trim().toLowerCase()+"/")},d=function(){var e=void 0;$("#select_language").find("li").on("click",function(){e=$(this);var n=e.attr("class");c()!==n&&($("#display_language").find(".language").text(e.text()),t(n),document.location=l(n))})};return{getAll:function(){return e},setCookie:t,get:c,onChange:d,urlFor:l,urlLang:o}}();e.exports=a},function(e,t,n){"use strict";var i=n(311),r=n(316),a=n(314),o=n(317),s=n(318),c=function(){r.isInContext()||s.wait("website_status").then(function(e){if(!e.error){var t=e.website_status,n=t.clients_country;"jp"===n?l("JA"):"id"===n?l("ID"):o(t)}})},l=function(e){a.get()!==e&&(window.location.href=a.urlFor(e)),document.getElementById("select_language")&&($(".languages").remove(),$("#gmt-clock").addClass("gr-6 gr-12-m").removeClass("gr-5 gr-6-m"),$("#contact-us").addClass("gr-6").removeClass("gr-2"))},d=function(){return"JA"===a.get()||u()},u=function(){return"jp"===i.get("residence")},p=function(){if("ID"===a.get()){var e=$(".academy a"),t=e.attr("href"),n=/id/;n.test(t)||e.attr("href",t+n)}d()&&($(".ja-hide").setVisibility(0),$(".ja-show").setVisibility(1),$("#regulatory-text").addClass("gr-12 gr-12-p").removeClass("gr-9 gr-7-p"),u()||$("#topMenuCashier").hide())};e.exports={checkClientsCountry:c,jpClient:d,jpResidence:u,checkLanguage:p}},function(e,t,n){"use strict";var i=n(314).urlLang,r=function(){var e=function(){return/^https:\/\/staging\.binary\.com\/translations\//i.test(window.location.href)&&/ach/i.test(i())},t=function(){e()&&($('#topbar ul[id$="_language"]').setVisibility(0),window._jipt=[],window._jipt.push(["project","binary-static"]),$("body").append($("<script/>",{type:"text/javascript",src:document.location.protocol+"//cdn.crowdin.com/jipt/jipt.js"})))};return{init:t,isInContext:e}}();e.exports=r},function(e,t,n){"use strict";var i=n(314),r=function(e){var t=$(".languages"),n="#select_language",r=i.get();t.find("#display_language li, "+n+" li").addClass(r).find("span.language").text(a(r));var o=e.supported_languages.sort(function(e,t){return"EN"===e||e<t?-1:1}),s=t.find(n);o.forEach(function(e){s.append($("<li/>",{class:e,text:a(e)}))}),s.find("."+r+":eq(1)").setVisibility(0),i.onChange(),t.setVisibility(1)},a=function(e){return i.getAll()[e]};e.exports=r},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=n(314).get,o=n(319).localize,s=n(312).State,c=n(309).getPropertyValue,l=n(320).getLoginToken,d=n(322).getAppId,u=n(322).getSocketURL,p=function(){var e=void 0,t={},n=[],i=0,p=0,h=0,m=!0,g=!1,_=u()+"?app_id="+d()+"&l="+a(),v={},y={},b=["authorize","get_settings","residence_list","landing_company","payout_currencies","asset_index"],w={items:[],clear:function(){w.items=[]},has:function(e){return w.items.indexOf(e)>=0},add:function(e){w.has(e)||w.items.push(e)},remove:function(e){w.has(e)&&w.items.splice(w.items.indexOf(e,1))}},x={items:{},add:function(e,t){x.items[e]||(x.items[e]=[]),x.items[e].push(t)},resolve:function(e){var t=e.msg_type,n=x.items[t];n&&n.length&&(n.forEach(function(n){x.another_exists(n,t)||n.resolve(e)}),x.items[t]=[])},another_exists:function(e,t){return Object.keys(x.items).some(function(n){return n!==t&&$.inArray(e,x.items[n])>=0})}},k=function(){Object.keys(v).forEach(function(e){clearTimeout(v[e]),delete v[e]})},C=function(){return e&&1===e.readyState},I=function(){return!e||2===e.readyState||3===e.readyState},S=function(){for(;n.length>0;){var e=n.shift();T(e.request,e.options)}},E=function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];var r=new f,a=!0;return n.forEach(function(e){var i=s.get(["response",e]);i?1===n.length&&r.resolve(i):("authorize"!==e||t.is_logged_in)&&(x.add(e,r),a=!1)}),a&&r.resolve(),r.promise},T=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.promise||new f,o=r.msg_type||b.find(function(e){return e in t});if(!r.forced&&o){var c=s.get(["response",o]);if(c)return a.resolve(c),a.promise;if(w.has(o))return E(o).then(function(e){return a.resolve(e),a.promise})}return t.req_id||(t.req_id=++p),y[t.req_id]={callback:function(e){"function"==typeof r.callback?r.callback(e):a.resolve(e)},subscribe:!!t.subscribe},C()&&m?(g=!1,t.hasOwnProperty("passthrough")||t.hasOwnProperty("verify_email")||(t.passthrough={}),1===+t.time&&(t.passthrough.req_number=++i,v[i]=setTimeout(e.onclose,1e4)),e.send(JSON.stringify(t)),o&&!w.has(o)&&w.add(o)):(n.push({request:t,options:$.extend(r,{promise:a})}),I()&&!v.reconnect&&(v.reconnect=setTimeout(function(){B(1)},5e3))),a.promise},B=function i(a){h!==d()&&("object"===("undefined"==typeof a?"undefined":r(a))&&(t=a,n=[]),k(),I()&&(e=new WebSocket(_),s.set("response",{})),e.onopen=function(){var e=l();e&&localStorage.getItem("client.tokens")?T({authorize:e},{forced:!0}):S(),"function"==typeof t.onOpen&&t.onOpen(C())},e.onmessage=function(e){var n=JSON.parse(e.data);if(n){var i=c(n,["echo_req","passthrough"]);if(i){var r=i.req_number;r&&(clearInterval(v[r]),delete v[r])}var a=n.msg_type;c(n,["echo_req","subscribe"])&&!/(balance|website_status)/.test(a)||s.set(["response",a],$.extend({},n));var l=n.req_id,u=l?y[l]:null;u&&"function"==typeof u.callback&&(u.callback(n),u.subscribe||delete y[l]),x.resolve(n);var p=c(n,["error","code"]);switch(p){case"WrongResponse":case"OutputValidationFailed":var f="WrongResponse"===p&&n.error.message?n.error.message:o("Sorry, an error occurred while processing your request.");$("#content").empty().html($("<div/>",{class:"container"}).append($("<p/>",{class:"notice-msg center-text",text:f})));break;case"RateLimit":t.notify(o("You have reached the rate limit of requests per second. Please try later."),!0,"RATE_LIMIT");break;case"InvalidAppID":h=d(),t.notify(n.error.message,!0,"INVALID_APP_ID")}"function"==typeof t.onMessage&&t.onMessage(n)}},e.onclose=function(){w.clear(),k(),h!==d()&&(I()&&t.notify(o("Connection error: Please check your internet connection."),!0,"CONNECTION_ERROR"),"function"!=typeof t.onDisconnect||g?v.reconnect||(v.reconnect=setTimeout(function(){i(1)},5e3)):(t.onDisconnect(),g=!0))})},A=function(e){n=[],e&&(s.set(["response",e],void 0),w.remove(e))},O=function(e){return"undefined"!=typeof e&&(m=!!e),m};return{init:B,wait:E,send:T,clear:A,clearTimeouts:k,sendBuffered:S,availability:O,setOnDisconnect:function(e){t.onDisconnect=e},removeOnDisconnect:function(){delete t.onDisconnect}}}(),f=function e(){var t=this;i(this,e),this.promise=new Promise(function(e,n){t.reject=n,t.resolve=e})};e.exports=p},function(e,t,n){"use strict";var i=n(305),r=n(309).template,a=function(){var e=void 0,t=function(t){e=texts_json[t.toUpperCase()],i.locale(t.toLowerCase())},n=function(t,n){var i=t.replace(/[\s|.]/g,"_");return t=e&&e[i]||t,n?r(t,n):t},a=function(e,t){return Array.isArray(e)?e.map(function(e){return n(e,t)}):n(e,t)};return{forLang:t,localize:a}}();e.exports=a},function(e,t,n){"use strict";var i=n(311),r=function(e){return e.replace(/[a-zA-Z]/g,function(e){var t=e.charCodeAt(0)+13;return String.fromCharCode((e<="Z"?90:122)>=t?t:t-26)})},a=function(e,t){e.change(function(){"Hedging"===e.val()?t.setVisibility(1):t.setVisibility(0)})},o=function(e){var t=$("<select/>");return e.find("li a").each(function(){t.append($("<option/>",{text:$(this).text(),value:$(this).attr("href")}))}),t.change(function(){e.find('li a[href="'+$(this).val()+'"]').click();
}),t},s=function(e,t,n,i,r){e&&!e.nodeName&&(e="string"==typeof e?document.getElementById(e):void 0),e&&e.appendChild(c(t,n,i,r))},c=function(e,t,n,i){var r=document.createElement("option");return r.text=e,r.value=t||"",n&&"disabled"===n.toLowerCase()&&r.setAttribute("disabled","disabled"),i&&(r.className=i),r},l=function(e){return!(!e||0===e.offsetWidth&&0===e.offsetHeight)},d=function(e,t){var n=document.createElement("input");return n.setAttribute("type",e),n.setAttribute("value",t),n.value!==t},u=function(e,t){return e.getAttribute("data-value")!==e.value&&(e.getAttribute("type")===t&&e.setAttribute("data-value",e.value),!0)},p=function(e){return"undefined"!=typeof e&&null!==e},f=function(e,t,n){if(p(e)){if("undefined"==typeof t)return e[n];e[n]=t}},h=function(e){return n.e(1,function(t){var i=n(321);return e(i)})};e.exports={getLoginToken:function(){return i.get("login")},emailRot13:r,detectHedging:a,jqueryuiTabsToDropdown:o,appendTextValueChild:s,makeOption:c,isVisible:l,checkInput:d,dateValueChanged:u,selectorExists:p,elementTextContent:function(e,t){return f(e,t,"textContent")},elementInnerHtml:function(e,t){return f(e,t,"innerHTML")},requireHighstock:h}},,function(e,t,n){"use strict";var i=n(311),r=function(){return window.localStorage.getItem("config.app_id")||(/staging\.binary\.com/i.test(window.location.hostname)?"1098":"1")},a=function(){var e=window.localStorage.getItem("config.server_url");if(!e){var t=i.get("loginid"),n=t&&!/^VRT/.test(t),r={real:100,virtual:0,logged_out:0},a=["real","virtual","logged_out"],o=100*Math.random(),s=i.get("connection_setup");if(s&&s.indexOf(",")>0){var c=s.split(",");a.map(function(e,t){c[t]&&!isNaN(c[t])&&(r[e]=+c[t].trim())})}e=(/staging\.binary\.com/i.test(window.location.hostname)?"blue":n?o<r.real?"green":"blue":t?o<r.virtual?"green":"blue":o<r.logged_out?"green":"blue")+".binaryws.com"}return"wss://"+e+"/websockets/v3"};e.exports={getAppId:r,getSocketURL:a}},,function(e,t,n){"use strict";var i=n(305),r=n(319).localize,a=n(312).LocalStore,o=n(325).formatMoney,s=function(){var e={},t=function(){var e=c("ack"),t=+c("interval");0!==e&&1!==e&&s("ack",0),t||s("interval",6e5)},n=function(e){var t=i.utc(new Date(1e3*e.start_time)),n=i.utc(),a=i.duration(n.diff(t)),s=r("[_1] days [_2] hours [_3] minutes",[a.get("days"),a.get("hours"),a.get("minutes")]),c=+e.buy_amount+ +e.sell_amount,l=+e.sell_amount-+e.buy_amount,d=r("Your trading statistics since [_1].",[t.format("YYYY-MM-DD HH:mm:ss")+" GMT"]);return{start_time_string:d,login_time:t.format("YYYY-MM-DD HH:mm:ss")+" GMT",current_time:n.format("YYYY-MM-DD HH:mm:ss")+" GMT",session_duration:s,loginid:e.loginid,currency:e.currency,turnover:o(e.currency,+c,1),profit_loss:o(e.currency,+l,1),contracts_bought:e.buy_count,contracts_sold:e.sell_count,open_contracts:e.open_contract_count,potential_profit:o(e.currency,+e.potential_profit,1)}},s=function(t,n){return e[t]=n,a.set("client.reality_check."+t,n)},c=function(t){var n=e[t]||a.get("client.reality_check."+t)||"";return 1!==+n&&0!==+n&&"true"!==n&&"false"!==n||(n=JSON.parse(n||!1)),n},l=function(){Object.keys(localStorage).forEach(function(e){/^client\.reality_check\./.test(e)&&a.set(e,"")})};return{resetInvalid:t,summaryData:n,set:s,get:c,clear:l}}();e.exports=s},function(e,t,n){"use strict";var i=n(315).jpClient,r=n(314).get,a=["BTC"],o=function(e,t,n){var a=d(e),o=i(),u=c(e),p=void 0;if(t&&(t=String(t).replace(/,/g,"")),"undefined"!=typeof Intl&&e&&!a&&"undefined"!=typeof t){var f=n?{minimumFractionDigits:u,maximumFractionDigits:u}:{style:"currency",currency:e},h=r().toLowerCase();p=new Intl.NumberFormat(h.replace("_","-"),f).format(t)}else{var m=t,g="";if(o&&(m=parseInt(t),Number(m)<0&&(g="-")),m=s(m,u),n)p=m;else{var _=l[e];p=_?g+_+m:e+" "+m}}return p},s=function(e,t,n){var i=String(e||0).replace(/,/g,"");return"undefined"!=typeof t&&(i=(+i).toFixed(t)),n&&(i=parseFloat(+i)),i.toString().replace(/(^|[^\w.])(\d{4,})/g,function(e,t,n){return t+n.replace(/\d(?=(?:\d\d\d)+(?!\d))/g,"$&,")})},c=function(e){return d(e)?8:i()?0:2},l={USD:"$",GBP:"£",AUD:"A$",EUR:"€",JPY:"¥",BTC:"₿"},d=function(e){return!!e&&new RegExp(e,"i").test(a)};e.exports={formatMoney:o,formatCurrency:function(e){return l[e]},isCryptocurrency:d,addComma:s,getDecimalPlaces:c}},function(e,t,n){"use strict";var i=n(320).checkInput,r=function(e){return e.replace(/\w[^\s\/\\]*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})},a=function(e){return e.format("YYYY-MM-DD")},o=function(e){return $(window).width()<770&&i("date","not-a-date")?a(e):e.format("DD MMM, YYYY")},s=function(e,t,n){return e=String(e||""),e.length>=t?e:""+Array(t-e.length+1).join(n)+e},c=function(e,t){e=l(e),t=l(t);var n=Math.max(e.length,t.length);return e=s(e,n,"0"),t=s(t,n,"0"),e>t?1:e<t?-1:0},l=function(e){return"number"==typeof e?String(e):e};e.exports={toISOFormat:a,toReadableFormat:o,toTitleCase:r,padLeft:s,compareBigUnsignedInt:c}},function(e,t,n){"use strict";var i=n(319).localize,r=function(){var e=function(e){var n=a(),i=n.find("#"+e.uid);e.uid&&0!==i.length?i.html()!==e.text&&i.replaceWith(t(e)):n.prepend(t(e)),$.scrollTo(n,500,{offset:-5}),o()},t=function(e){var t=$('<div class="notice-msg center-text'+(e.dismissible?" dismissible":"")+'"\n            '+(e.uid?' id="'+e.uid+'"':"")+">"+i(e.text)+"\n                "+(e.dismissible?'<div class="notification-dismiss">x</div>':"")+"\n            </div>");return e.dismissible&&t.click(function(){r(this)}),t},n=function(e){e&&a().find("#"+e).remove()},r=function(e){$(e).remove()},a=function(){return $("#notifications_wrapper")},o=function(){$("#main_loading").setVisibility(0),$("#mb-trading-wrapper").setVisibility(1)};return{show:e,hide:n,hideSpinnerShowTrading:o}}();e.exports=r},function(e,t,n){"use strict";var i=n(329).showChart,r=n(338),a=n(339).getActiveTab,o=n(340),s=n(308),c=n(314).get,l=n(312).State,d=n(313),u=n(360),p=function(){var e="invisible",t=void 0,n=function(){t=(l.get("is_mb_trading")?s.get("category"):r.get("formname"))||"risefall";var e={matchdiff:"digits",callput:"higherlower"},n=new RegExp(Object.keys(e).join("|"),"gi");t=t.replace(n,function(t){return e[t]}),$("#tab_last_digit").setVisibility(/(digits|overunder|evenodd)/.test(t)),sessionStorage.setItem("currentAnalysisTab",a()),f()},p=function(){$("#betsBottomPage").find("li a").on("click",function(e){e.preventDefault();var t=e.target.parentElement;sessionStorage.setItem("currentAnalysisTab",t.id),t.classList.contains("active")||f(t.id)})},f=function(e){var t=e||a();if($("#betsBottomPage").find("li").removeClass("active"),$("#"+t).addClass("active"),h(),u.init(),l.get("is_mb_trading")&&i(),"tab_portfolio"===t)u.show();else if(u.hide(),"tab_graph"===t)i();else if("tab_last_digit"===t){var n=$("#digit_underlying option:selected").val()||$("#underlying").find("option:selected").val(),r=$("#tick_count").val()||100;o.request("",{ticks_history:n,count:r.toString(),end:"latest"})}else"tab_explanation"===t&&m()},h=function(){var t=a(),n=document.getElementById("bet_bottom_content");if(n){for(var i=n.children,r=document.getElementById(t+"-content"),o=r.classList,s=0,c=i.length;s<c;s++)i[s].classList.remove("selectedTab"),i[s].classList.add(e);o.add("selectedTab"),o.remove(e)}},m=function(){var e=$("#tab_explanation-content");e.find("#explanation_winning > div, #explanation_explain > div, #explanation_image").setVisibility(0),e.find("#explanation_winning, #winning_"+t+", #explanation_explain, #explain_"+t).setVisibility(1);var n={risefall:{image1:"rise-fall-1.svg",image2:"rise-fall-2.svg"},higherlower:{image1:"higher-lower-1.svg",image2:"higher-lower-2.svg"},touchnotouch:{image1:"touch-notouch-1.svg",image2:"touch-notouch-2.svg"},endsinout:{image1:"in-out-1.svg",image2:"in-out-2.svg"},staysinout:{image1:"in-out-3.svg",image2:"in-out-4.svg"},updown:{image1:"up-down-1.svg",image2:"up-down-2.svg"},evenodd:{image1:"evenodd-1.svg",image2:"evenodd-2.svg"},overunder:{image1:"overunder-1.svg",image2:"overunder-2.svg"}};if(n[t]){var i=d.urlForStatic("images/pages/trade-explanation/"+("JA"===c()?"ja/":""));e.find("#explanation_image_1").attr("src",i+n[t].image1),e.find("#explanation_image_2").attr("src",i+n[t].image2),e.find("#explanation_image").setVisibility(1)}};return{request:n,bindAnalysisTabEvent:p}}();e.exports=p},function(e,t,n){"use strict";var i=n(314).get,r=n(319).localize,a=n(312).State,o=n(309).getPropertyValue,s=n(315).jpClient,c=n(322),l=function(){var e=void 0,t=void 0,l=void 0,d=function(){a.get("is_chart_allowed")?p():(u(),$("#trade_live_chart").hide(),$("#chart-error").text(r("Chart is not available for this underlying.")).show())},u=function(){"function"==typeof o(e,["actions","destroy"])&&e.actions.destroy(),e=void 0},p=function(){var t=a.get("is_mb_trading"),n=t?$("#underlying").attr("value"):document.getElementById("underlying").value;!$("#tab_graph").hasClass("active")&&!t||e&&e.data().instrumentCode===n||(u(),f()),$("#chart-error").hide(),$("#trade_live_chart").show()},f=function(){a.get("is_chart_allowed")&&(l?h():n.e(1,function(){n.e(2,function(e){t=n(330),t.init({server:c.getSocketURL(),appId:c.getAppId(),lang:i().toLowerCase()}),l=!0,h()})}))},h=function(){var n=a.get("is_mb_trading"),r=$("#underlying"),o=n?r.attr("value"):r.val(),c=n?r.find(".current .name").text():r.find("option:selected").text(),l={instrumentCode:o,instrumentName:c,showInstrumentName:!0,timePeriod:"1t",type:"line",lang:i().toLowerCase(),timezone:"GMT+"+(s()?"9":"0")};e=t.chartWindow.addNewChart($("#webtrader_chart"),l)},m=function(){"function"==typeof o(e,["actions","reflow"])&&e.actions.reflow()};return{showChart:d,cleanupChart:u,setChart:p,redrawChart:m}}();e.exports=l},,,,,,,,,function(e,t,n){"use strict";var i=n(313),r=n(309).isEmptyObject,a=n(320).isVisible,o=n(312).State,s=function(){var e={},t=function(t){var r=e[t]||i.param(t),a=sessionStorage.getItem(t);return!r||a&&r===a||sessionStorage.setItem(t,r),!r&&a&&n(t,a),r||a},n=function(t,n){t&&(n=n||"",r(e)&&(e=i.paramsHash()),e[t]!==n&&(e[t]=n,a(document.getElementById("trading_init_progress"))||(sessionStorage.setItem(t,n),l())))},s=function(){for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];r(e)&&(e=i.paramsHash());var o=!1;n.forEach(function(t){t in e&&(sessionStorage.removeItem(t),delete e[t],o=!0)}),o&&l()},c=function(){Object.keys(e).forEach(function(t){sessionStorage.setItem(t,e[t])}),l()},l=function(){if(o.get("is_trading")||o.get("is_beta_trading")){var t=""+window.location.origin+window.location.pathname+"?"+i.paramsHashToString(e);window.history.replaceState({url:t},null,t)}};return{get:t,set:n,update:c,remove:s,clear:function(){e={}}}}();e.exports=s},function(e,t,n){"use strict";var i=n(310),r=n(312).State,a=function(e){var t=e||"currentAnalysisTab",n=r.get("is_chart_allowed"),a=sessionStorage.getItem(t)||(r.get("is_mb_trading")?"tab_portfolio":n?"tab_graph":"tab_explanation"),o=document.getElementById(a);return o||(a="tab_explanation",o=document.getElementById(a)),!o||!o.classList.contains("invisible")||!e&&"tab_portfolio"===a&&i.isLoggedIn()&&r.get("is_mb_trading")||(a=n?"tab_graph":"tab_explanation",sessionStorage.setItem(t,a)),a};e.exports={getActiveTab:a,getActiveTab_Beta:function(){return a("currentAnalysisTab_Beta")}}},function(e,t,n){"use strict";var i=n(341),r=n(349),a=n(351),o=n(352),s=n(353),c=n(344).updateWarmChart,l=n(355),d=n(338),u=n(339).getActiveTab,p=n(339).getActiveTab_Beta,f=n(356),h=n(348),m=n(357),g=n(308),_=n(359),v=n(318),y=n(312).State,b=function(){var e=void 0,t=function(t,i,r){e=y.get("is_mb_trading")?g.get("underlying"):d.get("underlying"),e&&i&&r&&(e!==i.ticks_history||!i.subscribe)?v.send(i,{callback:r}):(i&&!i.subscribe||(v.send({forget_all:"ticks"}),v.send({forget_all:"candles"})),v.send(i||{ticks_history:t||e,style:"ticks",end:"latest",count:20,subscribe:1},{callback:function(e){var t=e.msg_type,i="tab_last_digit"===u(),o="tab_last_digit"===p();return"function"==typeof r&&r(e),y.get("is_mb_trading")?void _.processTickHistory(e):void("tick"===t?y.get("is_trading")?(n(e),i&&l.updateChart(e)):y.get("is_beta_trading")&&(w(e),o&&a.updateChart(e)):"history"===t&&(b(e),i?l.showChart(e.echo_req.ticks_history,e.history.prices):o&&a.showChart(e.echo_req.ticks_history,e.history.prices)))}}))},n=function(t){var n=e;(t.echo_req.ticks===n||t.tick&&t.tick.symbol===n)&&(h.details(t),h.display(),m.updateChart(t),f.updateSpotList(),i.isBarrierUpdated()||(i.display(),i.setBarrierUpdate(!0)),c())},b=function(e){if(e.history&&e.history.times&&e.history.prices)for(var t=0;t<e.history.times.length;t++)h.details({tick:{epoch:e.history.times[t],quote:e.history.prices[t]}})},w=function(t){var n=e;t.echo_req.ticks===n||t.tick&&t.tick.symbol===n?(h.details(t),h.display(),s.updateChart(t),o.updateSpotList(),r.isBarrierUpdated()||(r.display(),r.setBarrierUpdate(!0)),c()):a.updateChart(t)};return{request:t}}();e.exports=b},function(e,t,n){"use strict";var i=n(305),r=n(342).countDecimalPlaces,a=n(343),o=n(338),s=n(348),c=n(320).elementTextContent,l=n(320).isVisible,d=function(){var e=!1,t=function(){var e=a.barriers()[o.get("underlying")],t=a.form();if(e&&t&&"risefall"!==o.get("formname")){var n=e[t];if(n){var u=document.getElementById("duration_units"),p=document.getElementById("expiry_date"),f=document.getElementById("indicative_barrier_tooltip"),h=document.getElementById("indicative_high_barrier_tooltip"),m=document.getElementById("indicative_low_barrier_tooltip"),g=s.quote(),_=r(g);if(1===n.count){document.getElementById("high_barrier_row").style.display="none",document.getElementById("low_barrier_row").style.display="none",document.getElementById("barrier_row").setAttribute("style","");var v=o.get("barrier"),y=document.getElementById("barrier"),b=document.getElementById("barrier_tooltip"),w=document.getElementById("barrier_span"),x=v&&!isNaN(v)?v:n.barrier||0,$=void 0;return u&&l(u)&&"d"===u.value||p&&l(p)&&i(p.getAttribute("data-value")).isAfter(i(),"day")||!String(n.barrier).match(/^[+-]/)?($=g&&!isNaN(g)&&String(x).match(/^[+-]/)?(parseFloat(g)+parseFloat(x)).toFixed(_):parseFloat(x),b.style.display="none",w.style.display="inherit",c(f,"")):(String(x).match(/^[+-]/)||(x=n.barrier),$=x,w.style.display="none",b.style.display="inherit",g&&!isNaN(g)?c(f,(parseFloat(g)+parseFloat(x)).toFixed(_)):c(f,"")),y.value=y.textContent=$,o.set("barrier",y.value),o.remove("barrier_high","barrier_low"),void d.validateBarrier()}if(2===n.count){document.getElementById("barrier_row").style.display="none",document.getElementById("high_barrier_row").setAttribute("style",""),document.getElementById("low_barrier_row").setAttribute("style","");var k=document.getElementById("barrier_high"),C=document.getElementById("barrier_low"),I=document.getElementById("barrier_high_tooltip"),S=document.getElementById("barrier_high_span"),E=document.getElementById("barrier_low_tooltip"),T=document.getElementById("barrier_low_span"),B=o.get("barrier_high"),A=o.get("barrier_low"),O=B&&!isNaN(B)?B:n.barrier||0,P=A&&!isNaN(A)?A:n.barrier1||0,L=void 0,q=void 0;if(u&&l(u)&&"d"===u.value||p&&l(p)&&i(p.getAttribute("data-value")).isAfter(i(),"day")||!String(n.barrier).match(/^[+-]/))g&&!isNaN(g)&&String(O).match(/^[+-]/)?(L=(parseFloat(g)+parseFloat(O)).toFixed(_),q=(parseFloat(g)+parseFloat(P)).toFixed(_)):(L=parseFloat(O),q=parseFloat(P)),S.style.display="inherit",I.style.display="none",T.style.display="inherit",E.style.display="none",c(h,""),c(m,"");else{String(O).match(/^[+-]/)&&String(P).match(/^[+-]/)||(O=n.barrier,P=n.barrier1),L=O,q=P,S.style.display="none",I.style.display="inherit",T.style.display="none",E.style.display="inherit";var j=function(e,t){return(e+parseFloat(t)).toFixed(_)};if(g&&!isNaN(g)){var D=parseFloat(g);c(h,j(D,O)),c(m,j(D,P))}else c(h,""),c(m,"")}return k.value=k.textContent=L,C.value=C.textContent=q,o.set("barrier_high",k.value),o.set("barrier_low",C.value),void o.remove("barrier")}}}for(var M=document.getElementsByClassName("barrier_class"),R=0;R<M.length;R++)M[R].style.display="none";o.remove("barrier","barrier_high","barrier_low")},n=function(){var e=document.getElementById("barrier"),t=isNaN(parseFloat(e.value))||0===parseFloat(e.value);l(e)&&t?e.classList.add("error-field"):e.classList.remove("error-field")};return{display:t,isBarrierUpdated:function(){return e},setBarrierUpdate:function(t){e=t},validateBarrier:n}}();e.exports=d},function(e,t,n){"use strict";var i=n(305),r=function(e,t,n){e.classList.remove("price_moved_down"),e.classList.remove("price_moved_up"),parseFloat(n)>parseFloat(t)?(e.classList.remove("price_moved_down"),e.classList.add("price_moved_up")):parseFloat(n)<parseFloat(t)&&(e.classList.remove("price_moved_up"),e.classList.add("price_moved_down"))},a=function(e){if(!isNaN(e)){var t=e.toString();if(t.indexOf(".")!==-1)return t.split(".")[1].length}return 0},o={},s=function(e){if(!o.hasOwnProperty(e.echo_req.trading_times)&&e.hasOwnProperty("trading_times")&&e.trading_times.hasOwnProperty("markets"))for(var t=0;t<e.trading_times.markets.length;t++){var n=e.trading_times.markets[t].submarkets;if(n)for(var i=0;i<n.length;i++){var r=n[i].symbols;if(r)for(var a=0;a<r.length;a++){var s=r[a];o[e.echo_req.trading_times]||(o[e.echo_req.trading_times]={}),o[e.echo_req.trading_times][s.symbol]=s.times.close}}}},c=function(){return document.getElementById("date_start")},l=function(e,t,n){e=e||document.getElementById("time_start"),t=t||$("#date_start"),n=e.value||n,n&&(n=n.split(":"));var r=i.utc(),a=n&&n.length?+n[0]:r.hour(),o=n&&n.length?+n[1]:r.minute(),s=i.utc(1e3*c().value).hour(a).minute(o),l=d(t).minTime;l=l.valueOf()>r.valueOf()?l:r;var u=d(t).maxTime;e.value=s.isBefore(l)||s.isAfter(u)||!n?l.add(5,"minutes").utc().format("HH:mm"):n.join(":"),e.setAttribute("data-value",e.value)},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.time?window.time:i.utc(),n=e.find("option:selected");t=+n.val()>t.unix()?i.utc(1e3*n.val()):t;var r=i.utc(1e3*n.attr("data-end"));return{minTime:t,maxTime:r}};e.exports={displayPriceMovement:r,countDecimalPlaces:a,processTradingTimesAnswer:s,getTradingTimes:function(){return o},getStartDateNode:c,checkValidTime:l,getMinMaxTime:d}},function(e,t,n){"use strict";var i=n(344).getFormNameBarrierCategory,r=n(314).get,a=n(319).localize,o=n(309).isEmptyObject,s=function(){var e={},t={},n={},c={},l={},d=void 0,u=void 0,p=void 0,f=void 0,h=function(e){var t=e.contract_category,n=e.expiry_type,i=e.barrier_category,r=e.start_type,a=e.max_contract_duration,o=e.min_contract_duration;c[n]||(c[n]={}),c[n][t]||(c[n][t]={}),c[n][t][i]||(c[n][t][i]={}),c[n][t][i][r]||(c[n][t][i][r]={}),c[n][t][i][r].max_contract_duration=a,c[n][t][i][r].min_contract_duration=o},m=function(t){var r=s.contracts().contracts_for,o=void 0;if(r){l={has_spot:0,list:[]},c={},d=r.open,u=r.close;var m=i(t);p=t=m.form_name,f=o=m.barrier_category,r.available.forEach(function(i){var r=i.contract_category;if(t&&t===r){o?o===i.barrier_category&&h(i):h(i),i.forward_starting_options&&"forward"===i.start_type&&"higherlower"!==sessionStorage.formname?l.list=i.forward_starting_options:"spot"===i.start_type&&(l.has_spot=1);var s=i.underlying_symbol;i.barrier_category&&"non_financial"!==i.barrier_category&&(n.hasOwnProperty(s)||(n[s]={}),1===i.barriers?n[s][r]={count:1,barrier:i.barrier,barrier_category:i.barrier_category}:2===i.barriers&&(n[s][r]={count:2,barrier:i.high_barrier,barrier1:i.low_barrier,barrier_category:i.barrier_category})),e[r]||(e[r]={});var c=i.contract_type;e[r].hasOwnProperty(c)||(e[r][c]=a(i.contract_display))}}),t&&o&&n&&n[t]&&n[t].barrier_category!==o&&(n={})}},g=function(){var e=s.contracts().contracts_for,t={};return e?(e.available.forEach(function(e){var n=e.contract_category;n&&!t.hasOwnProperty(n)&&("callput"===n?"euro_atm"===e.barrier_category?t.risefall=a("Rise/Fall"):t.higherlower=a("Higher/Lower"):(t[n]=a(e.contract_category_display),"digits"===n&&(t.matchdiff=a("Matches/Differs"),"ID"!==r()&&(t.evenodd=a("Even/Odd"),t.overunder=a("Over/Under")))))}),o(t)?null:((t.risefall||t.higherlower)&&(t.updown=a("Up/Down")),(t.endsinout||t.staysinout)&&(t.inout=a("In/Out")),t)):null};return{details:m,contractForms:g,open:function(){return d},close:function(){return u},contracts:function(){return t},durations:function(){return c},startDates:function(){return l},barriers:function(){return n},contractType:function(){return e},form:function(){return p},barrier:function(){return f},setContracts:function(e){t=e}}}();e.exports=s},function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=n(305),a=n(338),o=n(345),s=n(346),c=n(348),l=n(310),d=n(319).localize,u=n(313).urlFor,p=n(309).isEmptyObject,f=n(325).formatMoney,h=n(326).toISOFormat,m=n(320).elementInnerHtml,g=n(320).elementTextContent,_=function(){var e=function(e,t,n){if(e&&t&&n){var r=document.getElementById(e),a=document.createDocumentFragment();if(m(r,""),t){for(var o=k(t),s=0;s<o.length;s++){var c=o[s],l=document.createElement("li");if(l.classList.add("tm-li"),0===s?l.classList.add("first"):s===o.length-1&&l.classList.add("last"),"object"===("undefined"==typeof c?"undefined":i(c))){for(var d=document.createDocumentFragment(),u=0,p="",f=0;f<c[1].length;f++){var h=c[1][f],g=document.createElement("li"),_=document.createElement("a"),v=document.createTextNode(t[h]);g.classList.add("tm-li-2"),0===f?(p=h.toLowerCase(),g.classList.add("first")):f===c[1].length-1&&g.classList.add("last"),n&&n===h.toLowerCase()&&(g.classList.add("active"),_.classList.add("a-active"),u=1),_.classList.add("tm-a-2"),_.appendChild(v),_.setAttribute("menuitem",h.toLowerCase()),_.setAttribute("id",h.toLowerCase()),g.appendChild(_),d.appendChild(g)}if(d.hasChildNodes()){var y=document.createElement("ul"),b=document.createElement("a"),w=document.createTextNode(t[c[0]]);b.appendChild(w),b.setAttribute("class","tm-a"),b.setAttribute("menuitem",p),y.appendChild(d),y.setAttribute("class","tm-ul-2"),y.setAttribute("id",c[0]+"-submenu"),u&&l.classList.add("active"),l.appendChild(b),l.appendChild(y)}}else{var x=document.createTextNode(t[c]),$=document.createElement("a");n&&n===c.toLowerCase()&&($.classList.add("a-active"),l.classList.add("active")),$.appendChild(x),$.classList.add("tm-a"),$.setAttribute("menuitem",c),$.setAttribute("id",c.toLowerCase()),l.appendChild($)}a.appendChild(l)}if(r){r.appendChild(a);for(var C=r.getElementsByClassName("tm-li"),I=0;I<C.length;I++){var S=C[I];S.addEventListener("mouseover",function(){this.classList.add("hover")}),S.addEventListener("mouseout",function(){this.classList.remove("hover")})}}}}},t=function(e,t,n){for(var i=document.getElementById(e),r=document.createDocumentFragment();i&&i.firstChild;)i.removeChild(i.firstChild);for(var s=Object.keys(t).sort(D),c=0;c<s.length;c++){var l=s[c],u=document.createTextNode(t[l].name),f=document.createElement("option");if(f.setAttribute("value",l),n&&n===l&&f.setAttribute("selected","selected"),f.appendChild(u),r.appendChild(f),t[l].submarkets&&!p(t[l].submarkets))for(var h=Object.keys(t[l].submarkets).sort(D),m=0;m<h.length;m++){var _=h[m];f=document.createElement("option"),f.setAttribute("value",_),n&&n===_&&f.setAttribute("selected","selected"),g(f,"    "+t[l].submarkets[_].name),r.appendChild(f)}}if(i){i.appendChild(r),i.selectedIndex<0&&(i.selectedIndex=0);var v=i.options[i.selectedIndex];n!==v.value&&a.set("market",v.value),v.disabled&&(o.show({text:d("All markets are closed now. Please try again later."),uid:"MARKETS_CLOSED"}),document.getElementById("trading_init_progress").style.display="none")}},n=function(e,t,n){var i=document.getElementById(e);if(i){for(;i.firstChild;)i.removeChild(i.firstChild);p(t)||i.appendChild(_(t,n))}},_=function(e,t){for(var n=document.createDocumentFragment(),i=Object.keys(e).sort(function(t,n){return e[t].display.localeCompare(e[n].display)}),r={},a=0;a<i.length;a++)r.hasOwnProperty(e[i[a]].submarket)||(r[e[i[a]].submarket]=[]),r[e[i[a]].submarket].push(i[a]);for(var o=Object.keys(r).sort(D),s=0;s<o.length;s++)for(var c=0;c<r[o[s]].length;c++){var l=r[o[s]][c],u=document.createElement("option"),p=document.createTextNode(d(e[l].display));u.setAttribute("value",l),t&&t===l&&u.setAttribute("selected","selected"),u.appendChild(p),n.appendChild(u)}return n},v=function(e){return{form_name:e&&!/(risefall|higherlower|callput)/.test(e)?/(overunder|evenodd|matchdiff)/.test(e)?"digits":e:"callput",barrier_category:e&&!/(risefall|callput)/.test(e)?/higherlower/.test(e)?"euro_non_atm":"":"euro_atm"}},y={CALL:"top",PUT:"bottom",CALLE:"top",PUTE:"bottom",ASIANU:"top",ASIAND:"bottom",DIGITMATCH:"top",DIGITDIFF:"bottom",DIGITEVEN:"top",DIGITODD:"bottom",DIGITOVER:"top",DIGITUNDER:"bottom",EXPIRYRANGEE:"top",EXPIRYMISSE:"bottom",EXPIRYRANGE:"top",EXPIRYMISS:"bottom",RANGE:"top",UPORDOWN:"bottom",ONETOUCH:"top",NOTOUCH:"bottom"},b=function(e){return e?y[e]:"top"},w=function(e,t){var n=document.getElementById(e);n&&(n.style.display=t)},x=function(){w("contract_confirmation_container","none"),w("contracts_list","flex"),$(".purchase_button").css("visibility","")},k=function(e){var t=[["updown",["risefall","higherlower"]],"touchnotouch",["inout",["endsinout","staysinout"]],"asian",["digits",["matchdiff","evenodd","overunder"]]];return e&&(t=t.map(function(t){return"object"===("undefined"==typeof t?"undefined":i(t))?(t[1]=t[1].filter(function(t){return e[t]}),t[1].length||(t="")):e[t]||(t=""),t}),t=t.filter(function(e){return e.length})),t},C=function(){for(var e=document.getElementsByClassName("purchase_button"),t=0;t<e.length;t++)e[t].setAttribute("data-display_value",""),e[t].setAttribute("data-payout","")},I=function(e,t){var n=document.getElementById(t),i=e.querySelectorAll(".active, .a-active"),r=n.classList,a=void 0,o=void 0;if(!r.contains("active")){for(a=0,o=i.length;a<o;a++)i[a].classList.remove("active"),i[a].classList.remove("a-active");r.add("a-active"),a=0;for(var s=n.parentElement;s&&s.id!==e.id&&a<10;)"LI"===s.tagName&&s.classList.add("active"),s=s.parentElement,a++}},S=function(e,t,n,i){if(e&&n&&i){var r=i-n,a=r/n*100,o=d("Net profit")+": "+f(t,r)+" | "+d("Return")+" "+a.toFixed(1)+"%";isNaN(r)||isNaN(a)?e.hide():(e.show(),g(e,o))}},E=function(e,t,n){var i=void 0,r=t||500;return function(){var t=this,a=arguments,o=function(){i=null,n||e.apply(t,a)},s=n&&!i;clearTimeout(i),i=setTimeout(o,r),s&&e.apply(t,a)}},T=function(){var e=a.get("market"),t=s.markets(1);if(!e||!t[e]){var n=Object.keys(s.markets()).filter(function(e){return t[e].is_active}).sort(function(e,t){return A(e)-A(t)});e=n[0]}return e},B={forex:1,volidx:2,indices:3,stocks:4,commodities:5},A=function(e){return B[e]||100},O=function(){document.getElementById("websocket_form").addEventListener("submit",function(e){return e.currentTarget.classList.add("submitted"),e.preventDefault(),!1},!1)},P=function(e){var t=e.ownerDocument.createElement("input");t.style.display="none",t.type="submit",e.appendChild(t).click(),e.removeChild(t)},L={t:1,s:2,m:3,h:4,d:5},q={forex:0,major_pairs:1,minor_pairs:2,smart_fx:3,indices:4,asia_oceania:5,europe_africa:6,americas:7,otc_index:8,stocks:9,au_otc_stock:10,ge_otc_stock:11,india_otc_stock:12,uk_otc_stock:13,us_otc_stock:14,commodities:15,metals:16,energy:17,volidx:18,random_index:19,random_daily:20,random_nightly:21},j=function(e){return q[e]},D=function(e,t){return j(e)>j(t)?1:j(e)<j(t)?-1:0},M=function(e,t){var n=document.getElementById("symbol_tip"),i=document.getElementById("guideBtn"),r=document.getElementById("androidApp"),a=document.getElementById("appstore"),o=document.getElementById("contract_markets").value;e&&t&&(e.match(/^volidx/)||t.match(/^R/)||e.match(/^random_index/)||e.match(/^random_daily/)?(i&&i.hide(),n.show(),n.setAttribute("target",u("/get-started/volidx-markets")),r.show(),a.show()):(r.hide(),a.hide(),n.hide(),i&&i.show()),(e.match(/^otc_index/)||t.match(/^OTC_/)||e.match(/stock/)||o.match(/stocks/))&&(n.show(),n.setAttribute("target",u("/get-started/otc-indices-stocks"))),(e.match(/^random_index/)||t.match(/^R_/))&&n.setAttribute("target",u("/get-started/volidx-markets","#volidx-indices")),(e.match(/^random_daily/)||t.match(/^RDB/)||t.match(/^RDMO/)||t.match(/^RDS/))&&n.setAttribute("target",u("/get-started/volidx-markets","#volidx-quotidians")),(e.match(/^smart_fx/)||t.match(/^WLD/))&&(n.show(),n.setAttribute("target",u("/get-started/smart-indices","#world-fx-indices"))))},R=function(e,t){for(var n=t.getElementsByTagName("option"),i=0,r=0;r<n.length;r++)if(n[r].value===e&&!n[r].hasAttribute("disabled")){i=1;break}return!!i&&(t.value=e,!0)},V={type:"line",lineColor:"#606060",fillColor:!1,spotColor:"#00f000",minSpotColor:"#f00000",maxSpotColor:"#0000f0",highlightSpotColor:"#ffff00",highlightLineColor:"#000000",spotRadius:1.25},N=void 0,F=function(){N=N||$("#trading_worm_chart");var e=Object.keys(c.spots()).sort(function(e,t){return e-t}).map(function(e){return c.spots()[e]});N&&"function"==typeof N.sparkline&&(N.sparkline(e,V),e.length?N.show():N.hide())},H=function(){a.remove("market","underlying","formname","date_start","time_start","expiry_type","expiry_date","expirt_time","duration_units","diration_value","amount","amount_type","currency","prediction"),location.reload()},z=function(e,t,n){e=1*String(e).replace(/,/g,""),t=1*String(t).replace(/,/g,""),$("#contract_purchase_heading").text(d(n));var i=document.getElementById("contract_purchase_payout"),r=document.getElementById("contract_purchase_cost"),a=document.getElementById("contract_purchase_profit"),o=l.get("currency");Y(r,d("Stake"),f(o,Math.abs(t),1)),Y(i,d("Payout"),f(o,e,1));var s=e>0;$("#contract_purchase_profit_value").attr("class",s?"profit":"loss"),Y(a,d(s?"Profit":"Loss"),f(o,s?Math.round(100*(e-t))/100:-Math.abs(t),1))},U=function(e,t){var n=document.getElementById("symbol_tip"),i=document.getElementById("contract_markets").value;e&&t&&(e.match(/^volidx/)||t.match(/^R/)||e.match(/^random_index/)||e.match(/^random_daily/)?(n.show(),n.setAttribute("target",u("/get-started/volidx-markets"))):n.hide(),(e.match(/^otc_index/)||t.match(/^OTC_/)||e.match(/stock/)||i.match(/stocks/))&&(n.show(),n.setAttribute("target",u("/get-started/otc-indices-stocks"))),(e.match(/^random_index/)||t.match(/^R_/))&&n.setAttribute("target",u("/get-started/volidx-markets","#volidx-indices")),(e.match(/^random_daily/)||t.match(/^RDB/)||t.match(/^RDMO/)||t.match(/^RDS/))&&n.setAttribute("target",u("/get-started/volidx-markets","#volidx-quotidians")),(e.match(/^smart_fx/)||t.match(/^WLD/))&&(n.show(),n.setAttribute("target",u("/get-started/smart-indices","#world-fx-indices"))))},Y=function(e,t,n,i){var r=l.get("currency");m(e,t);var a=document.getElementById(e.id+"_value");m(a,i?n:f(r,n)),a.setAttribute("value",String(n).replace(/,/g,""))},W=function(e){var t=document.getElementById("expiry_date").getAttribute("data-value"),n=document.getElementById("date_start").value,i=document.getElementById("expiry_time").value,a=$("#invalid-time");return e.attr("id")===$("#expiry_time")&&i&&!/^(0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$/.test(i)?(e.addClass("error-field"),0===a.length&&$("#expiry_type_endtime").parent().append($("<p>",{class:"error-msg",id:"invalid-time",text:d("Time is in the wrong format.")})),!1):(e.removeClass("error-field"),a.remove(),t=h(t?r(t):new r),n="now"===n?Math.floor(window.time._i/1e3):n,i=i||"23:59:59",r.utc(t+" "+i).unix()<=n?(e.addClass("error-field"),document.getElementById("end_time_validation")||$("#expiry_type_endtime").append($("<p/>",{class:"error-msg",id:"end_time_validation",text:d("End time must be after start time.")})),!1):(e.removeClass("error-field"),$("#end_time_validation").remove(),!0))};return{displayUnderlyings:n,generateUnderlyingOptions:_,getFormNameBarrierCategory:v,contractTypeDisplayMapping:b,showPriceOverlay:function(){w("loading_container2","block")},hidePriceOverlay:function(){w("loading_container2","none")},hideFormOverlay:function(){w("loading_container3","none")},showFormOverlay:function(){
w("loading_container3","block")},hideOverlayContainer:x,getContractCategoryTree:k,resetPriceMovement:C,toggleActiveCatMenuElement:I,displayCommentPrice:S,debounce:E,getDefaultMarket:T,addEventListenerForm:O,submitForm:P,durationOrder:function(e){return L[e]},displayTooltip:M,selectOption:R,updateWarmChart:F,reloadPage:H,displayContractForms:e,displayMarkets:t,updatePurchaseStatus_Beta:z,displayTooltip_Beta:U,labelValue:Y,timeIsValid:W,clean:function(){N=null}}}();e.exports=_},function(e,t){"use strict";var n=function(){var e=function(e){var n=r(),i=n.find("#"+e.uid);e.uid&&0!==i.length?i.html()!==e.text&&i.replaceWith(t(e)):n.prepend(t(e)),$.scrollTo(n,500,{offset:-5})},t=function(e){var t=$('<div class="notice-msg center-text'+(e.dismissible?" dismissible":"")+'"\n            '+(e.uid?' id="'+e.uid+'"':"")+">"+e.text+"\n                "+(e.dismissible?'<div class="notification-dismiss">x</div>':"")+"\n            </div>");return e.dismissible&&t.click(function(){i(this)}),t},n=function(e){e&&r().find("#"+e).remove()},i=function(e){$(e).remove()},r=function(){return $("#notifications_wrapper")};return{show:e,hide:n}}();e.exports=n},function(e,t,n){"use strict";var i=n(347),r=function(){var e={},t={},n={},r={},a=function(a){var o=a.active_symbols;e=i.getMarkets(o),t=i.getMarketsList(o),n=i.getTradeUnderlyings(o),r=i.getSymbolNames(o)};return{details:a,markets:function(n){return n?t:e},underlyings:function(){return n},getName:function(e){return r[e]},getAllSymbols:function(){return r}}}();e.exports=r},function(e,t,n){"use strict";var i=n(309).isEmptyObject,r=function(){var e=function(e,t){return e.reduce(function(e,n){return(e[n[t]]=e[n[t]]||[]).push(n),e},{})},t=function(e,t){return e&&t?(Object.keys(t).forEach(function(n){e[n]=t[n]}),e):null},n=function(e){return t({},e)},r={},a={},o={},s=function(t){if(!i(r))return n(r);var a=e(t,"market");return Object.keys(a).forEach(function(e){var t=e,n=a[e],i=n[0];r[t]={name:i.market_display_name,is_active:!i.is_trading_suspended&&i.exchange_is_open},l(n,r[t])}),n(r)},c=function(){r={},o={},a={}},l=function(t,r){if(!i(r.submarkets))return n(r.submarkets);r.submarkets={};var a=e(t,"submarket");return Object.keys(a).forEach(function(e){var t=e,n=a[e],i=n[0];r.submarkets[t]={name:i.submarket_display_name,is_active:!i.is_trading_suspended&&i.exchange_is_open},d(n,r.submarkets[t])}),n(r.submarkets)},d=function(e,t){return i(t.symbols)&&(t.symbols={},e.forEach(function(e){t.symbols[e.symbol]={display:e.display_name,symbol_type:e.symbol_type,is_active:!e.is_trading_suspended&&e.exchange_is_open,pip:e.pip,market:e.market,submarket:e.submarket}})),n(t.symbols)},u=function(e){if(i(a)){var r=s(e);Object.keys(r).forEach(function(n){var i=r[n],o=l(e,i);t(a,o)})}return n(a)},p=function(e){if(i(o)){var r=u(e);Object.keys(r).forEach(function(n){var i=r[n],a=d(e,i);t(o,a)})}return n(o)},f=function(e){var n={};return t(n,s(e)),t(n,u(e)),n},h=function(e){var t={},n=p(e);return Object.keys(n).forEach(function(e){var i=n[e];t[i.market]||(t[i.market]={}),t[i.submarket]||(t[i.submarket]={}),t[i.market][e]=i,t[i.submarket][e]=i}),t},m=function(e){var t=n(p(e));return Object.keys(t).forEach(function(e){t[e]=t[e].display}),t};return{getMarkets:s,getSubmarkets:u,getMarketsList:f,getTradeUnderlyings:h,getSymbolNames:m,clearData:c,getSymbols:p}}();e.exports=r},function(e,t,n){"use strict";var i=n(305),r=n(342).countDecimalPlaces,a=n(342).displayPriceMovement,o=n(320).elementTextContent,s=n(320).isVisible,c=function(){var e="",t="",n="",l={},d="",u=function(i){if(d="",i)if(i.error)d=i.error.message;else{var r=i.tick;e=r.quote,t=r.id,n=r.epoch,l[n]=e;var a=Object.keys(l).sort(function(e,t){return e-t});a.length>20&&delete l[a[0]]}},p=function(){$("#spot").fadeIn(200);var t=document.getElementById("spot");if(t){var n="";n=d?d:e,parseFloat(n)!==+n?t.className="error":(t.classList.remove("error"),a(t,o(t),n),f()),o(t,n)}},f=function(){var e=c.quote(),t=document.getElementById("duration_units"),n=document.getElementById("indicative_barrier_tooltip"),a=document.getElementById("indicative_high_barrier_tooltip"),l=document.getElementById("indicative_low_barrier_tooltip"),d=document.getElementById("barrier"),u=document.getElementById("barrier_high"),p=document.getElementById("barrier_low"),f=document.getElementById("barrier_tooltip"),h=document.getElementById("barrier_span"),m=document.getElementById("barrier_high_tooltip"),g=document.getElementById("barrier_high_span"),_=document.getElementById("barrier_low_tooltip"),v=document.getElementById("barrier_low_span"),y=void 0,b=document.getElementById("expiry_date");if(!t||s(t)&&"d"===t.value||!e||isNaN(e)||!b||s(b)&&!i(b.getAttribute("data-value")).isBefore(i().add(1,"day"),"day"))o(n,""),o(a,""),o(l,"");else{var w=r(e);if(n&&s(n)&&String(d.value).match(/^[+-]/)){var x=isNaN(parseFloat(d.value))?0:parseFloat(d.value);n.textContent=(parseFloat(e)+x).toFixed(w),f.style.display="inherit",h.style.display="none"}else o(n,""),f.style.display="none",h.style.display="inherit";a&&s(a)&&String(u.value).match(/^[+-]/)?(y=parseFloat(u.value),y=isNaN(y)?0:y,a.textContent=(parseFloat(e)+y).toFixed(w),m.style.display="inherit",g.style.display="none"):(o(a,""),m.style.display="none",g.style.display="inherit"),l&&s(l)&&String(p.value).match(/^[+-]/)?(y=parseFloat(p.value),y=isNaN(y)?0:y,l.textContent=(parseFloat(e)+y).toFixed(w),_.style.display="inherit",v.style.display="none"):(o(l,""),_.style.display="none",v.style.display="inherit")}},h=function(){l={},e="",$("#spot").fadeOut(200,function(){$(this).removeClass("price_moved_down price_moved_up").text("")})};return{details:u,display:p,clean:h,quote:function(){return e},id:function(){return t},epoch:function(){return n},errorMessage:function(){return d},spots:function(){return l},setQuote:function(t){e=t}}}();e.exports=c},function(e,t,n){"use strict";var i=n(305),r=n(350),a=n(342).countDecimalPlaces,o=n(338),s=n(348),c=n(320).elementTextContent,l=n(320).isVisible,d=function(){var e=!1,t=function(){var e=r.barriers()[o.get("underlying")],t=r.form();if(e&&t&&"risefall"!==o.get("formname")){var n=e[t];if(n){var u=document.getElementById("duration_units"),p=document.getElementById("expiry_date"),f=s.quote(),h=a(f),m=document.getElementById("indicative_barrier_tooltip"),g=document.getElementById("indicative_high_barrier_tooltip"),_=document.getElementById("indicative_low_barrier_tooltip");if(1===n.count){document.getElementById("high_barrier_row").style.display="none",document.getElementById("low_barrier_row").style.display="none",document.getElementById("barrier_row").setAttribute("style","");var v=o.get("barrier"),y=document.getElementById("barrier"),b=document.getElementById("barrier_tooltip"),w=document.getElementById("barrier_span"),x=v&&!isNaN(v)?v:n.barrier,$=void 0;return u&&l(u)&&"d"===u.value||p&&l(p)&&i(p.getAttribute("data-value")).isAfter(i(),"day")||!String(n.barrier).match(/^[+-]/)?($=f&&!isNaN(f)&&String(x).match(/^[+-]/)?(parseFloat(f)+parseFloat(x)).toFixed(h):parseFloat(x),b.style.display="none",w.style.display="inherit",c(m,"")):(String(x).match(/^[+-]/)||(x=n.barrier),$=x,w.style.display="none",b.style.display="inherit",f&&!isNaN(f)?c(m,(parseFloat(f)+parseFloat(x)).toFixed(h)):c(m,"")),y.value=y.textContent=$,o.set("barrier",y.value),o.remove("barrier_high","barrier_low"),void d.validateBarrier()}if(2===n.count){document.getElementById("barrier_row").style.display="none",document.getElementById("high_barrier_row").setAttribute("style",""),document.getElementById("low_barrier_row").setAttribute("style","");var k=document.getElementById("barrier_high"),C=document.getElementById("barrier_low"),I=document.getElementById("barrier_high_tooltip"),S=document.getElementById("barrier_high_span"),E=document.getElementById("barrier_low_tooltip"),T=document.getElementById("barrier_low_span"),B=o.get("barrier_high"),A=o.get("barrier_low"),O=B&&!isNaN(B)?B:n.barrier,P=A&&!isNaN(A)?A:n.barrier1,L=void 0,q=void 0;return u&&l(u)&&"d"===u.value||p&&l(p)&&i(p.getAttribute("data-value")).isAfter(i(),"day")||!String(n.barrier).match(/^[+-]/)?(f&&!isNaN(f)&&String(O).match(/^[+-]/)?(L=(parseFloat(f)+parseFloat(O)).toFixed(h),q=(parseFloat(f)+parseFloat(P)).toFixed(h)):(L=parseFloat(O),q=parseFloat(P)),I.style.display="none",S.style.display="inherit",E.style.display="none",T.style.display="inherit",c(g,""),c(_,"")):(String(O).match(/^[+-]/)&&String(P).match(/^[+-]/)||(O=n.barrier,P=n.barrier1),L=O,q=P,S.style.display="none",I.style.display="inherit",T.style.display="none",E.style.display="inherit",f&&!isNaN(f)?(c(g,(parseFloat(f)+parseFloat(O)).toFixed(h)),c(_,(parseFloat(f)+parseFloat(P)).toFixed(h))):(c(g,""),c(_,""))),k.value=k.textContent=L,C.value=C.textContent=q,o.set("barrier_high",k.value),o.set("barrier_low",C.value),void o.remove("barrier")}}}for(var j=document.getElementsByClassName("barrier_class"),D=0;D<j.length;D++)j[D].style.display="none";o.remove("barrier","barrier_high","barrier_low")},n=function(){var e=document.getElementById("barrier");l(e)&&(isNaN(parseFloat(e.value))||0===parseFloat(e.value))?e.classList.add("error-field"):e.classList.remove("error-field")};return{display:t,validateBarrier:n,isBarrierUpdated:function(){return e},setBarrierUpdate:function(t){e=t}}}();e.exports=d},function(e,t,n){"use strict";var i=n(344).getFormNameBarrierCategory,r=n(314).get,a=n(319).localize,o=n(309).isEmptyObject,s=function(){var e={},t={},n={},c={},l={},d=void 0,u=void 0,p=void 0,f=void 0,h=function(e){var t=e.contract_category,i=e.expiry_type,r=e.barrier_category,a=e.start_type,o=e.max_contract_duration,s=e.min_contract_duration;n[i]||(n[i]={}),n[i][t]||(n[i][t]={}),n[i][t][r]||(n[i][t][r]={}),n[i][t][r][a]||(n[i][t][r][a]={}),n[i][t][r][a].max_contract_duration=o,n[i][t][r][a].min_contract_duration=s},m=function(t){var r=s.contracts().contracts_for,o=void 0;if(r){c={has_spot:0,list:[]},n={},d=r.open,u=r.close;var m=i(t);p=t=m.form_name,f=o=m.barrier_category,r.available.forEach(function(n){var i=n.contract_category;if(t&&t===i){o?o===n.barrier_category&&h(n):h(n),n.forward_starting_options&&"forward"===n.start_type&&"higherlower"!==sessionStorage.formname?c.list=n.forward_starting_options:"spot"===n.start_type&&(c.has_spot=1);var r=n.underlying_symbol;n.barrier_category&&"non_financial"!==n.barrier_category&&(l.hasOwnProperty(r)||(l[r]={}),1===n.barriers?l[r][i]={count:1,barrier:n.barrier,barrier_category:n.barrier_category}:2===n.barriers&&(l[r][i]={count:2,barrier:n.high_barrier,barrier1:n.low_barrier,barrier_category:n.barrier_category})),e[i]||(e[i]={}),e[i].hasOwnProperty(n.contract_type)||(e[i][n.contract_type]=a(n.contract_display))}}),t&&o&&l&&l[t]&&l[t].barrier_category!==o&&(l={})}},g=function(){var e=s.contracts().contracts_for,t={};return e?(e.available.forEach(function(e){var n=e.contract_category;n&&!t.hasOwnProperty(n)&&("callput"===n?"euro_atm"===e.barrier_category?t.risefall=a("Rise/Fall"):t.higherlower=a("Higher/Lower"):(t[n]=a(e.contract_category_display),"digits"===n&&(t.matchdiff=a("Matches/Differs"),"ID"!==r()&&(t.evenodd=a("Even/Odd"),t.overunder=a("Over/Under")))))}),o(t)?null:((t.risefall||t.higherlower)&&(t.updown=a("Up/Down")),(t.endsinout||t.staysinout)&&(t.inout=a("In/Out")),t)):null};return{details:m,contractForms:g,open:function(){return d},close:function(){return u},contracts:function(){return t},durations:function(){return n},startDates:function(){return c},barriers:function(){return l},contractType:function(){return e},form:function(){return p},barrier:function(){return f},setContracts:function(e){t=e}}}();e.exports=s},function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=n(346),a=n(318),o=n(319).localize,s=n(309).template,c=n(320).requireHighstock,l=function(){var e=[],t=null,n=void 0,l=-1,d=-1,u={chart:{renderTo:"last_digit_histo",defaultSeriesType:"column",backgroundColor:"#eee",borderWidth:1,borderColor:"#ccc",plotBackgroundColor:"#fff",plotBorderWidth:1,plotBorderColor:"#ccc",height:250},title:{text:""},credits:{enabled:!1},exporting:{enabled:!1},legend:{enabled:!1},tooltip:{borderWidth:1,formatter:function(){var e=$("#tick_count").val(),t=this.y/e*100;return"<strong>"+o("Digit")+":</strong> "+this.x+"<br/><strong>"+o("Percentage")+":</strong> "+t.toFixed(1)+"%"}},plotOptions:{column:{shadow:!1,borderWidth:.5,borderColor:"#666",pointPadding:0,groupPadding:0,color:"#e1f0fb"},series:{dataLabels:{enabled:!0,allowOverlap:!0,style:{textShadow:!1,fontSize:"10px"},formatter:function(){var e=$("#tick_count").val(),t=this.point.y/e*100;return t.toFixed(2)+"%"}}}},xAxis:{categories:["0","1","2","3","4","5","6","7","8","9"],lineWidth:0,lineColor:"#999",tickLength:10,tickColor:"#ccc"},yAxis:{title:{text:""},maxPadding:0,gridLineColor:"#e9e9e9",tickWidth:1,tickLength:3,tickColor:"#ccc",lineColor:"#ccc",endOnTick:!0,opposite:!1,labels:{align:"left",x:0,enabled:!1,formatter:function(){var e=$("#tick_count").val(),t=parseInt(this.value/e*100);return t+"%"}}}},p=function(e){var t=document.domain.split(".").slice(-2).join("."),n=r.getAllSymbols(),i=[];Object.keys(n).forEach(function(e){/^(R_|RD)/.test(e)&&i.push(e)}),i=i.sort();for(var a="",s=0;s<i.length;s++)a+='<option value="'+i[s]+'">'+o(n[i[s]])+"</option>";$("#digit_underlying").html($(a)).val(e),$("#digit_domain").text(t.charAt(0).toUpperCase()+t.slice(1)),$("#digit_info_underlying").text($("#digit_underlying option:selected").text())},f=function(){var e=function(){var e=$("#digit_underlying option:selected"),i=e.val(),r=$("#tick_count").val();$("#digit_info_underlying").text(e.text()),$("#digit_info_count").text(r);var o={ticks_history:i,end:"latest",count:r};n.series[0].name!==i&&($("#underlying").find("option:selected").val()!==$("#digit_underlying").val()&&(o.subscribe=1,o.style="ticks"),null!==t&&(a.send({forget:t}),t=null)),a.send(o,{callback:function(e){var t=e.msg_type;"tick"===t?g(e):"history"===t&&h(e.echo_req.ticks_history,e.history.prices)}})};$("#digit_underlying, #tick_count").off("change").on("change",e)},h=function(i,r){c(function(a){if("undefined"==typeof r||r.length<=0)return void console.log("Unexpected error occured in the charts.");for(var o=r[0].split(".")[1].length,c=0;c<r.length;c++){var l=parseFloat(r[c]).toFixed(o);r[c]=l.substr(l.length-1)}var d=function(){return{text:s($("#last_digit_title").html(),[r.length,$("#digit_underlying option:selected").text()])}};e=r,n&&$("#last_digit_histo").html()?(n.xAxis[0].update({title:d()},!0),n.series[0].name=i):(p(i),u.xAxis.title=d(),n=new a.Chart(u),n.addSeries({name:i,data:[]}),f(),t=null),m()})},m=function(t,r){if("undefined"==typeof n)return null;var a=n.series[0];a.name!==t&&(r=void 0),"undefined"!=typeof r&&(e.unshift(r.slice(-1)),e.pop());for(var o=[],s=function(e){return+e===u},c=[],u=10;u--;){var p=e.filter(s).length;o[u]=p,"undefined"==typeof c[p]&&(c[p]=0),c[p]++}var f=Math.min.apply(null,o),h=Math.max.apply(null,o),m=o.indexOf(f),g=o.indexOf(h);return c[f]>=1&&(o[m]={y:f,color:"#CC0000"},l===-1?l=m:l!==m&&("object"===i(o[l])?o[l]={y:o[l].y,color:"#e1f0fb"}:o[l]={y:o[l],color:"#e1f0fb"},l=m)),c[h]>=1&&(o[g]={y:h,color:"#2E8836"},d===-1?d=g:d!==g&&("object"===i(o[d])?o[d]={y:o[d].y,color:"#e1f0fb"}:o[d]={y:o[d],color:"#e1f0fb"},d=g)),a.setData(o)},g=function(e){t?n.series[0].name===e.tick.symbol?(t=e.tick.id||null,m(e.tick.symbol,e.tick.quote)):a.send({forget:e.tick.id.toString()}):m(e.tick.symbol,e.tick.quote)};return{showChart:h,updateChart:g}}();e.exports=l},function(e,t,n){"use strict";var i=n(350),r=n(353),a=n(344),o=n(346),s=n(348),c=n(310),l=n(319).localize,d=n(320).elementInnerHtml,u=n(320).elementTextContent,p=n(320).isVisible,f=n(325).formatMoney,h=n(326).toTitleCase,m=function(){var e={},t=function(t){e=t;var n=t.buy,p=t.echo_req.passthrough,m=document.getElementById("contract_confirmation_container"),g=document.getElementById("confirmation_message"),_=document.getElementById("contract_purchase_heading"),v=document.getElementById("contract_purchase_descr"),y=document.getElementById("contract_purchase_barrier"),b=document.getElementById("tick_chart"),w=document.getElementById("contract_purchase_brief"),x=document.getElementById("contract_purchase_balance"),k=document.getElementById("contract_purchase_payout"),C=document.getElementById("contract_purchase_cost"),I=document.getElementById("contract_purchase_spots"),S=document.getElementById("confirmation_error"),E=document.getElementById("confirmation_error_contents"),T=document.getElementById("contracts_list"),B=document.getElementById("contract_purchase_button"),A=t.error,O=!A&&p.duration<=10&&"t"===p.duration_unit&&("risefall"===sessionStorage.formname||"higherlower"===sessionStorage.formname||"asian"===sessionStorage.formname);if(T.style.display="none",A)m.style.display="block",g.hide(),S.show(),d(E,A.message);else{var P=document.getElementById("guideBtn");P&&(P.style.display="none"),m.style.display="block",g.show(),S.hide(),$("#contract-values").find("td").each(function(){$(this).text("").removeAttr("class","")});var L=e.echo_req.passthrough;u(w,$("#underlying").find("option:selected").text()+" / "+h(i.contractType()[i.form()][L.contract_type])+("digits"!==i.form()||/(even|odd)/i.test(L.contract_type)?"":" "+L.barrier)),u(_,l("Contract Confirmation")),u(v,n.longcode),y&&a.labelValue(y,"","",!0),[].forEach.call(document.getElementsByClassName("contract_purchase_reference"),function(e){u(e,l("Ref.")+" "+n.transaction_id)});var q=void 0,j=void 0;"payout"===p.basis?(q=p.amount,j=p["ask-price"]):(j=p.amount,q=n.payout),b.hide(),I.hide();var D=c.get("currency");a.labelValue(k,l("Payout"),f(D,q,1)),a.labelValue(C,l("Stake"),f(D,j,1)),u(x,l("Account balance:")+" "+f(D,n.balance_after)),O&&b.show(),"digits"===i.form()&&([].forEach.call(I.childNodes,function(e){d(e,"&nbsp;")}),I.show()),"digits"===i.form()||O?(v.hide(),B.hide(),$("#confirmation_message").find(".open_contract_details").setVisibility(0)):(B.setAttribute("contract_id",n.contract_id),v.show(),B.show(),$("#confirmation_message").find(".open_contract_details").attr("contract_id",n.contract_id).setVisibility(1))}if(O){var M=void 0;M="CALL"===p.contract_type||"ASIANU"===p.contract_type?"up":"down";var R=2,V=s.spots(),N=Object.keys(V);if(N.length>0){var F=V[N[0]].toString();F.indexOf(".")!==-1&&(R=F.split(".")[1].length)}var H=void 0;"higherlower"===sessionStorage.getItem("formname")&&(H=p.barrier),r.init({symbol:p.symbol,barrier:H,number_of_ticks:p.duration,previous_tick_epoch:n.start_time,contract_category:"asian"===sessionStorage.getItem("formname")?"asian":"callput",display_symbol:o.getName(p.symbol),contract_start:n.start_time,display_decimals:R,contract_sentiment:M,price:p["ask-price"],payout:n.payout,show_contract_result:1,width:$("#tick_chart").width(),is_trading_page:!0}),r.resetSpots()}},n=function(){if(!$("#contract_purchase_spots:hidden").length){var t=e.echo_req&&e.echo_req.passthrough?e.echo_req.passthrough.duration:null;if(t){var n=document.getElementById("contract_purchase_spots"),i=document.getElementById("current_tick_number"),r=document.getElementById("current_tick_spot"),o=document.getElementById("last_digits_list");n&&(i.innerHTML=r.innerHTML=o.innerHTML="&nbsp;");for(var c=1;c<=t;c++){var f=document.createElement("div");f.classList.add("gr-grow");var h=document.createElement("div");h.classList.add("digit"),h.id="tick_digit_"+c,d(h,"&nbsp;"),f.appendChild(h);var m=document.createElement("div");m.classList.add("number"),d(m,c),f.appendChild(m),o.appendChild(f)}for(var g=s.spots(),_=Object.keys(g).sort(function(e,t){return e-t}),v=0,y=function(t){var n=e.echo_req.passthrough.contract_type,i=e.echo_req.passthrough.barrier;return"DIGITMATCH"===n&&t===i||"DIGITDIFF"===n&&t!==i||"DIGITEVEN"===n&&t%2===0||"DIGITODD"===n&&t%2||"DIGITOVER"===n&&t>i||"DIGITUNDER"===n&&t<i},b=null,w=function(e){return b=e,'<span class="'+(y(e)?"profit":"loss")+'">'+e+"</span>"},x=0;x<_.length;x++){var k={epoch:_[x],quote:g[_[x]]};if(p(n)&&k.epoch&&k.epoch>e.buy.start_time){v++,u(i,l("Tick")+" "+v),d(r,k.quote.replace(/\d$/,w));var C=document.getElementById("tick_digit_"+v);if(C.classList.add(y(b)?"profit":"loss"),u(C,b),b&&1===t){var I=void 0,S=void 0,E=void 0;y(b)?(S=$("#contract_purchase_payout_value").attr("value"),E=$("#contract_purchase_cost_value").attr("value"),I=l("This contract won")):(S=0,E=-$("#contract_purchase_cost_value").attr("value"),I=l("This contract lost")),a.updatePurchaseStatus_Beta(S,E,I)}t--,t||(e.echo_req.passthrough.duration=0)}}}}};return{display:t,updateSpotList:n}}();e.exports=m},function(e,t,n){"use strict";var i=n(305),r=n(344),a=n(348),o=n(318),s=n(354),c=n(319).localize,l=n(320).isVisible,d=n(320).requireHighstock,u=function(){var e=void 0,t=void 0,n=void 0,u=void 0,p=void 0,f=void 0,h=void 0,m=void 0,g=void 0,_=void 0,v=void 0,y=void 0,b=void 0,w=void 0,x=void 0,k=void 0,C=void 0,I=void 0,S=void 0,E=void 0,T=void 0,B=void 0,A=void 0,O=void 0,P=void 0,L=void 0,q=void 0,j=void 0,D=void 0,M=void 0,R=void 0,V=void 0,N=void 0,F=function(i){e=parseInt(i.number_of_ticks),t=i.display_symbol,n=parseInt(1e3*i.contract_start),u=i.contract_category,p=!u.match("digits"),f=i.barrier,h=i.abs_barrier,m=i.display_decimals||2,g=i.show_contract_result,_=i.is_trading_page,v=i.contract_sentiment,i.show_contract_result&&(y=parseFloat(i.price),b=parseFloat(i.payout));var r=i.show_contract_result;H(),z({plot_from:1e3*i.previous_tick_epoch,plot_to:new Date(1e3*(parseInt(i.contract_start)+parseInt(5*(e+2)))).getTime(),minimize:r,width:i.width?i.width:void 0}),C.wrap(C.Tooltip.prototype,"hide",function(e){var t=this.chart.options.tooltip;e.apply(this,Array.prototype.slice.call(arguments,1)),!this.isHidden&&t.events&&t.events.hide&&t.events.hide()}),C.wrap(C.Tooltip.prototype,"refresh",function(e){var t=this.chart.options.tooltip;e.apply(this,Array.prototype.slice.call(arguments,1)),t.events&&t.events.show&&t.events.show(this.chart.hoverPoints)})},H=function(){var t=e-1;u.match("asian")?(w=e,x={_0:{label:"Entry Spot",id:"start_tick"}},x["_"+t]={label:"Exit Spot",id:"exit_tick"}):u.match("callput")?(w=e+1,x={_0:{label:"Entry Spot",id:"entry_tick"}},x["_"+e]={label:"Exit Spot",id:"exit_tick"}):u.match("digits")?(w=e,x={_0:{label:"Tick 1",id:"start_tick"}},x["_"+t]={label:"Tick "+e,id:"last_tick"}):x={}},z=function(e){var n=u.match("digits|asian"),r={chart:{type:"line",renderTo:"tick_chart",width:e.width?e.width:e.minimize?394:null,height:e.minimize?120:null,backgroundColor:null,events:{load:K(e.plot_from,e.plot_to)},marginLeft:20},credits:{enabled:!1},tooltip:{formatter:function(){var e=this.y.toFixed(m),n=i.utc(1e3*I[this.x].epoch).format("dddd, MMM D, HH:mm:ss");return n+"<br/>"+t+" "+e},crosshairs:[!0]},xAxis:{type:"linear",min:0,max:w-.5,tickInterval:1,showFirstLabel:!!n,labels:{autoRotation:!1,formatter:function(){return this.value+(n?1:0)}},crosshair:{color:"#E98024",zIndex:1},title:{text:c("Tick")}},yAxis:{opposite:!1,title:"",labels:{align:"left",x:0}},series:[{data:[]}],title:"",exporting:{enabled:!1,enableImages:!1},legend:{enabled:!1}},a=function(e,t,n){$("#contract_purchase_profit_list").find("#chart-values").css("display","flex").end().find("#contract-values").css("display","none"),$("#chart_values_tick_value").text(e),$("#chart_values_time_value").text(t),$("#chart_values_price_value").text(n)};_&&$.extend(!0,r,{chart:{marginBottom:25},tooltip:{style:{display:"none"},formatter:function(){var e=i.utc(1e3*I[this.x].epoch).format("HH:mm:ss"),t=this.y;a(+this.x+(n?1:0),e,t)},events:{hide:function(){$("#contract_purchase_profit_list").find("#chart-values").hide().end().find(" #contract-values").show()}}},xAxis:{title:{text:""},crosshair:{width:30},tickWidth:0},yAxis:{gridLineWidth:0,labels:{enabled:!1}},series:[{color:"#2a3052",lineWidth:1}]}),k=new C.Chart(r),C.setOptions({lang:{thousandsSep:","}})},U=function(e){if(g){var t=$("#tick_chart");"up"===v?e.quote>S?t.css("background-color","rgba(46,136,54,0.198039)"):t.css("background-color","rgba(204,0,0,0.098039)"):"down"===v&&(e.quote<S?t.css("background-color","rgba(46,136,54,0.198039)"):t.css("background-color","rgba(204,0,0,0.098039)"))}},Y=function(){if(p){var e=u.match("asian")?"asian":"static",t=_?"#6b8fb9":"green",n=_?1:2;if("static"===e){var i=I[0];if(f){var a=i.quote+parseFloat(f);a=Number(Math.round(a+"e"+m)+"e-"+m),i.quote=a}else h&&(i.quote=parseFloat(h));k.yAxis[0].addPlotLine({id:"tick-barrier",value:i.quote,color:t,width:n,zIndex:2,label:{text:_?"":"Barrier ("+i.quote+")",align:"center"}}),S=i.quote,p=!1}if("asian"===e){for(var o=0,s=0;s<I.length;s++)o+=parseFloat(I[s].quote);var l=o/I.length;l=l.toFixed(parseInt(m)+1),k.yAxis[0].removePlotLine("tick-barrier"),k.yAxis[0].addPlotLine({id:"tick-barrier",value:l,color:t,width:n,zIndex:2,label:{text:_?"":"Average ("+l+")",align:"center"}}),S=l}var d=document.getElementById("contract_purchase_barrier");S&&d&&r.labelValue(d,c("Barrier"),S,!0)}},W=function(e){k.xAxis[0].addPlotLine({value:e.index,id:e.id,label:{text:e.label,x:/start_tick|entry_tick/.test(e.id)?-15:5},color:"#e98024",width:2,zIndex:2})},G=function(){if(S){var e=I.length-1,t=I[e].quote;"up"===v?t>S?J():X():"down"===v&&(t<S?J():X())}},J=function(){var e=b-y;Q(b,e,c("This contract won"))},X=function(){Q(0,-y,c("This contract lost"))},K=function(){E=i(n).utc(),T=0,I=[]},Q=function(e,t,n){r.updatePurchaseStatus_Beta(e,e-t,n)},Z=function(e){var t=document.getElementById("tick_chart");if(t&&l(t)&&e&&(e.tick||e.history)){V&&e.tick&&document.getElementById("sell_content_wrapper")&&(N=e.tick.id,s.storeSubscriptionID(N));var n=void 0,i=void 0,r=void 0;if(document.getElementById("sell_content_wrapper")&&(e.tick&&document.getElementById("sell_content_wrapper")?(a.details(e),r||(r=e.tick.quote.split(".")[1].length||2)):e.history&&document.getElementById("sell_content_wrapper")&&(r||(r=e.history.prices[0].split(".")[1].length||2)),R&&""!==R||(F({symbol:A,number_of_ticks:O,contract_category:/asian/i.test(D)?"asian":/digit/i.test(D)?"digits":"callput",longcode:P,display_symbol:L,contract_start:q,abs_barrier:j,display_decimals:r,contract_sentiment:"CALL"===M||"ASIANU"===M?"up":"down",show_contract_result:0}),B={},R="initialized")),e.tick?(i=a.spots(),n=Object.keys(i).sort(function(e,t){return e-t})):e.history&&(n=e.history.times),I&&w&&I.length>=w)G(),N&&o.send({forget:N});else{for(var c=0;c<n.length;c++){var d=void 0;if(e.tick?d={epoch:parseInt(n[c]),quote:parseFloat(i[n[c]])}:e.history&&(d={epoch:parseInt(e.history.times[c]),quote:parseFloat(e.history.prices[c])}),d.epoch>E.unix()&&!B[d.epoch]){if(!k||!k.series)return;k.series[0].addPoint([T,d.quote],!0,!1),I.push(d),B[d.epoch]=d.quote;var u="_"+T;"undefined"!=typeof x[u]&&(x[u].index=T,W(x[u])),Y(),U(d),T++}}if(_){var p="up"===v,f=k.yAxis[0].getExtremes().min,h=k.yAxis[0].getExtremes().max;k.yAxis[0].removePlotBand("win-area"),k.yAxis[0].addPlotBand({id:"win-area",from:p?S:f,to:p?h:S,color:"#f5f8fb"}),k.yAxis[0].removePlotBand("lose-area"),k.yAxis[0].addPlotBand({id:"lose-area",from:p?f:S,to:p?S:h,color:"#ffffff"})}}}},ee=function(e,t){d(function(n){if(C=n,V="false",t){A=t.underlying,O=t.tick_count,P=t.longcode,L=t.display_name,q=t.date_start,j=t.barrier,D=t.shortcode,M=t.contract_type,R="";var i={ticks_history:t.underlying,start:t.date_start,end:"latest"};t.current_spot_time<t.date_expiry?(i.subscribe=1,V="true"):i.end=t.date_expiry,o.send(i,{callback:Z})}else Z(e)})};return{init:F,updateChart:ee,resetSpots:function(){B={}}}}();e.exports=u},function(e,t,n){"use strict";var i=n(318),r=n(309).getHighestZIndex,a=function(){var e=void 0,t=void 0,n=void 0,a=void 0,o=function(){e=null},s=function(t){if(t&&(e&&e.remove(),e=null),!e){var n=$('<div class="inpage_popup_container" id="sell_popup_container"><a class="close"></a><div class="inpage_popup_content"></div></div>');n.hide();var i=function e(){c(),$(document).off("keydown"),$(window).off("popstate",e)};n.find("a.close").on("click",i),$(document).on("keydown",function(e){27===e.which&&i()}),$(window).on("popstate",i),e=n}return e},c=function(){l(),d(),u(),p(),o(),"function"==typeof a&&a(),$(window).off("resize",function(){_()})},l=function(){for(;t&&t.length>0;){var e=t.pop();e&&e.length>0&&i.send({forget:e})}},d=function(){for(;n&&n.length>0;){var e=n.pop();e&&e.length>0&&i.send({forget:e})}},u=function(){window.ViewPopupTimerInterval&&(clearInterval(window.ViewPopupTimerInterval),window.ViewPopupTimerInterval=void 0)},p=function(){e&&(e.hide().remove(),$(".popup_page_overlay").hide().remove(),e=null),$("html").removeClass("no-scroll")},f=function(e){$(".open_contract_details[disabled]").each(function(){h($(this))}),e.attr("disabled","disabled"),e.fadeTo(0,.5)},h=function(e){e.removeAttr("disabled"),e.fadeTo(0,1)},m=function(e,t,n){var i=s(!0);t&&i.addClass(t),e&&$(".inpage_popup_content",i).html(e);var a=$(document.body);return i.css("position","fixed").css("z-index",r()+100),a.append(i),i.show(),$(document.body).append($("<div/>",{class:"popup_page_overlay"})),$(".popup_page_overlay").click(function(){s().find("a.close").click()}),i.draggable({stop:function(){g()},handle:n,scroll:!1}),_(),$(window).resize(function(){_()}),i},g=function(){var e=s(),t=e.offset(),n=$(window);t.top<n.scrollTop()&&e.offset({top:n.scrollTop()}),t.left<0&&e.offset({left:0}),t.left>n.width()-e.width()&&e.offset({left:n.width()-e.width()})},_=function(e,t){var n=s(),i=$(window),r=0,a=500;i.width()<767&&(r=0,a=0),void 0===e&&(e=Math.max(Math.floor((i.width()-i.scrollLeft()-n.width())/2),r)+i.scrollLeft()),void 0===t&&(t=Math.min(Math.floor((i.height()-n.height())/2),a)+i.scrollTop(),t<i.scrollTop()&&(t=i.scrollTop())),n.offset({left:e,top:t}),g()},v=function(e,i){t||i||(t=[]),n||(n=[]),e&&e.length>0&&(!i&&$.inArray(e,t)<0?t.push(e):i&&$.inArray(e,n)<0&&n.push(e))};return{cleanup:c,forgetStreams:l,disableButton:f,enableButton:h,showInpagePopup:m,repositionConfirmation:_,storeSubscriptionID:v,setStreamFunction:function(e){a=e}}}();e.exports=a},function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=n(346),a=n(318),o=n(319).localize,s=n(320).requireHighstock,c=function(){var e=[],t=null,n=void 0,c=-1,l=-1,d={chart:{renderTo:"last_digit_histo",defaultSeriesType:"column",backgroundColor:"#eee",borderWidth:1,borderColor:"#ccc",plotBackgroundColor:"#fff",plotBorderWidth:1,plotBorderColor:"#ccc",height:225},title:{text:""},credits:{enabled:!1},exporting:{enabled:!1},legend:{enabled:!1},tooltip:{borderWidth:1,formatter:function(){var e=$("#tick_count").val(),t=this.y/e*100;return"<strong>"+o("Digit")+":</strong> "+this.x+"<br/><strong>"+o("Percentage")+":</strong> "+t.toFixed(1)+"%"}},plotOptions:{column:{shadow:!1,borderWidth:.5,borderColor:"#666",pointPadding:0,groupPadding:0,color:"#e1f0fb"},series:{dataLabels:{enabled:!0,style:{textShadow:!1},formatter:function(){var e=$("#tick_count").val(),t=this.point.y/e*100;return t.toFixed(2)+"%"}}}},xAxis:{categories:["0","1","2","3","4","5","6","7","8","9"],lineWidth:0,lineColor:"#999",tickLength:10,tickColor:"#ccc"},yAxis:{title:{text:""},maxPadding:0,gridLineColor:"#e9e9e9",tickWidth:1,tickLength:3,tickColor:"#ccc",lineColor:"#ccc",endOnTick:!0,opposite:!1,labels:{align:"left",x:0,enabled:!1,formatter:function(){var e=$("#tick_count").val(),t=parseInt(this.value/e*100);return t+"%"}}}},u=function(e){var t=document.domain.split(".").slice(-2).join("."),n=[],i=r.getAllSymbols();Object.keys(i).forEach(function(e){/^(R_|RD)/.test(e)&&n.push(e)}),n=n.sort();for(var a="",s=0;s<n.length;s++)a+='<option value="'+n[s]+'">'+o(i[n[s]])+"</option>";$("#digit_underlying").html($(a)).val(e),$("#digit_domain").text(t.charAt(0).toUpperCase()+t.slice(1)),$("#digit_info_underlying").text($("#digit_underlying option:selected").text())},p=function(){var e=function(){var e=$("#digit_underlying option:selected"),i=e.val(),r=$("#tick_count").val();
$("#digit_info_underlying").text(e.text()),$("#digit_info_count").text(r);var o={ticks_history:i,end:"latest",count:r};n.series[0].name!==i&&($("#underlying").find("option:selected").val()!==$("#digit_underlying").val()&&(o.subscribe=1,o.style="ticks"),null!==t&&(a.send({forget:t}),t=null)),a.send(o,{callback:function(e){var t=e.msg_type;"tick"===t?m(e):"history"===t&&f(e.echo_req.ticks_history,e.history.prices)}})};$("#digit_underlying, #tick_count").off("change").on("change",e)},f=function(i,r){s(function(a){if("undefined"==typeof r||r.length<=0)return void console.log("Unexpected error occured in the charts.");for(var s=r[0].split(".")[1].length,c=0;c<r.length;c++){var l=parseFloat(r[c]).toFixed(s);r[c]=l.substr(l.length-1)}var f=function(){return{text:o($("#last_digit_title").html(),[r.length,$("#digit_underlying option:selected").text()])}};e=r,n&&$("#last_digit_histo").html()?(n.xAxis[0].update({title:f()},!0),n.series[0].name=i):(u(i),d.xAxis.title=f(),n=new a.Chart(d),n.addSeries({name:i,data:[]}),p(),t=null),h()})},h=function(t,r){if("undefined"==typeof n)return null;var a=n.series[0];a.name!==t&&(r=void 0),"undefined"!=typeof r&&(e.unshift(r.slice(-1)),e.pop());for(var o=[],s=function(e){return+e===d},d=10,u=[];d--;){var p=e.filter(s).length;o[d]=p,"undefined"==typeof u[p]&&(u[p]=0),u[p]++}var f=Math.min.apply(null,o),h=Math.max.apply(null,o),m=o.indexOf(f),g=o.indexOf(h);return u[f]>=1&&(o[m]={y:f,color:"#CC0000"},c===-1?c=m:c!==m&&("object"===i(o[c])?o[c]={y:o[c].y,color:"#e1f0fb"}:o[c]={y:o[c],color:"#e1f0fb"},c=m)),u[h]>=1&&(o[g]={y:h,color:"#2E8836"},l===-1?l=g:l!==g&&("object"===i(o[l])?o[l]={y:o[l].y,color:"#e1f0fb"}:o[l]={y:o[l],color:"#e1f0fb"},l=g)),a.setData(o)},m=function(e){t?n.series[0].name===e.tick.symbol?(t=e.tick.id||null,h(e.tick.symbol,e.tick.quote)):a.send({forget:e.tick.id.toString()}):h(e.tick.symbol,e.tick.quote)};return{showChart:f,updateChart:m}}();e.exports=c},function(e,t,n){"use strict";var i=n(343),r=n(346),a=n(348),o=n(357),s=n(358),c=n(310),l=n(319).localize,d=n(313).urlFor,u=n(320).elementInnerHtml,p=n(320).elementTextContent,f=n(320).isVisible,h=n(325).formatMoney,m=n(326).padLeft,g=function(){var e={},t=void 0,n=void 0,g=function(f){e=f;var m=f.buy,g=f.echo_req.passthrough,_=document.getElementById("contract_confirmation_container"),v=document.getElementById("confirmation_message"),y=document.getElementById("contract_purchase_heading"),b=document.getElementById("contract_purchase_descr"),w=document.getElementById("contract_purchase_barrier"),x=document.getElementById("contract_purchase_reference"),k=document.getElementById("tick_chart"),C=document.getElementById("contract_purchase_payout"),I=document.getElementById("contract_purchase_cost"),S=document.getElementById("contract_purchase_profit"),E=document.getElementById("contract_purchase_spots"),T=document.getElementById("confirmation_error"),B=document.getElementById("contracts_list"),A=document.getElementById("contract_purchase_button"),O=f.error,P=!O&&g.duration<=10&&"t"===g.duration_unit&&("risefall"===sessionStorage.formname||"higherlower"===sessionStorage.formname||"asian"===sessionStorage.formname);if(B.style.display="none",O){_.style.display="block",v.hide(),T.show();var L=O.message;if(/RestrictedCountry/.test(O.code)){var q=/FinancialBinaries/.test(O.code)?l("Try our [_1]Volatility Indices[_2].",['<a href="'+d("get-started/volidx-markets")+'" >',"</a>"]):/Random/.test(O.code)?l("Try our other markets."):"";L=O.message+". "+q}u(T,L)}else{var j=document.getElementById("guideBtn");j&&(j.style.display="none"),_.style.display="table-row",v.show(),T.hide(),p(y,l("Contract Confirmation")),p(b,m.longcode),w&&(w.textContent=""),p(x,l("Your transaction reference is")+" "+m.transaction_id);var D=c.get("currency");"payout"===g.basis?(t=g.amount,n=g["ask-price"]):(n=g.amount,t=m.payout);var M=h(D,t-n);u(C,l("Potential Payout")+" <p>"+h(D,t)+"</p>"),u(I,l("Total Cost")+" <p>"+h(D,n)+"</p>"),u(S,l("Potential Profit")+" <p>"+M+"</p>"),s.updateContractBalance(m.balance_after),P?k.show():k.hide(),"digits"===i.form()?(p(E,""),E.className="",E.show()):E.hide(),"digits"===i.form()||P?(A.hide(),$(".open_contract_details").setVisibility(0)):(p(A,l("View")),A.setAttribute("contract_id",m.contract_id),A.show(),$(".open_contract_details").attr("contract_id",m.contract_id).setVisibility(1))}if(P){var R=void 0;R="CALL"===g.contract_type||"ASIANU"===g.contract_type?"up":"down";var V=2,N=a.spots(),F=Object.keys(N);if(F.length>0){var H=N[F[0]].toString();H.indexOf(".")!==-1&&(V=H.split(".")[1].length)}var z=void 0;"higherlower"===sessionStorage.getItem("formname")&&(z=g.barrier),o.init({symbol:g.symbol,barrier:z,number_of_ticks:g.duration,previous_tick_epoch:m.start_time,contract_category:"asian"===sessionStorage.getItem("formname")?"asian":"callput",display_symbol:r.getName(g.symbol),contract_start:m.start_time,display_decimals:V,contract_sentiment:R,price:g["ask-price"],payout:m.payout,show_contract_result:1,width:$("#confirmation_message").width()}),o.resetSpots()}},_=function(){if(!$("#contract_purchase_spots:hidden").length){var i=e.echo_req&&e.echo_req.passthrough?e.echo_req.passthrough.duration:null;if(i){var r=document.getElementById("contract_purchase_spots"),o=a.spots(),c=Object.keys(o).sort(function(e,t){return e-t});r&&(r.textContent="");for(var d=void 0,h=function(e){return d=e,"<strong>"+e+"</strong>"},g=0;g<c.length;g++){var _={epoch:c[g],quote:o[c[g]]};if(f(r)&&_.epoch&&_.epoch>e.buy.start_time){var v=document.createElement("div");v.classList.add("row");var y=document.createElement("div");y.classList.add("col"),p(y,l("Tick")+" "+(r.getElementsByClassName("row").length+1)),v.appendChild(y);var b=document.createElement("div");b.classList.add("col");var w=new Date(1e3*_.epoch),x=m(w.getUTCHours(),2,"0"),k=m(w.getUTCMinutes(),2,"0"),C=m(w.getUTCSeconds(),2,"0");p(b,[x,k,C].join(":")),v.appendChild(b);var I=_.quote.replace(/\d$/,h),S=document.createElement("div");if(S.classList.add("col"),u(S,I),v.appendChild(S),r.appendChild(v),r.scrollTop=r.scrollHeight,d&&1===i){var E=void 0,T=void 0,B=void 0,A=e.echo_req.passthrough.contract_type,O=e.echo_req.passthrough.barrier;"DIGITMATCH"===A&&+d===+O||"DIGITDIFF"===A&&+d!==+O||"DIGITEVEN"===A&&+d%2===0||"DIGITODD"===A&&+d%2||"DIGITOVER"===A&&+d>O||"DIGITUNDER"===A&&+d<O?(r.className="won",T=t,B=n,E=l("This contract won")):(r.className="lost",T=0,B=-n,E=l("This contract lost")),s.updatePurchaseStatus(T,B,E)}i--,i||(e.echo_req.passthrough.duration=0)}}}}};return{display:g,updateSpotList:_}}();e.exports=g},function(e,t,n){"use strict";var i=n(305),r=n(348),a=n(358).updatePurchaseStatus,o=n(318),s=n(354),c=n(319).localize,l=n(320).elementInnerHtml,d=n(320).isVisible,u=n(320).requireHighstock,p=function(){var e=void 0,t=void 0,n=void 0,p=void 0,f=void 0,h=void 0,m=void 0,g=void 0,_=void 0,v=void 0,y=void 0,b=void 0,w=void 0,x=void 0,k=void 0,C=void 0,I=void 0,S=void 0,E=void 0,T=void 0,B=void 0,A=void 0,O=void 0,P=void 0,L=void 0,q=void 0,j=void 0,D=void 0,M=void 0,R=void 0,V=void 0,N=function(i){e=parseInt(i.number_of_ticks),t=i.display_symbol,n=1e3*parseInt(i.contract_start),p=i.contract_category,f=!p.match("digits"),h=i.barrier,m=i.abs_barrier,g=i.display_decimals||2,_=i.show_contract_result,i.show_contract_result&&(v=i.contract_sentiment,y=parseFloat(i.price),b=parseFloat(i.payout));var r=i.show_contract_result,a=parseInt(i.contract_start)+parseInt(5*(e+2));F(),H({plot_from:1e3*i.previous_tick_epoch,plot_to:new Date(1e3*a).getTime(),minimize:r,width:i.width?i.width:void 0})},F=function(){var t=e-1;p.match("asian")?(w=e,x={_0:{label:"Entry Spot",id:"start_tick"}},x["_"+t]={label:"Exit Spot",id:"exit_tick"}):p.match("callput")?(w=e+1,x={_0:{label:"Entry Spot",id:"entry_tick"}},x["_"+e]={label:"Exit Spot",id:"exit_tick"}):p.match("digits")?(w=e,x={_0:{label:"Tick 1",id:"start_tick"}},x["_"+t]={label:"Tick "+e,id:"last_tick"}):x={}},H=function(n){k=new C.Chart({chart:{type:"line",renderTo:"tick_chart",width:n.width?n.width:n.minimize?394:null,height:n.minimize?143:null,backgroundColor:null,events:{load:X(n.plot_from,n.plot_to)},marginLeft:50},credits:{enabled:!1},tooltip:{formatter:function(){var e=this.y.toFixed(g),n=i.utc(1e3*I[this.x].epoch).format("dddd, MMM D, HH:mm:ss");return n+"<br/>"+t+" "+e}},xAxis:{type:"linear",min:0,max:e+1,labels:{enabled:!1}},yAxis:{opposite:!1,labels:{align:"left",x:0},title:""},series:[{data:[]}],title:"",exporting:{enabled:!1,enableImages:!1},legend:{enabled:!1}}),C.setOptions({lang:{thousandsSep:","}})},z=function(e){if(_){var t=$("#tick_chart");"up"===v?e.quote>S?t.css("background-color","rgba(46,136,54,0.198039)"):t.css("background-color","rgba(204,0,0,0.098039)"):"down"===v&&(e.quote<S?t.css("background-color","rgba(46,136,54,0.198039)"):t.css("background-color","rgba(204,0,0,0.098039)"))}},U=function(){if(f){var e=p.match("asian")?"asian":"static";if("static"===e){var t=I[0];if(h){var n=t.quote+parseFloat(h);n=Number(Math.round(n+"e"+g)+"e-"+g),t.quote=n}else m&&(t.quote=parseFloat(m));k.yAxis[0].addPlotLine({id:"tick-barrier",value:t.quote,label:{text:"Barrier ("+t.quote+")",align:"center"},color:"green",width:2,zIndex:2}),S=t.quote,f=!1}if("asian"===e){for(var i=0,r=0;r<I.length;r++)i+=parseFloat(I[r].quote);var a=i/I.length;a=a.toFixed(parseInt(g)+1),k.yAxis[0].removePlotLine("tick-barrier"),k.yAxis[0].addPlotLine({id:"tick-barrier",value:a,color:"green",label:{text:"Average ("+a+")",align:"center"},width:2,zIndex:2}),S=a}var o=document.getElementById("contract_purchase_barrier");S&&o&&l(o,c("Barrier")+": "+S)}},Y=function(e){k.xAxis[0].addPlotLine({value:e.index,id:e.id,label:{text:e.label,x:/start_tick|entry_tick/.test(e.id)?-15:5},color:"#e98024",width:2,zIndex:2})},W=function(){if(S){var e=I.length-1,t=I[e].quote;"up"===v?t>S?G():J():"down"===v&&(t<S?G():J())}},G=function(){a(b,y,c("This contract won"))},J=function(){a(0,-y,c("This contract lost"))},X=function(){E=i(n).utc(),T=0,I=[]},K=function(e){var t=document.getElementById("tick_chart");if(t&&d(t)&&e&&(e.tick||e.history)){R&&e.tick&&document.getElementById("sell_content_wrapper")&&(V=e.tick.id,s.storeSubscriptionID(V));var n=void 0,i=void 0,a=void 0;if(document.getElementById("sell_content_wrapper")&&(e.tick&&document.getElementById("sell_content_wrapper")?(r.details(e),a||(a=e.tick.quote.split(".")[1].length||2)):e.history&&document.getElementById("sell_content_wrapper")&&(a||(a=e.history.prices[0].split(".")[1].length||2)),M||(N({symbol:A,number_of_ticks:O,contract_category:/asian/i.test(D)?"asian":/digit/i.test(D)?"digits":"callput",longcode:P,display_symbol:L,contract_start:q,abs_barrier:j,display_decimals:a,show_contract_result:0}),B={},M="initialized")),e.tick?(i=r.spots(),n=Object.keys(i).sort(function(e,t){return e-t})):e.history&&(n=e.history.times),I&&w&&I.length>=w)W(),V&&o.send({forget:V});else for(var c=0;c<n.length;c++){var l=void 0;if(e.tick?l={epoch:parseInt(n[c]),quote:parseFloat(i[n[c]])}:e.history&&(l={epoch:parseInt(e.history.times[c]),quote:parseFloat(e.history.prices[c])}),l.epoch>E.unix()&&!B[l.epoch]){if(!k||!k.series)return;k.series[0].addPoint([T,l.quote],!0,!1),I.push(l),B[l.epoch]=l.quote;var u="_"+T;"undefined"!=typeof x[u]&&(x[u].index=T,Y(x[u])),U(),z(l),T++}}}},Q=function(e,t){u(function(n){if(C=n,R="false",t){A=t.underlying,O=t.tick_count,P=t.longcode,L=t.display_name,q=t.date_start,j=t.barrier,D=t.shortcode,M="";var i={ticks_history:t.underlying,start:t.date_start,end:"latest"};t.current_spot_time<t.date_expiry?(i.subscribe=1,R="true"):i.end=t.date_expiry,o.send(i,{callback:K})}else K(e)})};return{init:N,updateChart:Q,dispatch:K,resetSpots:function(){B={}}}}();e.exports=p},function(e,t,n){"use strict";var i=n(310),r=n(319).localize,a=n(325).formatMoney,o=function(e,t,n){$("#contract_purchase_heading").text(r(n));var o=$("#contract_purchase_payout"),c=$("#contract_purchase_cost"),l=$("#contract_purchase_profit"),d=i.get("currency");o.html($("<div/>",{text:r("Buy price")}).append($("<p/>",{text:a(d,Math.abs(t))}))),c.html($("<div/>",{text:r("Final price")}).append($("<p/>",{text:a(d,e)}))),e?(l.html($("<div/>",{text:r("Profit")}).append($("<p/>",{text:a(d,e-t)}))),s(i.get("balance"))):l.html($("<div/>",{text:r("Loss")}).append($("<p/>",{text:a(d,t)})))},s=function(e){$("#contract_purchase_balance").text(r("Account balance:")+" "+a(i.get("currency"),e))};e.exports={updatePurchaseStatus:o,updateContractBalance:s}},function(e,t,n){"use strict";var i=n(308),r=n(327),a=n(318),o=function(){var e="",t="",n=function(n){t="",n&&(n.error?t=n.error.message:e=n.tick.quote)},o=function(){$("#spot").fadeIn(200);var n=document.getElementById("spot");if(n){var i="";i=t?t:e,parseFloat(i)!==+i?n.className="error":(n.classList.remove("error"),s(parseFloat(n.textContent),parseFloat(i))),n.textContent=i}},s=function(e,t){var n=t>e?"up":t<e?"down":"still",i=$("#spot");i.removeClass("up down still").addClass(n)},c=function(e){a.send({ticks_history:e,style:"ticks",end:"latest",subscribe:1},{callback:l})},l=function(e){if("tick"===e.msg_type){if(e.hasOwnProperty("error"))return void r.show({text:e.error.message,uid:"TICK_ERROR"});var t=i.get("underlying");(e.echo_req.ticks===t||e.tick&&e.tick.symbol===t)&&(n(e),o())}else if(e.history&&e.history.times&&e.history.prices)for(var a=0;a<e.history.times.length;a++)n({tick:{epoch:e.history.times[a],quote:e.history.prices[a]}})};return{details:n,display:o,request:c,quote:function(){return e},errorMessage:function(){return t},setQuote:function(t){e=t},clean:function(){e="";var t=$("#spot");t.fadeOut(200,function(){t.removeClass("up down").text("")})},displayPriceMovement:s,processTickHistory:l}}();e.exports=o},function(e,t,n){"use strict";var i=n(310),r=n(312).State,a=n(361),o=function(){var e=void 0,t=!1,n=function(){s()&&$("#tab_portfolio").setVisibility(1);var t=$("#tab_portfolio-content");e=e||$("#portfolio"),!e||e.parent().length&&"tab_portfolio-content"===e.parent().get(0).id||(e.detach(),t.append(e))},o=function(){l()&&!t&&(a.onLoad(),t=!0)},s=function(){return!(!i.isLoggedIn()||!l())},c=function(){l()&&t&&(a.onUnload(),t=!1,e=void 0)},l=function(){return r.get("is_mb_trading")};return{init:n,show:o,hide:c,isActive:s}}();e.exports=o},function(e,t,n){"use strict";var i=n(362).Portfolio,r=n(364),a=n(318),o=n(310),s=(n(363).toJapanTimeIfNeeded,n(319).localize),c=n(313).param,l=n(309).showLoadingImage,d=(n(315).jpClient,n(325).formatMoney),u=n(367),p=function(){var e=void 0,t=void 0,n=void 0,p=void 0,f=void 0,h=function(){if(g(),!p){e={},t="",n={};var i=$("#portfolio-loading");i.show(),l(i),f=!0,a.send({portfolio:1}).then(function(e){_(e)}),a.send({transaction:1,subscribe:1},{callback:v}),a.send({oauth_apps:1}).then(function(e){b(e)}),p=!0;var o=c("contract_id");o&&r.init($("<div />",{contract_id:o}).get(0))}},m=function(e,t){var i=e.longcode,r=t?"":"new",a=$("<div/>");a.append($("<tr/>",{class:"tr-first "+r+" "+e.contract_id,id:e.contract_id}).append($("<td/>",{class:"ref"}).append($("<span "+u.showTooltip(e.app_id,n[e.app_id])+' data-balloon-position="right">'+e.transaction_id+"</span>"))).append($("<td/>",{class:"payout"}).append($("<strong/>",{text:d(e.currency,e.payout)}))).append($("<td/>",{class:"details",text:i})).append($("<td/>",{class:"purchase"}).append($("<strong/>",{text:d(e.currency,e.buy_price)}))).append($("<td/>",{class:"indicative"}).append($("<strong/>",{class:"indicative_price",text:"--.--"}))).append($("<td/>",{class:"button"}).append($("<button/>",{class:"button open_contract_details nowrap",contract_id:e.contract_id,text:s("View")})))).append($("<tr/>",{class:"tr-desc "+r+" "+e.contract_id}).append($("<td/>",{colspan:"6",text:i}))),$("#portfolio-body").prepend(a.html())},g=function(){var e=$("#portfolio-balance");if(0!==e.length){e.text(i.getBalance(o.get("balance"),o.get("currency")));var t=$("#if-balance-zero");o.get("balance")>0||o.get("is_virtual")?t.setVisibility(0):t.setVisibility(1)}},_=function(n){if(n.hasOwnProperty("error"))return void k(n.error.message);var r=void 0;0!==n.portfolio.contracts.length&&($("#portfolio-no-contract").hide(),$.each(n.portfolio.contracts,function(n,a){e.hasOwnProperty(a.contract_id)||"BINARYICO"===a.contract_type||(e[a.contract_id]={},e[a.contract_id].buy_price=a.buy_price,r=i.getPortfolioData(a),t=r.currency,m(r,f),setTimeout(function(){$("tr."+a.contract_id).removeClass("new")},1e3))})),r?($("#portfolio-table").setVisibility(1),x(),a.send({proposal_open_contract:1,subscribe:1},{callback:y})):($("#portfolio-no-contract").show(),$("#portfolio-table").setVisibility(0)),$("#portfolio-loading").hide(),$("#portfolio-content").setVisibility(1),f=!1},v=function(e){e.hasOwnProperty("error")?k(e.error.message):"buy"===e.transaction.action?a.send({portfolio:1}).then(function(e){_(e)}):"sell"===e.transaction.action&&w(e.transaction.contract_id)},y=function(t){if(!t.hasOwnProperty("error")&&e){var n=i.getProposalOpenContract(t.proposal_open_contract);if(e.hasOwnProperty(n.contract_id)){1!==+n.is_settleable||n.is_sold||a.send({sell_expired:1});var r=$("#"+n.contract_id).find("td.indicative"),o=e[n.contract_id].indicative||0;e[n.contract_id].indicative=n.bid_price;var c="",l="";1===+n.is_sold?w(n.contract_id):(1!==+n.is_valid_to_sell?(l=$("<span/>",{text:s("Resale not offered")}),r.addClass("no_resale")):(c=e[n.contract_id].indicative<o?" price_moved_down":e[n.contract_id].indicative>o?" price_moved_up":"",r.removeClass("no_resale")),r.html($("<strong/>",{class:"indicative_price "+c,text:d(n.currency,e[n.contract_id].indicative)}).append(l))),x()}}},b=function(e){n=u.buildOauthApps(e),u.addTooltip(n)},w=function(t){delete e[t],$("tr."+t).removeClass("new").css("opacity","0.5").fadeOut(1e3,function(){$(this).remove(),0===$("#portfolio-body").find("tr").length&&($("#portfolio-table").setVisibility(0),$("#cost-of-open-positions, #value-of-open-positions").text(""),$("#portfolio-no-contract").show())}),x()},x=function(){$("#cost-of-open-positions").text(d(t,i.getSumPurchase(e))),$("#value-of-open-positions").text(d(t,i.getIndicativeSum(e)))},k=function(e){var t=$("#portfolio").find("#error-msg");e?t.setVisibility(1).text(e):t.setVisibility(0).text("")},C=function(){h(),r.viewButtonOnClick("#portfolio-table")},I=function(){a.send({forget_all:"proposal_open_contract"}),a.send({forget_all:"transaction"}),$("#portfolio-body").empty(),$("#portfolio-content").setVisibility(0),p=!1};return{updateBalance:g,updatePortfolio:_,updateIndicative:y,updateOAuthApps:b,transactionResponseHandler:v,onLoad:C,onUnload:I}}();e.exports=p},function(e,t,n){"use strict";var i=(n(363).toJapanTimeIfNeeded,n(325).formatMoney),r=(n(315).jpClient,function(){var e=function(e,t){return e=parseFloat(e),t?i(t,e):e},t=function(e){return{transaction_id:e.transaction_id,contract_id:e.contract_id,payout:parseFloat(e.payout),longcode:e.longcode,shortcode:e.shortcode,currency:e.currency,buy_price:e.buy_price,app_id:e.app_id}},n=function(e){return{contract_id:e.contract_id,bid_price:parseFloat(e.bid_price||0),is_sold:e.is_sold,is_valid_to_sell:e.is_valid_to_sell,currency:e.currency}},r=function(e,t){for(var n=0,i=Object.keys(e),r=0;r<i.length;r++){var a=i[r];e[a]&&!isNaN(e[a][t])&&(n+=parseFloat(e[a][t]))}return n};return{getBalance:e,getPortfolioData:t,getProposalOpenContract:n,getIndicativeSum:function(e){return r(e,"indicative")},getSumPurchase:function(e){return r(e,"buy_price")}}}());e.exports={Portfolio:r}},function(e,t,n){"use strict";var i=n(305),r=n(315).jpClient,a=n(318),o=function(){var e=!1,t=void 0,n=void 0,o=function(e){r()||$(e||".date").each(function(e,t){var n=t.textContent.replace("\n"," "),r=i.utc(n,"YYYY-MM-DD HH:mm:ss").local();r.isValid()&&$(t).attr("data-balloon",r.format("YYYY-MM-DD HH:mm:ss Z"))})},s=function(e,t,n,a){var o=void 0;if(n&&""!==n&&(o=n.match(/((?:\d{4}-\d{2}-\d{2})\s?(\d{2}:\d{2}:\d{2})?(?:\sGMT)?)/),!o))return n;var s=void 0;if(s="number"==typeof e?i.utc(1e3*e):e?i.utc(e,"YYYY-MM-DD HH:mm:ss"):i.utc(o[0],"YYYY-MM-DD HH:mm:ss"),!s.isValid())return null;var c=r(),l=s.utcOffset(c?"+09:00":"+00:00").format((a?"YYYY-MM-DD HH:mm":"YYYY-MM-DD HH:mm:ss")+(t&&""!==t?c?" zZ":" Z":""));return n?n.replace(o[0],l):l},c=function(){if(!e){var n=function(){e=!0,t=i().valueOf(),a.send({time:1}).then(function(e){l(e)})};setInterval(n,3e4),n()}},l=function(e){if(isNaN(t)||e.error)return void c();clearTimeout(n);var a=$("#gmt-clock"),l=e.time,d=i().valueOf(),u=1e3*l+(d-t),p=function e(){window.time=i(u+i().valueOf()-d).utc();var t=window.time.format("YYYY-MM-DD HH:mm")+" GMT";r()?a.html(s(t,1,"",1)):(a.html(t),o("#gmt-clock")),n=setTimeout(e,1e3)};p()};return{startClock:c,showLocalTimeOnHover:o,toJapanTimeIfNeeded:s}}();e.exports=o},function(e,t,n){"use strict";var i=n(305),r=n(354),a=n(318),o=n(365),s=n(357),c=n(363).showLocalTimeOnHover,l=n(363).toJapanTimeIfNeeded,d=n(319).localize,u=n(312).State,p=n(309).isEmptyObject,f=n(325).addComma,h=n(325).formatMoney,m=function(){var e=void 0,t=void 0,n=void 0,m=void 0,g=void 0,_=void 0,v=void 0,y=void 0,b=void 0,w=void 0,x=void 0,k="inpage_popup_content_box",C="sell_content_wrapper",I="invisible",S=function(i){x=i,e=$(x).attr("contract_id"),t={},n=!1,m=!1,g=!1,_=!1,v=!1,y=!1,b="",x&&(r.disableButton($(x)),r.cleanup()),F(),D(!0)},E=function(e){return!e.proposal_open_contract||p(e.proposal_open_contract)?void R(e):e.proposal_open_contract.hasOwnProperty("shortcode")?($.extend(t,e.proposal_open_contract),t&&document.getElementById(C)?void B():void T()):void R(e,e.proposal_open_contract.validation_error)},T=function(){D(!1),b||(b=P()),j("trade_details_contract_id",t.contract_id),j("trade_details_start_date",l(q(t.date_start))),document.getElementById("trade_details_end_date")&&j("trade_details_end_date",l(q(t.date_expiry))),j("trade_details_payout",h(t.currency,t.payout)),j("trade_details_purchase_price",h(t.currency,t.buy_price)),A(),B(),r.repositionConfirmation(),u.get("is_mb_trading")&&u.call("ViewPopup.onDisplayed")},B=function(){var e=t.sell_price||t.bid_price,i=!t.is_forward_starting||t.current_spot_time>t.date_start,c=t.sell_time&&t.sell_time<t.date_expiry,u=t.is_settleable||t.is_sold||c,p=e&&u?t.sell_price||t.bid_price:t.bid_price?t.bid_price:null;if(t.barrier_count>1)j("trade_details_barrier",f(t.high_barrier),"",!0),j("trade_details_barrier_low",f(t.low_barrier),"",!0);else if(t.barrier){var y=f(t.barrier);j("trade_details_barrier",t.entry_tick_time?"DIGITMATCH"===t.contract_type?d("Equals")+" "+y:"DIGITDIFF"===t.contract_type?d("Not")+" "+y:y:"-","",!0)}var w=u?c?"":t.exit_tick:t.current_spot,x=u?c?"":t.exit_tick_time:t.current_spot_time;w?j("trade_details_current_spot",f(w)):$("#trade_details_current_spot").parent().setVisibility(0),x?j("trade_details_current_date",l(q(x))):$("#trade_details_current_date").parent().setVisibility(0),j("trade_details_ref_id",t.transaction_ids.buy+(t.transaction_ids.sell?" - "+t.transaction_ids.sell:"")),j("trade_details_indicative_price",p?h(t.currency,p):"-");var k=void 0,C=void 0;e?(k=e-t.buy_price,C=f(100*k/t.buy_price,2),j("trade_details_profit_loss",h(t.currency,k)+"<span>("+(C>0?"+":"")+C+"%)</span>",{class:k>=0?"profit":"loss"})):j("trade_details_profit_loss","-",{class:"loss"}),i?(t.entry_spot>0&&j("trade_details_entry_spot",f(t.entry_spot)),j("trade_details_message",t.validation_error?t.validation_error:"&nbsp;")):(j("trade_details_entry_spot","-"),j("trade_details_message",d("Contract has not started yet"))),g||t.tick_count?t.tick_count&&!v&&(s.updateChart("",t),v=!0):(_||(_=!0,o.showChart(t)),o.showChart(t,"update"),t.entry_tick_time&&(g=!0)),!n&&c&&(n=!0,t.tick_count||o.showChart(t,"update")),u&&(O(parseFloat(k)>=0),t.is_valid_to_sell&&t.is_settleable&&!t.is_sold&&!m&&(r.forgetStreams(),a.send({sell_expired:1}).then(function(e){F(e)})),t.tick_count||o.showChart(t,"update")),t.is_valid_to_sell||b.find("#errMsg").setVisibility(0),V(!m&&!n&&!u&&1===+t.is_valid_to_sell),t.chart_validation_error=t.validation_error,t.validation_error=""},A=function(){var e=function(){var e=Math.max(Math.ceil((window.time||0)/1e3),t.current_spot_time||0);j("trade_details_live_date",l(q(e))),c("#trade_details_live_date");var n=!t.is_forward_starting||t.current_spot_time>t.date_start,r=t.is_settleable||t.is_sold;if((!n||r||e>=t.date_expiry)&&document.getElementById("trade_details_live_remaining"))j("trade_details_live_remaining","-");else{var a=t.date_expiry-e,o=0,s=86400;a>s&&(o=Math.floor(a/s),a%=s),document.getElementById("trade_details_live_remaining")&&j("trade_details_live_remaining",(o>0?o+" "+d(o>1?"days":"day")+", ":"")+i(1e3*a).utc().format("HH:mm:ss"))}};e(),clearInterval(window.ViewPopupTimerInterval),window.ViewPopupTimerInterval=setInterval(e,500)},O=function(){j("trade_details_current_title",d(t.sell_spot_time<t.date_expiry?"Contract Sold":"Contract Expiry")),j("trade_details_spot_label",d("Exit Spot")),j("trade_details_spottime_label",d("Exit Spot Time")),j("trade_details_indicative_label",d("Price")),t.is_settleable&&!t.is_sold||j("trade_details_message","&nbsp;"),b.find("#errMsg").setVisibility(0),V(!1)},P=function(){b=$("<div/>").append($("<div/>",{id:C}));var e=t.longcode;b.prepend($("<div/>",{id:"sell_bet_desc",class:"popup_bet_desc drag-handle",text:e}));var n=$("<div/>").append($('<div class="gr-row container"><div id="sell_details_chart_wrapper" class="gr-8 gr-12-m"></div><div id="sell_details_table" class="gr-4 gr-12-m"></div></div>'));return n.find("#sell_details_table").append($('<table>\n            <tr id="contract_tabs"><th colspan="2" id="contract_information_tab">'+d("Contract Information")+'</th></tr><tbody id="contract_information_content">\n            '+L("Contract ID","","trade_details_contract_id")+"\n            "+L("Reference ID","","trade_details_ref_id")+"\n            "+L("Start Time","","trade_details_start_date")+"\n            "+(t.tick_count?"":L("End Time","","trade_details_end_date")+L("Remaining Time","","trade_details_live_remaining"))+"\n            "+L("Entry Spot","","trade_details_entry_spot")+"\n            "+L(t.barrier_count>1?"High Barrier":/^DIGIT(MATCH|DIFF)$/.test(t.contract_type)?"Target":"Barrier","","trade_details_barrier",!0)+"\n            "+(t.barrier_count>1?L("Low Barrier","","trade_details_barrier_low",!0):"")+"\n            "+L("Potential Payout","","trade_details_payout")+"\n            "+L("Purchase Price","","trade_details_purchase_price")+'\n            </tbody>\n            <th colspan="2" id="barrier_change" class="invisible">'+d("Barrier Change")+'</th>\n            <tbody id="barrier_change_content" class="invisible"></tbody>\n            <tr><th colspan="2" id="trade_details_current_title">'+d("Current")+"</th></tr>\n            "+L("Spot","trade_details_spot_label","trade_details_current_spot")+"\n            "+L("Spot Time","trade_details_spottime_label","trade_details_current_date")+"\n            "+L("Current Time","","trade_details_live_date")+"\n            "+L("Indicative","trade_details_indicative_label","trade_details_indicative_price")+"\n            "+L("Profit/Loss","","trade_details_profit_loss")+'\n            <tr><td colspan="2" class="last_cell" id="trade_details_message">&nbsp;</td></tr>\n            </table>\n            <div id="errMsg" class="notice-msg '+I+'"></div>\n            <div id="trade_details_bottom"><div id="contract_sell_wrapper" class="'+I+'"></div><div id="contract_sell_message"></div><div id="contract_win_status" class="'+I+'"></div></div>')),n.find("#sell_details_chart_wrapper").html($("<div/>",{id:t.tick_count?"tick_chart":"analysis_live_chart",class:"live_chart_wrapper"})),b.find("#"+C).append(n.html()).append($("<div/>",{id:"errMsg",class:"notice-msg "+I})),r.showInpagePopup('<div class="'+k+'">'+b.html()+"</div>","","#sell_bet_desc"),$("#"+C)},L=function(e,t,n,i,r){return"<tr"+(i?' class="'+I+'"':"")+"><td"+(t?' id="'+t+'"':"")+">"+d(e)+"</td><td"+(n?' id="'+n+'"':"")+">"+(r||"")+"</td></tr>"},q=function(e){return i.utc(1e3*e).format("YYYY-MM-DD HH:mm:ss")},j=function(e,t,n,i){b&&0!==b.length||(b=$("#"+C));var r=b.find("#"+e);r&&r.length>0&&(r.html(t),n&&r.attr(n),i&&r.parent("tr").setVisibility(1))},D=function(e){e?(w=$("#trading_init_progress"),w.length&&w.show()):(w.length&&w.hide(),x&&r.enableButton($(x)))},M=function(e,t,n){D(!1);var i=$("<div/>");i.prepend($("<div/>",{id:"sell_bet_desc",class:"popup_bet_desc drag-handle",text:d(t)})),i.append($("<div/>",{id:C}).append($("<div/>",{class:n,html:d(e)}))),r.showInpagePopup('<div class="'+k+'">'+i.html()+"</div>","message_popup","#sell_bet_desc")},R=function(e,t){t=t||"Sorry, an error occurred while processing your request.",M(d(t),"There was an error","notice-msg"),console.log(e)},V=function n(i){var r="sell_at_market_wrapper",o="sell_at_market",s=b.find("#"+r).length>0;if(i){var c=!t.is_forward_starting||t.current_spot_time>t.date_start,l=b.find("#contract_sell_wrapper");if(s)return void(!y&&c&&(N(l),l.find("#"+o).text(d("Sell at market"))));l.setVisibility(1).append($("<div/>",{id:r}).append($("<button/>",{id:o,class:"button",text:d(c?"Sell at market":"Sell")}))),c&&N(l),b.find("#"+o).unbind("click").click(function(i){i.preventDefault(),i.stopPropagation(),m=!0,n(!1),a.send({sell:e,price:t.bid_price}).then(function(e){H(e)})})}else{if(!s)return;b.find("#"+o).unbind("click"),b.find("#"+r).remove()}},N=function(e){y=!0,e.find("#sell_at_market_wrapper").append($("<div/>",{class:"note"}).append($("<strong/>",{text:d("Note")+": "})).append($("<span/>",{text:d("Contract will be sold at the prevailing market price when the request is received by our servers. This price may differ from the indicated price.")})))},F=function(t){if(e){r.forgetStreams();var n={proposal_open_contract:1,contract_id:e,subscribe:1};"no-subscribe"===t&&delete n.subscribe,a.send(n,{callback:z})}},H=function(e){return e.hasOwnProperty("error")?("NoOpenPosition"===e.error.code?F():b.find("#errMsg").text(e.error.message).setVisibility(1),V(!0),void(m=!1)):(r.forgetStreams(),b.find("#errMsg").setVisibility(0),V(!1),m&&j("contract_sell_message",d("You have sold this contract at [_1] [_2]",[t.currency,e.sell.sold_for])+"\n                <br />\n                "+d("Your transaction reference number is [_1]",[e.sell.transaction_id])),void F("no-subscribe"))},z=function(t){if(t.error)return void("AlreadySubscribed"!==t.error.code&&t.echo_req.contract_id===e&&R(t,t.error.message));t.proposal_open_contract.contract_id===e?(r.storeSubscriptionID(t.proposal_open_contract.id),E(t)):a.send({forget:t.proposal_open_contract.id});for(var n=["#trade_details_start_date","#trade_details_end_date","#trade_details_current_date","#trade_details_live_date"],i=0;i<n.length;i++)c(n[i]),$(n[i]).attr("data-balloon-pos","left")},U=function(e){$(e).on("click",".open_contract_details",function(e){e.preventDefault(),S(this)})};return{init:S,viewButtonOnClick:U}}();e.exports=m},function(e,t,n){"use strict";var i=n(366),r=n(304),a=n(308),o=n(338),s=n(340),c=n(318),l=n(354),d=n(319).localize,u=n(312).State,p=n(320).requireHighstock,f=n(315).jpClient,h=n(325).addComma,m=function(){var e=void 0,t=void 0,n=void 0,m=void 0,g=void 0,_=void 0,v=void 0,y=void 0,b=void 0,w=void 0,x=void 0,k=void 0,C=void 0,I=void 0,S=void 0,E=void 0,T=void 0,B=void 0,A=void 0,O=void 0,P=void 0,L=void 0,q=void 0,j=void 0,D=void 0,M=void 0,R=void 0,V=void 0,N=void 0,F=void 0,H=function(){e=n=m=g=_=v=y="",b=[],q=j=D=M=F=R=V=N=!1},z=function(){w=parseInt(g.date_start),x=parseInt(g.purchase_time),k=parseInt(g.current_spot_time),C=parseInt(g.date_expiry),I=parseInt(g.entry_tick_time),S=g.is_sold,E=parseInt(g.sell_time),T=parseInt(g.sell_spot_time),B=g.is_settleable,A=parseInt(g.exit_tick_time),O=parseInt(S&&E<C?T:A||C),P=g.underlying},U=function(t){var n=[],r="",a=void 0,o=function(e,t){e=parseInt(e);var r=e===I,a=e===A,o=r?"entry":"exit";n.push({x:1e3*e,y:1*t,marker:r||a?i.getMarkerObject(o):""})},s="",c="";if(t.history){r="line",s=t.history;var l=s.times,u=s.prices;if(j)for(a=0;a<l.length;++a)o(l[a],u[a]);else if(v&&y){var h=void 0;for(a=0;a<l.length;++a)h=parseInt(l[a]),h>=v&&h<=y&&o(h,u[a])}}else t.candles&&(c=t.candles,r="candlestick",
n=c.map(function(e){return[1e3*e.epoch,1*e.open,1*e.high,1*e.low,1*e.close]}));var m=document.getElementById("analysis_live_chart");if(!m)return e=null,new Promise;var g=f();return i.setLabels(j),i.setChartOptions({height:m.parentElement.offsetHeight,title:d(t.title),JPClient:g,decimals:s?s.prices[0]:c[0].open,type:r,data:n,entry_time:I?1e3*I:1e3*w,exit_time:O?1e3*O:null,user_sold:he()}),p(function(t){t.setOptions(i.getHighchartOptions(g)),m?(e=t.StockChart(m,i.getChartOptions()),q=!0):e=null})},Y=function(t,n){e[n+"Axis"][0].addPlotLine(i.getPlotlineOptions(t,n)),he()&&i.replaceExitLabelWithSell(e.subtitle.element)},W=function(r){var c=r.msg_type,p=r.error;if(/(history|candles|tick|ohlc)/.test(c)&&!p){n={title:g.display_name},n[c]=r[c];var f=r.history,h=r.candles,_=r.tick,v=r.ohlc;if(m=r[c].id,m&&!F){if(u.get("is_trading")||u.get("is_mb_trading")||u.get("is_beta_trading")){var y=u.get("is_mb_trading")?a.get("underlying"):o.get("underlying");y!==(_||v).symbol?(l.storeSubscriptionID(m,!0),l.setStreamFunction()):l.setStreamFunction(s.request)}else l.storeSubscriptionID(m,!0);F=!0}if(f||h){var b=(f?f.times:h).length;if(0===b)return void i.showError("missing");if(f){var $=f.times;ie($),re($)}else h&&(ae(h),oe(h));e||q||(t=U(n),t.then(function(){e&&(x!==w&&ce({value:x,label:d("Purchase Time"),color:"#7cb5ec"}),(!S||S&&E&&E>w)&&ce({value:w}))}))}else!_&&!v||M||e&&e.series&&pe(n);I&&!N&&t.then(Z),(S||B)&&t.then(function(){ee("exit"),le()})}else"ticks_history"===c&&p&&i.showError("",p.message)},G=function(t,n){g=t,z(),n||H(),e||V?e&&I&&!N&&Z():J(n||""),e&&(S||B)&&(ee("exit"),le())},J=function(e){var t=ue(),n=t[0],i=t[1];L=0===n?Math.max(300,30*i/3600||0):3*n,_={ticks_history:P,start:((x||w)-L).toFixed(0),end:C?(C+L).toFixed(0):"latest",style:0===n?"ticks":"candles",count:4999,adjust_start_time:1},S&&E<C&&(_.end=T?(parseInt(T)+L).toFixed(0):"latest"),!isNaN(_.end)&&_.start>_.end&&(_.end=[_.start,_.start=_.end][0]),0!==n&&(_.granularity=n),!B&&!T&&window.time.valueOf()/1e3<C&&!D&&(_.subscribe=1);var a=u.get("is_mb_trading")?r.getContractsResponse():u.get(["response","contracts_for"]),o=sessionStorage.getItem("license."+P);a&&a.echo_req.contracts_for===P?X(a):o?(Q(o),K()):R||""!==e||(c.send({contracts_for:P}).then(function(e){var t=e.error;(!t||t.code&&"InvalidSymbol"===t.code)&&X(e)}),R=!0)},X=function(e){if(e.contracts_for&&e.contracts_for.feed_license){var t=e.contracts_for.feed_license;Q(t),fe(e.echo_req.contracts_for,t)}K()},K=function(){!I&&!j&&w&&window.time.unix()>=parseInt(w)?i.showError("",d("Waiting for entry tick.")):V||(V=!0,_.subscribe&&(D=!0),s.request("",_,W))},Q=function(e){"realtime"!==e&&(B||(_.end="latest"),delete _.subscribe,j=!0)},Z=function(){e&&I&&!N&&(N=!0,te(),ee("entry"),ne(I,"entry"))},ee=function(t){if(e&&t&&!he()){var n="entry"===t?I:O;e.series[0].zones["entry"===t?0:1].value=1e3*n}},te=function(){if(0===e.yAxis[0].plotLinesAndBands.length){var t=g.barrier,n=g.high_barrier,i=g.low_barrier;t?Y({id:"barrier",value:1*t,label:d("Barrier ([_1])",[h(t)]),dashStyle:"Dot"},"y"):n&&i&&(Y({id:"high_barrier",value:1*n,label:d("High Barrier ([_1])",[h(n)]),dashStyle:"Dot"},"y"),Y({id:"low_barrier",value:1*i,label:d("Low Barrier ([_1])",[h(i)]),dashStyle:"Dot"},"y"))}},ne=function(t,r){if(e&&t&&r&&(n.tick||n.history)&&0!==e.series[0].data.length){var a=e.series[0].data;if(!a||0===a.length)return;for(var o=void 0,s=a.length-1;s>=0;s--)o=a[s],o&&o.x&&1e3*t===o.x&&o.update({marker:i.getMarkerObject(r)})}},ie=function(e){for(var t=e.length,n=void 0,i=0;i<t;i++)if(n=parseInt(e[i]),I&&n===I||x&&w>x&&n===x||n<x&&parseInt(e[i===t-1?i:i+1])>x){v=parseInt(e[0===i?i:i-1]);break}v||(v=parseInt(e[0]))},re=function(e){var t=C;T&&(E||T)<C?t=T:A&&(t=A);var n=e.length;if(B||S)for(var i=n-1;i>=0;i--)if(parseInt(e[i])===t){y=parseInt(e[i===n-1?i:i+1]);break}se(e,n)},ae=function(e){var t=function(t){return t&&i&&parseInt(i.epoch)<=t&&e[n===r-1?n:n+1].epoch>t},n=void 0,i=void 0,r=e.length;for(n=1;n<r;n++)if(i=e[n],t(I)||t(x)){v=parseInt(e[n-1].epoch);break}},oe=function(e){var t=T&&E<C?T:C,n=e.length,i=void 0,r=void 0;if(B||S)for(var a=n-2;a>=0;a--){if(i=e[a],r=e[a+1],!i)return;if(parseInt(r.epoch)<t){y=C;break}if(parseInt(i.epoch)<=t&&parseInt(r.epoch)>t){y=parseInt(r.epoch);break}}se(e,n)},se=function(e,t){if(j){var n=parseInt(e[t-1].epoch);y=n>w?n:w}y||(y=C)},ce=function(t){e&&t.value&&!new RegExp(t.value).test(b)&&(Y({value:1e3*t.value,label:t.label||"",textLeft:"textLeft"===t.text_left,dashStyle:t.dash_style||"",color:t.color||""},"x"),b.push(t.value))},le=function(){e&&!M&&(ce({value:he()?E:C,text_left:"textLeft",dash_style:"Dash"}),A&&ne(A,"exit"),g.sell_spot||g.exit_tick?$("#waiting_exit_tick").remove():0===$("#waiting_exit_tick").length&&$("#trade_details_message").append($("<div/>",{id:"waiting_exit_tick",text:d("Waiting for exit tick.")})),de())},de=function(){if(e&&(S||B)&&e.series&&e.series[0].options.data.length>0){for(var t=e.series[0].options.data,n=t[t.length-1],i=2;null===n.y;)n=t[t.length-i],i++;var r=parseInt(n.x||n[0]);if(r>1e3*C||r>1e3*(E||T))M=!0;else{var a=he()?E||T:C;e.series[0].addPoint({x:1e3*((a||window.time.unix())+L),y:null})}}},ue=function(){var e=Math.min(O,k)-(x||w),t=void 0;return t=e<=3600?0:e<=7200?120:e<=21600?600:e<=86400?900:e<=432e3?3600:e<=2592e3?14400:86400,[t,e]},pe=function(t){var n=ue()[0],i=e.series[0];if(0===n){var r=t.tick;e.series[0].addPoint({x:1e3*r.epoch,y:1*r.quote})}else{var a=t.ohlc,o=i.data[i.data.length-1];if(!a||!o)return;var s=[1e3*a.open_time,1*a.open,1*a.high,1*a.low,1*a.close];o.x!==s[0]?i.addPoint(s,!0,!0):o.update(s,!0)}},fe=function(e,t){for(var n=new RegExp("license."+g),i=!1,r=0;r<sessionStorage.length;r++)if(n.test(sessionStorage.key(r))){i=!0;break}i||sessionStorage.setItem("license."+e,t)},he=function(){return E&&E<C||!E&&T&&T<C};return{showChart:G}}();e.exports=m},function(e,t,n){"use strict";var i=n(319).localize,r=function(){var e=void 0,t=void 0,n=void 0,r=void 0,a=function(){e="margin-bottom: 3px; margin-left: 10px; height: 0; width: 20px; border: 0; border-bottom: 2px; border-color: #e98024; display: inline-block;",t="margin-left: 10px; display: inline-block; border-radius: 6px;"},o=function(n){switch(e&&t||a(),n){case"start_time":return'<div style="'+e+' border-style: solid;"></div> '+i("Start time")+" ";case"entry_spot":return'<div style="'+t+' border: 3px solid orange; width: 4px; height: 4px;"></div> '+i("Entry spot")+" ";case"exit_spot":return'<div style="'+t+' background-color: orange; width:10px; height: 10px;"></div> '+i("Exit spot")+" ";case"end_time":return'<div style="'+e+' border-style: dashed;"></div> '+i("End time")+" ";case"delay":return'<span class="chart-delay"> '+i("Charting for this underlying is delayed")+" </span>";default:return null}},s=function(e){n=(e?o("delay"):"")+o("start_time")+(history?o("entry_spot")+o("exit_spot"):"")+o("end_time")},c=function(e){r={chart:{backgroundColor:null,height:Math.max(e.height,450),renderTo:e.el,animation:!1,marginLeft:30,marginRight:30},title:{text:e.title,style:{fontSize:"16px"}},credits:{enabled:!1},tooltip:{xDateFormat:e.JPClient?"%Y/%m/%d, %H:%M:%S":"%A, %b %e, %H:%M:%S GMT",valueDecimals:e.decimals.split(".")[1].length||3},subtitle:{text:n,useHTML:!0},xAxis:{labels:{overflow:"justify",format:"{value:%H:%M:%S}"}},yAxis:{opposite:!1,labels:{align:"left"}},series:[{type:e.type,name:e.title,data:e.data,zones:[{value:e.entry_time,color:"#ccc"},{value:e.exit_time,color:""},{color:"#ccc"}],zoneAxis:"x",cropThreshold:1/0,softThreshold:!1,turboThreshold:1/0,connectNulls:!0}],exporting:{enabled:!1},plotOptions:{line:{marker:{radius:2,enabled:!0}},candlestick:{lineColor:"black",color:"red",upColor:"green",upLineColor:"black",shadow:!0}},rangeSelector:{enabled:!1}},e.user_sold&&r.series[0].zones.pop()},l=function(e){return{lang:{thousandsSep:","},global:{timezoneOffset:e?-540:0}}},d=function(e){for(var t=e.childNodes.length,n=document.createTextNode(" "+i("Sell time")+" "),r=0;r<t;r++){var a=e.childNodes[r];/End time/.test(a.nodeValue)&&e.replaceChild(n,a)}},u=function(e,t){var n="x"===t,i={value:e.value,id:e.id||(n?e.value:e.label),label:{text:e.label||""},color:e.color||(n?"#e98024":"green"),zIndex:n?2:1,width:e.width||2,dashStyle:e.dashStyle||"Solid"};return n?i.label.x=e.textLeft?-15:5:i.label.align="center",i},p=function(e,t){$("#analysis_live_chart").html($("<p/>",{class:"error-msg",text:"missing"===e?i("Ticks history returned an empty array."):t}))},f=function(e){var t="entry"===e?"white":"orange";return{fillColor:t,lineColor:"orange",lineWidth:3,radius:4,states:{hover:{fillColor:t,lineColor:"orange",lineWidth:3,radius:4}}}};return{setLabels:s,getLabels:o,setChartOptions:c,getChartOptions:function(){return r},getHighchartOptions:l,replaceExitLabelWithSell:d,getPlotlineOptions:u,showError:p,getMarkerObject:f}}();e.exports=r},function(e,t,n){"use strict";var i=n(319).localize,r=function(e){if(!e||!e.oauth_apps)return{};var t={};return e.oauth_apps.forEach(function(e){t[e.app_id]=e.name}),t[2]="Binary.com Autoexpiry",t},a=function(e){Object.keys(e).forEach(function(t){$("."+t).attr("data-balloon",o(t,e[t]))})},o=function(e,t){return e?i("Transaction performed by [_1] (App ID: [_2])",[t||"",e]):""},s=function(e,t){return e?' class="'+e+'" data-balloon="'+o(e,t)+'"':""};e.exports={buildOauthApps:r,addTooltip:a,showTooltip:s}},function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=n(311),a=n(305),o=n(310),s=n(314).get,c=n(369),l=n(312).State,d=n(320).isVisible,u=n(318),p=n(322).getAppId,f=function(){var e=function(){return/^(1|1098)$/.test(p())},t=function(e){var t={language:s(),pageTitle:f(),pjax:l.get("is_loaded_by_pjax"),url:document.URL,event:"page_load"};o.isLoggedIn()&&(t.visitorId=o.get("loginid")),$.extend(!0,t,e);var n=t.event;return delete t.event,{data:t,event:n}},n=function(n){if(e()&&!c.isLoginPages()){var r=t(n&&"object"===("undefined"==typeof n?"undefined":i(n))?n:null);dataLayer[0]=r.data,dataLayer.push(r.data),dataLayer.push({event:r.event})}},f=function(){var e=/^.+[:-]\s*(.+)$/.exec(document.title);return e&&e[1]?e[1]:document.title},h=function(t){if(e()){var i="1"===localStorage.getItem("GTM_login"),s="1"===localStorage.getItem("GTM_new_account");if(i||s){localStorage.removeItem("GTM_login"),localStorage.removeItem("GTM_new_account");var c=r.getJSON("affiliate_tracking");c&&n({bom_affiliate_token:c.t});var l={visitorId:o.get("loginid"),bom_country:t.country,bom_email:t.email,url:window.location.href,bom_today:Math.floor(Date.now()/1e3),event:s?"new_account":"log_in"};s&&(l.bom_date_joined=l.bom_today),o.get("is_virtual")||(l.bom_age=parseInt((a().unix()-t.date_of_birth)/31557600),l.bom_firstname=t.first_name,l.bom_lastname=t.last_name,l.bom_phone=t.phone),i?u.wait("mt5_login_list").then(function(e){(e.mt5_login_list||[]).forEach(function(e){var t=(o.getMT5AccountType(e.group)||"").replace("real_vanuatu","financial").replace("vanuatu_","").replace("costarica","gaming");t&&(l["mt5_"+t+"_id"]=e.login)}),n(l)}):n(l)}}},m=function(t){if(e()&&!o.get("is_virtual")){var i=t.buy;if(i){var r=t.echo_req.passthrough,a={event:"buy_contract",visitorId:o.get("loginid"),bom_symbol:r.symbol,bom_market:document.getElementById("contract_markets").value,bom_currency:r.currency,bom_contract_type:r.contract_type,bom_contract_id:i.contract_id,bom_transaction_id:i.transaction_id,bom_buy_price:i.buy_price,bom_payout:i.payout};$.extend(a,{bom_amount:r.amount,bom_basis:r.basis,bom_expiry_type:document.getElementById("expiry_type").value}),"duration"===a.bom_expiry_type&&$.extend(a,{bom_duration:r.duration,bom_duration_unit:r.duration_unit}),d(document.getElementById("barrier"))?a.bom_barrier=r.barrier:d(document.getElementById("barrier_high"))&&(a.bom_barrier_high=r.barrier,a.bom_barrier_low=r.barrier2),d(document.getElementById("prediction"))&&(a.bom_prediction=r.barrier),n(a)}}},g=function(e){var t=e.mt5_new_account.mt5_account_type?e.mt5_new_account.account_type+"_"+e.mt5_new_account.mt5_account_type:("demo"===e.mt5_new_account.account_type?"demo":"real")+"_gaming",i={event:"mt5_new_account",bom_email:o.get("email"),bom_country:l.get(["response","get_settings","get_settings","country"]),mt5_last_signup:t};i["mt5_"+t+"_id"]=e.mt5_new_account.login,/demo/.test(t)&&!o.get("is_virtual")&&(i.visitorId=o.get("loginid_array").find(function(e){return!e.real}).id),n(i)};return{pushDataLayer:n,eventHandler:h,pushPurchaseData:m,mt5NewAccount:g,setLoginFlag:function(){e()&&localStorage.setItem("GTM_login","1")}}}();e.exports=f},function(e,t,n){"use strict";var i=n(310),r=n(314).get,a=n(322).getAppId,o=function(){var e=function(){if(!i.isLoggedIn()&&!n()){try{sessionStorage.setItem("redirect_url",window.location.href)}catch(e){window.alert("The website needs features which are not enabled on private mode browsing. Please use normal mode.")}window.location.href=t()}},t=function(){var e=localStorage.getItem("config.server_url"),t=r();return e&&/qa/.test(e)?"https://www."+e.split(".")[1]+".com/oauth2/authorize?app_id="+a()+"&l="+t:"https://oauth.binary.com/oauth2/authorize?app_id="+a()+"&l="+t},n=function(){return/logged_inws/.test(document.URL)};return{redirectToLogin:e,isLoginPages:n,loginUrl:t}}();e.exports=o},function(e,t,n){"use strict";var i=n(371),r=n(310),a=n(319).localize,o=n(313).defaultRedirectUrl,s=n(309).template,c=n(315).jpClient,l=n(315).jpResidence,d=n(318),u=function(){var e=function(e){c()&&!l()&&i.load(o());var t=$("#japan_cashier_container");d.wait("get_settings").then(function(){t.setVisibility(1),"deposit"===e?$("#name_id").text((r.get("loginid")||"JP12345")+" "+(r.get("first_name")||"Joe Bloggs")):"withdraw"===e&&($("#id123-control22598118").val(r.get("loginid")),$("#id123-control22598060").val(r.get("email")))})},t=function(){$(".error-msg").remove();var e=$("#id123-control22598145"),t=e.val(),n=function(t){e.parent().append($("<p/>",{class:"error-msg",text:a(t)}))};return/^([1-9][0-9]{0,5}|1000000)$/.test(t)?!(parseInt(r.get("balance"))<t)||(n("Insufficient balance."),!1):(n(s("Please enter a number between [_1].",["¥1 - ¥1,000,000"])),!1)};return{errorHandler:t,Deposit:{onLoad:function(){e("deposit")}},Withdraw:{onLoad:function(){e("withdraw")}}}}();e.exports=u},function(e,t,n){"use strict";var i=n(314).get,r=n(312).State,a=n(313).urlFor,o=function(){var e=void 0,t={},n={type:"GET",dataType:"html"},o={},s=function(e,n){if(!(window.history&&window.history.pushState&&window.history.replaceState)||navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]\D|WebApps\/.+CFNetwork)/))return void console.error("Unable to initialize router");if(e=$(e),!e.length)return void console.warn("Could not find container");if(!n||!n.length)return void console.warn("No content selector provided");t.container=e,t.content_selector=n;var i=window.location.href,r=document.title,a=e.find(n);a&&a.length&&(window.history.replaceState({url:i},r,i),c(a,i),t.container.trigger("binarypjax:after",a)),$(document).find("#all-accounts a").on("click",l),$(document).on("click","a",l),$(window).on("popstate",p)},c=function(e,t){e.attr("data-page",t.match(".+/(.+).html.*")[1])},l=function(e){var t=e.currentTarget,n=t.href;n.length<=0||!t.classList.contains("no-ajax")&&"_blank"!==t.target&&/\.html/i.test(n)&&(e.which>1||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||location.protocol===t.protocol&&location.hostname===t.hostname&&(e.isDefaultPrevented()||(e.preventDefault(),location.href!==n&&d(n))))},d=function(e,t){r.set("is_loaded_by_pjax",!0),/^http/i.test(e)||(e=a(e));var n=g(e);n?f(e,n,t):u(e,t)},u=function(r,a){var o=i(),s=$.extend(!0,{},$.ajaxSettings,n,{url:r.replace(new RegExp("/"+o+"/","i"),"/"+o.toLowerCase()+"/pjax/")});s.success=function(e){var n={};return n.title=$(e).find("title").text().trim(),n.content=$("<div/>",{html:e}).find(t.content_selector),0===n.title.length||0===n.content.length?void v(r):(c(n.content,r),m(r,n),void f(r,n,a))},h(e),e=$.ajax(s)},p=function(e){var t=e.originalEvent.state?e.originalEvent.state.url:window.location.href;return t&&d(t,!0),!1},f=function(e,n,i){window.history[i?"replaceState":"pushState"]({url:e},n.title,e),t.container.trigger("binarypjax:before"),document.title=n.title,t.container.find(t.content_selector).remove(),t.container.append(n.content.clone()),t.container.trigger("binarypjax:after",n.content),$.scrollTo("body",500)},h=function(e){e&&e.readyState<4&&e.abort()},m=function(e,t){o[_(e)]=t},g=function(e){return o[_(e)]},_=function(e){return e.replace(/(\?|#).*$/,"")},v=function(e){window.history.replaceState(null,"",e),window.location.replace(e)};return{init:s,load:d}}();e.exports=o},function(e,t,n){"use strict";var i=n(305),r=n(313).urlForStatic,a=function(){var e=localStorage.getItem("new_release_reload_time");if(!(e&&+e+6e5>i().valueOf())){localStorage.setItem("new_release_reload_time",i().valueOf());var t=($('script[src*="binary.min.js"],script[src*="binary.js"]').attr("src")||"").split("?")[1],n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===+n.readyState&&200===+n.status){var e=n.responseText;e&&t&&e!==t&&window.location.reload(!0)}},n.open("GET",r()+"version?"+Math.random().toString(36).slice(2),!0),n.send()}};e.exports={check_new_release:a}},,function(e,t,n){var i,r,a,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s,c,l){!function(o){r=[n(1)],i=o,a="function"==typeof i?i.apply(t,r):i,!(a!==l&&(e.exports=a))}(function(e){"use strict";var t,n,i,r,a,d,u,p,f,h,m,g,_,v,y,b,w,x,$,k,C,I,S,E,T,B,A,O,P,L,q,j,D={},M=0;t=function(){return{common:{type:"line",lineColor:"#00f",fillColor:"#cdf",defaultPixelsPerValue:3,width:"auto",height:"auto",composite:!1,tagValuesAttribute:"values",tagOptionsPrefix:"spark",enableTagOptions:!1,enableHighlight:!0,highlightLighten:1.4,tooltipSkipNull:!0,tooltipPrefix:"",tooltipSuffix:"",disableHiddenCheck:!1,numberFormatter:!1,numberDigitGroupCount:3,numberDigitGroupSep:",",numberDecimalMark:".",disableTooltips:!1,disableInteraction:!1},line:{spotColor:"#f80",highlightSpotColor:"#5f5",highlightLineColor:"#f22",spotRadius:1.5,minSpotColor:"#f80",maxSpotColor:"#f80",lineWidth:1,normalRangeMin:l,normalRangeMax:l,normalRangeColor:"#ccc",drawNormalOnTop:!1,chartRangeMin:l,chartRangeMax:l,chartRangeMinX:l,chartRangeMaxX:l,tooltipFormat:new i('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{y}}{{suffix}}')},bar:{barColor:"#3366cc",negBarColor:"#f44",stackedBarColor:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],zeroColor:l,nullColor:l,zeroAxis:!0,barWidth:4,barSpacing:1,chartRangeMax:l,chartRangeMin:l,chartRangeClip:!1,colorMap:l,tooltipFormat:new i('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{value}}{{suffix}}')},tristate:{barWidth:4,barSpacing:1,posBarColor:"#6f6",negBarColor:"#f44",zeroBarColor:"#999",colorMap:{},tooltipFormat:new i('<span style="color: {{color}}">&#9679;</span> {{value:map}}'),tooltipValueLookups:{map:{"-1":"Loss",0:"Draw",1:"Win"}}},discrete:{lineHeight:"auto",thresholdColor:l,thresholdValue:0,chartRangeMax:l,chartRangeMin:l,chartRangeClip:!1,tooltipFormat:new i("{{prefix}}{{value}}{{suffix}}")},bullet:{targetColor:"#f33",targetWidth:3,performanceColor:"#33f",rangeColors:["#d3dafe","#a8b6ff","#7f94ff"],base:l,tooltipFormat:new i("{{fieldkey:fields}} - {{value}}"),tooltipValueLookups:{fields:{r:"Range",p:"Performance",t:"Target"}}},pie:{offset:0,sliceColors:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],borderWidth:0,borderColor:"#000",tooltipFormat:new i('<span style="color: {{color}}">&#9679;</span> {{value}} ({{percent.1}}%)')},box:{raw:!1,boxLineColor:"#000",boxFillColor:"#cdf",whiskerColor:"#000",outlierLineColor:"#333",outlierFillColor:"#fff",medianColor:"#f00",showOutliers:!0,outlierIQR:1.5,spotRadius:1.5,target:l,targetColor:"#4a2",chartRangeMax:l,chartRangeMin:l,tooltipFormat:new i("{{field:fields}}: {{value}}"),tooltipFormatFieldlistKey:"field",tooltipValueLookups:{fields:{lq:"Lower Quartile",med:"Median",uq:"Upper Quartile",lo:"Left Outlier",ro:"Right Outlier",lw:"Left Whisker",rw:"Right Whisker"}}}}},B='.jqstooltip { position: absolute;left: 0;top: 0;visibility: hidden;background: rgb(0, 0, 0) transparent;background-color: rgba(0,0,0,0.6);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";color: white;font: 10px arial, san serif;text-align: left;white-space: nowrap;padding: 5px;border: 1px solid white;box-sizing: content-box;z-index: 10000;}.jqsfield { color: white;font: 10px arial, san serif;text-align: left;}',n=function(){var t,n;return t=function(){this.init.apply(this,arguments)},arguments.length>1?(arguments[0]?(t.prototype=e.extend(new arguments[0],arguments[arguments.length-1]),t._super=arguments[0].prototype):t.prototype=arguments[arguments.length-1],arguments.length>2&&(n=Array.prototype.slice.call(arguments,1,-1),n.unshift(t.prototype),e.extend.apply(e,n))):t.prototype=arguments[0],t.prototype.cls=t,t},e.SPFormatClass=i=n({fre:/\{\{([\w.]+?)(:(.+?))?\}\}/g,precre:/(\w+)\.(\d+)/,init:function(e,t){this.format=e,this.fclass=t},render:function(e,t,n){var i,r,a,o,s,c=this,d=e;return this.format.replace(this.fre,function(){var e;return r=arguments[1],a=arguments[3],i=c.precre.exec(r),i?(s=i[2],r=i[1]):s=!1,o=d[r],o===l?"":a&&t&&t[a]?(e=t[a],e.get?t[a].get(o)||o:t[a][o]||o):(f(o)&&(o=n.get("numberFormatter")?n.get("numberFormatter")(o):v(o,s,n.get("numberDigitGroupCount"),n.get("numberDigitGroupSep"),n.get("numberDecimalMark"))),o)})}}),e.spformat=function(e,t){return new i(e,t)},r=function(e,t,n){return e<t?t:e>n?n:e},a=function(e,t){var n;return 2===t?(n=c.floor(e.length/2),e.length%2?e[n]:(e[n-1]+e[n])/2):e.length%2?(n=(e.length*t+t)/4,n%1?(e[c.floor(n)]+e[c.floor(n)-1])/2:e[n-1]):(n=(e.length*t+2)/4,n%1?(e[c.floor(n)]+e[c.floor(n)-1])/2:e[n-1])},d=function(e){var t;switch(e){case"undefined":e=l;break;case"null":e=null;break;case"true":e=!0;break;case"false":e=!1;break;default:t=parseFloat(e),e==t&&(e=t)}return e},u=function(e){var t,n=[];for(t=e.length;t--;)n[t]=d(e[t]);return n},p=function(e,t){var n,i,r=[];for(n=0,i=e.length;n<i;n++)e[n]!==t&&r.push(e[n]);return r},f=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},v=function(t,n,i,r,a){var o,s;for(t=(n===!1?parseFloat(t).toString():t.toFixed(n)).split(""),o=(o=e.inArray(".",t))<0?t.length:o,o<t.length&&(t[o]=a),s=o-i;s>0;s-=i)t.splice(s,0,r);return t.join("")},h=function(e,t,n){var i;for(i=t.length;i--;)if((!n||null!==t[i])&&t[i]!==e)return!1;return!0},m=function(e){var t,n=0;for(t=e.length;t--;)n+="number"==typeof e[t]?e[t]:0;return n},_=function(t){return e.isArray(t)?t:[t]},g=function(e){var t,n;if(s.createStyleSheet)try{return void(s.createStyleSheet().cssText=e)}catch(e){n=!0}t=s.createElement("style"),t.type="text/css",s.getElementsByTagName("head")[0].appendChild(t),n?s.styleSheets[s.styleSheets.length-1].cssText=e:t["string"==typeof s.body.style.WebkitAppearance?"innerText":"innerHTML"]=e},e.fn.simpledraw=function(t,n,i,r){var a,o;if(i&&(a=this.data("_jqs_vcanvas")))return a;if(e.fn.sparkline.canvas===!1)return!1;if(e.fn.sparkline.canvas===l){var c=s.createElement("canvas");if(c.getContext&&c.getContext("2d"))e.fn.sparkline.canvas=function(e,t,n,i){return new L(e,t,n,i)};else{if(!s.namespaces||s.namespaces.v)return e.fn.sparkline.canvas=!1,!1;s.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML"),e.fn.sparkline.canvas=function(e,t,n,i){return new q(e,t,n)}}}return t===l&&(t=e(this).innerWidth()),n===l&&(n=e(this).innerHeight()),a=e.fn.sparkline.canvas(t,n,this,r),o=e(this).data("_jqs_mhandler"),o&&o.registerCanvas(a),a},e.fn.cleardraw=function(){var e=this.data("_jqs_vcanvas");e&&e.reset()},e.RangeMapClass=y=n({init:function(e){var t,n,i=[];for(t in e)e.hasOwnProperty(t)&&"string"==typeof t&&t.indexOf(":")>-1&&(n=t.split(":"),n[0]=0===n[0].length?-(1/0):parseFloat(n[0]),n[1]=0===n[1].length?1/0:parseFloat(n[1]),n[2]=e[t],i.push(n));this.map=e,this.rangelist=i||!1},get:function(e){var t,n,i,r=this.rangelist;if((i=this.map[e])!==l)return i;if(r)for(t=r.length;t--;)if(n=r[t],n[0]<=e&&n[1]>=e)return n[2];return l}}),e.range_map=function(e){return new y(e)},b=n({init:function(t,n){var i=e(t);this.$el=i,this.options=n,this.currentPageX=0,this.currentPageY=0,this.el=t,this.splist=[],this.tooltip=null,this.over=!1,this.displayTooltips=!n.get("disableTooltips"),this.highlightEnabled=!n.get("disableHighlight")},registerSparkline:function(e){this.splist.push(e),this.over&&this.updateDisplay()},registerCanvas:function(t){var n=e(t.canvas);this.canvas=t,this.$canvas=n,n.mouseenter(e.proxy(this.mouseenter,this)),n.mouseleave(e.proxy(this.mouseleave,this)),n.click(e.proxy(this.mouseclick,this))},reset:function(e){this.splist=[],this.tooltip&&e&&(this.tooltip.remove(),this.tooltip=l)},mouseclick:function(t){var n=e.Event("sparklineClick");n.originalEvent=t,n.sparklines=this.splist,this.$el.trigger(n)},mouseenter:function(t){e(s.body).unbind("mousemove.jqs"),e(s.body).bind("mousemove.jqs",e.proxy(this.mousemove,this)),this.over=!0,this.currentPageX=t.pageX,this.currentPageY=t.pageY,this.currentEl=t.target,!this.tooltip&&this.displayTooltips&&(this.tooltip=new w(this.options),this.tooltip.updatePosition(t.pageX,t.pageY)),this.updateDisplay()},mouseleave:function(){e(s.body).unbind("mousemove.jqs");var t,n,i=this.splist,r=i.length,a=!1;for(this.over=!1,this.currentEl=null,this.tooltip&&(this.tooltip.remove(),this.tooltip=null),n=0;n<r;n++)t=i[n],t.clearRegionHighlight()&&(a=!0);a&&this.canvas.render()},mousemove:function(e){this.currentPageX=e.pageX,this.currentPageY=e.pageY,this.currentEl=e.target,this.tooltip&&this.tooltip.updatePosition(e.pageX,e.pageY),this.updateDisplay()},updateDisplay:function(){var t,n,i,r,a,o=this.splist,s=o.length,c=!1,l=this.$canvas.offset(),d=this.currentPageX-l.left,u=this.currentPageY-l.top;if(this.over){for(i=0;i<s;i++)n=o[i],r=n.setRegionHighlight(this.currentEl,d,u),r&&(c=!0);if(c){if(a=e.Event("sparklineRegionChange"),a.sparklines=this.splist,this.$el.trigger(a),this.tooltip){for(t="",i=0;i<s;i++)n=o[i],t+=n.getCurrentRegionTooltip();this.tooltip.setContent(t)}this.disableHighlight||this.canvas.render()}null===r&&this.mouseleave()}}}),w=n({sizeStyle:"position: static !important;display: block !important;visibility: hidden !important;float: left !important;",init:function(t){var n,i=t.get("tooltipClassname","jqstooltip"),r=this.sizeStyle;this.container=t.get("tooltipContainer")||s.body,this.tooltipOffsetX=t.get("tooltipOffsetX",10),this.tooltipOffsetY=t.get("tooltipOffsetY",12),e("#jqssizetip").remove(),e("#jqstooltip").remove(),this.sizetip=e("<div/>",{id:"jqssizetip",style:r,class:i}),this.tooltip=e("<div/>",{id:"jqstooltip",class:i}).appendTo(this.container),n=this.tooltip.offset(),this.offsetLeft=n.left,this.offsetTop=n.top,this.hidden=!0,e(window).unbind("resize.jqs scroll.jqs"),e(window).bind("resize.jqs scroll.jqs",e.proxy(this.updateWindowDims,this)),this.updateWindowDims()},updateWindowDims:function(){this.scrollTop=e(window).scrollTop(),this.scrollLeft=e(window).scrollLeft(),this.scrollRight=this.scrollLeft+e(window).width(),this.updatePosition()},getSize:function(e){this.sizetip.html(e).appendTo(this.container),this.width=this.sizetip.width()+1,this.height=this.sizetip.height(),this.sizetip.remove()},setContent:function(e){return e?(this.getSize(e),this.tooltip.html(e).css({width:this.width,height:this.height,visibility:"visible"}),void(this.hidden&&(this.hidden=!1,this.updatePosition()))):(this.tooltip.css("visibility","hidden"),void(this.hidden=!0))},updatePosition:function(e,t){if(e===l){if(this.mousex===l)return;e=this.mousex-this.offsetLeft,t=this.mousey-this.offsetTop}else this.mousex=e-=this.offsetLeft,this.mousey=t-=this.offsetTop;this.height&&this.width&&!this.hidden&&(t-=this.height+this.tooltipOffsetY,e+=this.tooltipOffsetX,t<this.scrollTop&&(t=this.scrollTop),e<this.scrollLeft?e=this.scrollLeft:e+this.width>this.scrollRight&&(e=this.scrollRight-this.width),this.tooltip.css({left:e,top:t}))},remove:function(){this.tooltip.remove(),this.sizetip.remove(),this.sizetip=this.tooltip=l,e(window).unbind("resize.jqs scroll.jqs")}}),A=function(){g(B)},e(A),j=[],e.fn.sparkline=function(t,n){return this.each(function(){var i,r,a=new e.fn.sparkline.options(this,n),o=e(this);if(i=function(){var n,i,r,c,d,u,p;return"html"===t||t===l?(p=this.getAttribute(a.get("tagValuesAttribute")),p!==l&&null!==p||(p=o.html()),n=p.replace(/(^\s*<!--)|(-->\s*$)|\s+/g,"").split(",")):n=t,i="auto"===a.get("width")?n.length*a.get("defaultPixelsPerValue"):a.get("width"),"auto"===a.get("height")?a.get("composite")&&e.data(this,"_jqs_vcanvas")||(c=s.createElement("span"),c.innerHTML="a",o.html(c),r=e(c).innerHeight()||e(c).height(),e(c).remove(),c=null):r=a.get("height"),a.get("disableInteraction")?d=!1:(d=e.data(this,"_jqs_mhandler"),d?a.get("composite")||d.reset():(d=new b(this,a),e.data(this,"_jqs_mhandler",d))),a.get("composite")&&!e.data(this,"_jqs_vcanvas")?void(e.data(this,"_jqs_errnotify")||(window.alert("Attempted to attach a composite sparkline to an element with no existing sparkline"),e.data(this,"_jqs_errnotify",!0))):(u=new(e.fn.sparkline[a.get("type")])(this,n,a,i,r),u.render(),void(d&&d.registerSparkline(u)))},e(this).html()&&!a.get("disableHiddenCheck")&&e(this).is(":hidden")||!e(this).parents("body").length){if(!a.get("composite")&&e.data(this,"_jqs_pending"))for(r=j.length;r;r--)j[r-1][0]==this&&j.splice(r-1,1);j.push([this,i]),e.data(this,"_jqs_pending",!0)}else i.call(this)})},e.fn.sparkline.defaults=t(),e.sparkline_display_visible=function(){var t,n,i,r=[];for(n=0,i=j.length;n<i;n++)t=j[n][0],e(t).is(":visible")&&!e(t).parents().is(":hidden")?(j[n][1].call(t),e.data(j[n][0],"_jqs_pending",!1),r.push(n)):e(t).closest("html").length||e.data(t,"_jqs_pending")||(e.data(j[n][0],"_jqs_pending",!1),r.push(n));for(n=r.length;n;n--)j.splice(r[n-1],1)},e.fn.sparkline.options=n({init:function(t,n){var i,r,a,o;this.userOptions=n=n||{},this.tag=t,this.tagValCache={},r=e.fn.sparkline.defaults,a=r.common,this.tagOptionsPrefix=n.enableTagOptions&&(n.tagOptionsPrefix||a.tagOptionsPrefix),o=this.getTagSetting("type"),i=o===D?r[n.type||a.type]:r[o],this.mergedOptions=e.extend({},a,i,n)},getTagSetting:function(e){var t,n,i,r,a=this.tagOptionsPrefix;if(a===!1||a===l)return D;if(this.tagValCache.hasOwnProperty(e))t=this.tagValCache.key;else{if(t=this.tag.getAttribute(a+e),t===l||null===t)t=D;else if("["===t.substr(0,1))for(t=t.substr(1,t.length-2).split(","),n=t.length;n--;)t[n]=d(t[n].replace(/(^\s*)|(\s*$)/g,""));else if("{"===t.substr(0,1))for(i=t.substr(1,t.length-2).split(","),t={},n=i.length;n--;)r=i[n].split(":",2),t[r[0].replace(/(^\s*)|(\s*$)/g,"")]=d(r[1].replace(/(^\s*)|(\s*$)/g,""));else t=d(t);this.tagValCache.key=t}return t},get:function(e,t){var n,i=this.getTagSetting(e);return i!==D?i:(n=this.mergedOptions[e])===l?t:n}}),e.fn.sparkline._base=n({disabled:!1,init:function(t,n,i,r,a){this.el=t,this.$el=e(t),this.values=n,this.options=i,this.width=r,this.height=a,this.currentRegion=l},initTarget:function(){var e=!this.options.get("disableInteraction");(this.target=this.$el.simpledraw(this.width,this.height,this.options.get("composite"),e))?(this.canvasWidth=this.target.pixelWidth,this.canvasHeight=this.target.pixelHeight):this.disabled=!0},render:function(){return!this.disabled||(this.el.innerHTML="",!1)},getRegion:function(e,t){},setRegionHighlight:function(e,t,n){var i,r=this.currentRegion,a=!this.options.get("disableHighlight");return t>this.canvasWidth||n>this.canvasHeight||t<0||n<0?null:(i=this.getRegion(e,t,n),r!==i&&(r!==l&&a&&this.removeHighlight(),this.currentRegion=i,i!==l&&a&&this.renderHighlight(),
!0))},clearRegionHighlight:function(){return this.currentRegion!==l&&(this.removeHighlight(),this.currentRegion=l,!0)},renderHighlight:function(){this.changeHighlight(!0)},removeHighlight:function(){this.changeHighlight(!1)},changeHighlight:function(e){},getCurrentRegionTooltip:function(){var t,n,r,a,o,s,c,d,u,p,f,h,m,g,_=this.options,v="",y=[];if(this.currentRegion===l)return"";if(t=this.getCurrentRegionFields(),f=_.get("tooltipFormatter"))return f(this,_,t);if(_.get("tooltipChartTitle")&&(v+='<div class="jqs jqstitle">'+_.get("tooltipChartTitle")+"</div>\n"),n=this.options.get("tooltipFormat"),!n)return"";if(e.isArray(n)||(n=[n]),e.isArray(t)||(t=[t]),c=this.options.get("tooltipFormatFieldlist"),d=this.options.get("tooltipFormatFieldlistKey"),c&&d){for(u=[],s=t.length;s--;)p=t[s][d],(g=e.inArray(p,c))!=-1&&(u[g]=t[s]);t=u}for(r=n.length,m=t.length,s=0;s<r;s++)for(h=n[s],"string"==typeof h&&(h=new i(h)),a=h.fclass||"jqsfield",g=0;g<m;g++)t[g].isNull&&_.get("tooltipSkipNull")||(e.extend(t[g],{prefix:_.get("tooltipPrefix"),suffix:_.get("tooltipSuffix")}),o=h.render(t[g],_.get("tooltipValueLookups"),_),y.push('<div class="'+a+'">'+o+"</div>"));return y.length?v+y.join("\n"):""},getCurrentRegionFields:function(){},calcHighlightColor:function(e,t){var n,i,a,o,s=t.get("highlightColor"),l=t.get("highlightLighten");if(s)return s;if(l&&(n=/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(e)||/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(e))){for(a=[],i=4===e.length?16:1,o=0;o<3;o++)a[o]=r(c.round(parseInt(n[o+1],16)*i*l),0,255);return"rgb("+a.join(",")+")"}return e}}),x={changeHighlight:function(t){var n,i=this.currentRegion,r=this.target,a=this.regionShapes[i];a&&(n=this.renderRegion(i,t),e.isArray(n)||e.isArray(a)?(r.replaceWithShapes(a,n),this.regionShapes[i]=e.map(n,function(e){return e.id})):(r.replaceWithShape(a,n),this.regionShapes[i]=n.id))},render:function(){var t,n,i,r,a=this.values,o=this.target,s=this.regionShapes;if(this.cls._super.render.call(this)){for(i=a.length;i--;)if(t=this.renderRegion(i))if(e.isArray(t)){for(n=[],r=t.length;r--;)t[r].append(),n.push(t[r].id);s[i]=n}else t.append(),s[i]=t.id;else s[i]=null;o.render()}}},e.fn.sparkline.line=$=n(e.fn.sparkline._base,{type:"line",init:function(e,t,n,i,r){$._super.init.call(this,e,t,n,i,r),this.vertices=[],this.regionMap=[],this.xvalues=[],this.yvalues=[],this.yminmax=[],this.hightlightSpotId=null,this.lastShapeId=null,this.initTarget()},getRegion:function(e,t,n){var i,r=this.regionMap;for(i=r.length;i--;)if(null!==r[i]&&t>=r[i][0]&&t<=r[i][1])return r[i][2];return l},getCurrentRegionFields:function(){var e=this.currentRegion;return{isNull:null===this.yvalues[e],x:this.xvalues[e],y:this.yvalues[e],color:this.options.get("lineColor"),fillColor:this.options.get("fillColor"),offset:e}},renderHighlight:function(){var e,t,n=this.currentRegion,i=this.target,r=this.vertices[n],a=this.options,o=a.get("spotRadius"),s=a.get("highlightSpotColor"),c=a.get("highlightLineColor");r&&(o&&s&&(e=i.drawCircle(r[0],r[1],o,l,s),this.highlightSpotId=e.id,i.insertAfterShape(this.lastShapeId,e)),c&&(t=i.drawLine(r[0],this.canvasTop,r[0],this.canvasTop+this.canvasHeight,c),this.highlightLineId=t.id,i.insertAfterShape(this.lastShapeId,t)))},removeHighlight:function(){var e=this.target;this.highlightSpotId&&(e.removeShapeId(this.highlightSpotId),this.highlightSpotId=null),this.highlightLineId&&(e.removeShapeId(this.highlightLineId),this.highlightLineId=null)},scanValues:function(){var e,t,n,i,r,a=this.values,s=a.length,l=this.xvalues,d=this.yvalues,u=this.yminmax;for(e=0;e<s;e++)t=a[e],n="string"==typeof a[e],i="object"===o(a[e])&&a[e]instanceof Array,r=n&&a[e].split(":"),n&&2===r.length?(l.push(Number(r[0])),d.push(Number(r[1])),u.push(Number(r[1]))):i?(l.push(t[0]),d.push(t[1]),u.push(t[1])):(l.push(e),null===a[e]||"null"===a[e]?d.push(null):(d.push(Number(t)),u.push(Number(t))));this.options.get("xvalues")&&(l=this.options.get("xvalues")),this.maxy=this.maxyorg=c.max.apply(c,u),this.miny=this.minyorg=c.min.apply(c,u),this.maxx=c.max.apply(c,l),this.minx=c.min.apply(c,l),this.xvalues=l,this.yvalues=d,this.yminmax=u},processRangeOptions:function(){var e=this.options,t=e.get("normalRangeMin"),n=e.get("normalRangeMax");t!==l&&(t<this.miny&&(this.miny=t),n>this.maxy&&(this.maxy=n)),e.get("chartRangeMin")!==l&&(e.get("chartRangeClip")||e.get("chartRangeMin")<this.miny)&&(this.miny=e.get("chartRangeMin")),e.get("chartRangeMax")!==l&&(e.get("chartRangeClip")||e.get("chartRangeMax")>this.maxy)&&(this.maxy=e.get("chartRangeMax")),e.get("chartRangeMinX")!==l&&(e.get("chartRangeClipX")||e.get("chartRangeMinX")<this.minx)&&(this.minx=e.get("chartRangeMinX")),e.get("chartRangeMaxX")!==l&&(e.get("chartRangeClipX")||e.get("chartRangeMaxX")>this.maxx)&&(this.maxx=e.get("chartRangeMaxX"))},drawNormalRange:function(e,t,n,i,r){var a=this.options.get("normalRangeMin"),o=this.options.get("normalRangeMax"),s=t+c.round(n-n*((o-this.miny)/r)),d=c.round(n*(o-a)/r);this.target.drawRect(e,s,i,d,l,this.options.get("normalRangeColor")).append()},render:function(){var t,n,i,r,a,o,s,d,u,p,f,h,m,g,_,v,b,w,x,k,C,I,S,E,T,B=this.options,A=this.target,O=this.canvasWidth,P=this.canvasHeight,L=this.vertices,q=B.get("spotRadius"),j=this.regionMap;if($._super.render.call(this)&&(this.scanValues(),this.processRangeOptions(),S=this.xvalues,E=this.yvalues,this.yminmax.length&&!(this.yvalues.length<2))){for(r=a=0,t=this.maxx-this.minx===0?1:this.maxx-this.minx,n=this.maxy-this.miny===0?1:this.maxy-this.miny,i=this.yvalues.length-1,q&&(O<4*q||P<4*q)&&(q=0),q&&(C=B.get("highlightSpotColor")&&!B.get("disableInteraction"),(C||B.get("minSpotColor")||B.get("spotColor")&&E[i]===this.miny)&&(P-=c.ceil(q)),(C||B.get("maxSpotColor")||B.get("spotColor")&&E[i]===this.maxy)&&(P-=c.ceil(q),r+=c.ceil(q)),(C||(B.get("minSpotColor")||B.get("maxSpotColor"))&&(E[0]===this.miny||E[0]===this.maxy))&&(a+=c.ceil(q),O-=c.ceil(q)),(C||B.get("spotColor")||B.get("minSpotColor")||B.get("maxSpotColor")&&(E[i]===this.miny||E[i]===this.maxy))&&(O-=c.ceil(q))),P--,B.get("normalRangeMin")===l||B.get("drawNormalOnTop")||this.drawNormalRange(a,r,P,O,n),s=[],d=[s],g=_=null,v=E.length,T=0;T<v;T++)u=S[T],f=S[T+1],p=E[T],h=a+c.round((u-this.minx)*(O/t)),m=T<v-1?a+c.round((f-this.minx)*(O/t)):O,_=h+(m-h)/2,j[T]=[g||0,_,T],g=_,null===p?T&&(null!==E[T-1]&&(s=[],d.push(s)),L.push(null)):(p<this.miny&&(p=this.miny),p>this.maxy&&(p=this.maxy),s.length||s.push([h,r+P]),o=[h,r+c.round(P-P*((p-this.miny)/n))],s.push(o),L.push(o));for(b=[],w=[],x=d.length,T=0;T<x;T++)s=d[T],s.length&&(B.get("fillColor")&&(s.push([s[s.length-1][0],r+P]),w.push(s.slice(0)),s.pop()),s.length>2&&(s[0]=[s[0][0],s[1][1]]),b.push(s));for(x=w.length,T=0;T<x;T++)A.drawShape(w[T],B.get("fillColor"),B.get("fillColor")).append();for(B.get("normalRangeMin")!==l&&B.get("drawNormalOnTop")&&this.drawNormalRange(a,r,P,O,n),x=b.length,T=0;T<x;T++)A.drawShape(b[T],B.get("lineColor"),l,B.get("lineWidth")).append();if(q&&B.get("valueSpots"))for(k=B.get("valueSpots"),k.get===l&&(k=new y(k)),T=0;T<v;T++)I=k.get(E[T]),I&&A.drawCircle(a+c.round((S[T]-this.minx)*(O/t)),r+c.round(P-P*((E[T]-this.miny)/n)),q,l,I).append();q&&B.get("spotColor")&&null!==E[i]&&A.drawCircle(a+c.round((S[S.length-1]-this.minx)*(O/t)),r+c.round(P-P*((E[i]-this.miny)/n)),q,l,B.get("spotColor")).append(),this.maxy!==this.minyorg&&(q&&B.get("minSpotColor")&&(u=S[e.inArray(this.minyorg,E)],A.drawCircle(a+c.round((u-this.minx)*(O/t)),r+c.round(P-P*((this.minyorg-this.miny)/n)),q,l,B.get("minSpotColor")).append()),q&&B.get("maxSpotColor")&&(u=S[e.inArray(this.maxyorg,E)],A.drawCircle(a+c.round((u-this.minx)*(O/t)),r+c.round(P-P*((this.maxyorg-this.miny)/n)),q,l,B.get("maxSpotColor")).append())),this.lastShapeId=A.getLastShapeId(),this.canvasTop=r,A.render()}}}),e.fn.sparkline.bar=k=n(e.fn.sparkline._base,x,{type:"bar",init:function(t,n,i,a,o){var s,f,h,m,g,_,v,b,w,x,$,C,I,S,E,T,B,A,O,P,L,q,j=parseInt(i.get("barWidth"),10),D=parseInt(i.get("barSpacing"),10),M=i.get("chartRangeMin"),R=i.get("chartRangeMax"),V=i.get("chartRangeClip"),N=1/0,F=-(1/0);for(k._super.init.call(this,t,n,i,a,o),_=0,v=n.length;_<v;_++)P=n[_],s="string"==typeof P&&P.indexOf(":")>-1,(s||e.isArray(P))&&(E=!0,s&&(P=n[_]=u(P.split(":"))),P=p(P,null),f=c.min.apply(c,P),h=c.max.apply(c,P),f<N&&(N=f),h>F&&(F=h));this.stacked=E,this.regionShapes={},this.barWidth=j,this.barSpacing=D,this.totalBarWidth=j+D,this.width=a=n.length*j+(n.length-1)*D,this.initTarget(),V&&(I=M===l?-(1/0):M,S=R===l?1/0:R),g=[],m=E?[]:g;var H=[],z=[];for(_=0,v=n.length;_<v;_++)if(E)for(T=n[_],n[_]=O=[],H[_]=0,m[_]=z[_]=0,B=0,A=T.length;B<A;B++)P=O[B]=V?r(T[B],I,S):T[B],null!==P&&(P>0&&(H[_]+=P),N<0&&F>0?P<0?z[_]+=c.abs(P):m[_]+=P:m[_]+=c.abs(P-(P<0?F:N)),g.push(P));else P=V?r(n[_],I,S):n[_],P=n[_]=d(P),null!==P&&g.push(P);this.max=C=c.max.apply(c,g),this.min=$=c.min.apply(c,g),this.stackMax=F=E?c.max.apply(c,H):C,this.stackMin=N=E?c.min.apply(c,g):$,i.get("chartRangeMin")!==l&&(i.get("chartRangeClip")||i.get("chartRangeMin")<$)&&($=i.get("chartRangeMin")),i.get("chartRangeMax")!==l&&(i.get("chartRangeClip")||i.get("chartRangeMax")>C)&&(C=i.get("chartRangeMax")),this.zeroAxis=w=i.get("zeroAxis",!0),x=$<=0&&C>=0&&w?0:0==w?$:$>0?$:C,this.xaxisOffset=x,b=E?c.max.apply(c,m)+c.max.apply(c,z):C-$,this.canvasHeightEf=w&&$<0?this.canvasHeight-2:this.canvasHeight-1,$<x?(q=E&&C>=0?F:C,L=(q-x)/b*this.canvasHeight,L!==c.ceil(L)&&(this.canvasHeightEf-=2,L=c.ceil(L))):L=this.canvasHeight,this.yoffset=L,e.isArray(i.get("colorMap"))?(this.colorMapByIndex=i.get("colorMap"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=i.get("colorMap"),this.colorMapByValue&&this.colorMapByValue.get===l&&(this.colorMapByValue=new y(this.colorMapByValue))),this.range=b},getRegion:function(e,t,n){var i=c.floor(t/this.totalBarWidth);return i<0||i>=this.values.length?l:i},getCurrentRegionFields:function(){var e,t,n=this.currentRegion,i=_(this.values[n]),r=[];for(t=i.length;t--;)e=i[t],r.push({isNull:null===e,value:e,color:this.calcColor(t,e,n),offset:n});return r},calcColor:function(t,n,i){var r,a,o=this.colorMapByIndex,s=this.colorMapByValue,c=this.options;return r=this.stacked?c.get("stackedBarColor"):n<0?c.get("negBarColor"):c.get("barColor"),0===n&&c.get("zeroColor")!==l&&(r=c.get("zeroColor")),s&&(a=s.get(n))?r=a:o&&o.length>i&&(r=o[i]),e.isArray(r)?r[t%r.length]:r},renderRegion:function(t,n){var i,r,a,o,s,d,u,p,f,m,g=this.values[t],_=this.options,v=this.xaxisOffset,y=[],b=this.range,w=this.stacked,x=this.target,$=t*this.totalBarWidth,k=this.canvasHeightEf,C=this.yoffset;if(g=e.isArray(g)?g:[g],u=g.length,p=g[0],o=h(null,g),m=h(v,g,!0),o)return _.get("nullColor")?(a=n?_.get("nullColor"):this.calcHighlightColor(_.get("nullColor"),_),i=C>0?C-1:C,x.drawRect($,i,this.barWidth-1,0,a,a)):l;for(s=C,d=0;d<u;d++){if(p=g[d],w&&p===v){if(!m||f)continue;f=!0}r=b>0?c.floor(k*(c.abs(p-v)/b))+1:1,p<v||p===v&&0===C?(i=s,s+=r):(i=C-r,C-=r),a=this.calcColor(d,p,t),n&&(a=this.calcHighlightColor(a,_)),y.push(x.drawRect($,i,this.barWidth-1,r-1,a,a))}return 1===y.length?y[0]:y}}),e.fn.sparkline.tristate=C=n(e.fn.sparkline._base,x,{type:"tristate",init:function(t,n,i,r,a){var o=parseInt(i.get("barWidth"),10),s=parseInt(i.get("barSpacing"),10);C._super.init.call(this,t,n,i,r,a),this.regionShapes={},this.barWidth=o,this.barSpacing=s,this.totalBarWidth=o+s,this.values=e.map(n,Number),this.width=r=n.length*o+(n.length-1)*s,e.isArray(i.get("colorMap"))?(this.colorMapByIndex=i.get("colorMap"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=i.get("colorMap"),this.colorMapByValue&&this.colorMapByValue.get===l&&(this.colorMapByValue=new y(this.colorMapByValue))),this.initTarget()},getRegion:function(e,t,n){return c.floor(t/this.totalBarWidth)},getCurrentRegionFields:function(){var e=this.currentRegion;return{isNull:this.values[e]===l,value:this.values[e],color:this.calcColor(this.values[e],e),offset:e}},calcColor:function(e,t){var n,i,r=this.values,a=this.options,o=this.colorMapByIndex,s=this.colorMapByValue;return n=s&&(i=s.get(e))?i:o&&o.length>t?o[t]:r[t]<0?a.get("negBarColor"):r[t]>0?a.get("posBarColor"):a.get("zeroBarColor")},renderRegion:function(e,t){var n,i,r,a,o,s,l=this.values,d=this.options,u=this.target;if(n=u.pixelHeight,r=c.round(n/2),a=e*this.totalBarWidth,l[e]<0?(o=r,i=r-1):l[e]>0?(o=0,i=r-1):(o=r-1,i=2),s=this.calcColor(l[e],e),null!==s)return t&&(s=this.calcHighlightColor(s,d)),u.drawRect(a,o,this.barWidth-1,i-1,s,s)}}),e.fn.sparkline.discrete=I=n(e.fn.sparkline._base,x,{type:"discrete",init:function(t,n,i,r,a){I._super.init.call(this,t,n,i,r,a),this.regionShapes={},this.values=n=e.map(n,Number),this.min=c.min.apply(c,n),this.max=c.max.apply(c,n),this.range=this.max-this.min,this.width=r="auto"===i.get("width")?2*n.length:this.width,this.interval=c.floor(r/n.length),this.itemWidth=r/n.length,i.get("chartRangeMin")!==l&&(i.get("chartRangeClip")||i.get("chartRangeMin")<this.min)&&(this.min=i.get("chartRangeMin")),i.get("chartRangeMax")!==l&&(i.get("chartRangeClip")||i.get("chartRangeMax")>this.max)&&(this.max=i.get("chartRangeMax")),this.initTarget(),this.target&&(this.lineHeight="auto"===i.get("lineHeight")?c.round(.3*this.canvasHeight):i.get("lineHeight"))},getRegion:function(e,t,n){return c.floor(t/this.itemWidth)},getCurrentRegionFields:function(){var e=this.currentRegion;return{isNull:this.values[e]===l,value:this.values[e],offset:e}},renderRegion:function(e,t){var n,i,a,o,s=this.values,l=this.options,d=this.min,u=this.max,p=this.range,f=this.interval,h=this.target,m=this.canvasHeight,g=this.lineHeight,_=m-g;return i=r(s[e],d,u),o=e*f,n=c.round(_-_*((i-d)/p)),a=l.get("thresholdColor")&&i<l.get("thresholdValue")?l.get("thresholdColor"):l.get("lineColor"),t&&(a=this.calcHighlightColor(a,l)),h.drawLine(o,n,o,n+g,a)}}),e.fn.sparkline.bullet=S=n(e.fn.sparkline._base,{type:"bullet",init:function(e,t,n,i,r){var a,o,s;S._super.init.call(this,e,t,n,i,r),this.values=t=u(t),s=t.slice(),s[0]=null===s[0]?s[2]:s[0],s[1]=null===t[1]?s[2]:s[1],a=c.min.apply(c,t),o=c.max.apply(c,t),a=n.get("base")===l?a<0?a:0:n.get("base"),this.min=a,this.max=o,this.range=o-a,this.shapes={},this.valueShapes={},this.regiondata={},this.width=i="auto"===n.get("width")?"4.0em":i,this.target=this.$el.simpledraw(i,r,n.get("composite")),t.length||(this.disabled=!0),this.initTarget()},getRegion:function(e,t,n){var i=this.target.getShapeAt(e,t,n);return i!==l&&this.shapes[i]!==l?this.shapes[i]:l},getCurrentRegionFields:function(){var e=this.currentRegion;return{fieldkey:e.substr(0,1),value:this.values[e.substr(1)],region:e}},changeHighlight:function(e){var t,n=this.currentRegion,i=this.valueShapes[n];switch(delete this.shapes[i],n.substr(0,1)){case"r":t=this.renderRange(n.substr(1),e);break;case"p":t=this.renderPerformance(e);break;case"t":t=this.renderTarget(e)}this.valueShapes[n]=t.id,this.shapes[t.id]=n,this.target.replaceWithShape(i,t)},renderRange:function(e,t){var n=this.values[e],i=c.round(this.canvasWidth*((n-this.min)/this.range)),r=this.options.get("rangeColors")[e-2];return t&&(r=this.calcHighlightColor(r,this.options)),this.target.drawRect(0,0,i-1,this.canvasHeight-1,r,r)},renderPerformance:function(e){var t=this.values[1],n=c.round(this.canvasWidth*((t-this.min)/this.range)),i=this.options.get("performanceColor");return e&&(i=this.calcHighlightColor(i,this.options)),this.target.drawRect(0,c.round(.3*this.canvasHeight),n-1,c.round(.4*this.canvasHeight)-1,i,i)},renderTarget:function(e){var t=this.values[0],n=c.round(this.canvasWidth*((t-this.min)/this.range)-this.options.get("targetWidth")/2),i=c.round(.1*this.canvasHeight),r=this.canvasHeight-2*i,a=this.options.get("targetColor");return e&&(a=this.calcHighlightColor(a,this.options)),this.target.drawRect(n,i,this.options.get("targetWidth")-1,r-1,a,a)},render:function(){var e,t,n=this.values.length,i=this.target;if(S._super.render.call(this)){for(e=2;e<n;e++)t=this.renderRange(e).append(),this.shapes[t.id]="r"+e,this.valueShapes["r"+e]=t.id;null!==this.values[1]&&(t=this.renderPerformance().append(),this.shapes[t.id]="p1",this.valueShapes.p1=t.id),null!==this.values[0]&&(t=this.renderTarget().append(),this.shapes[t.id]="t0",this.valueShapes.t0=t.id),i.render()}}}),e.fn.sparkline.pie=E=n(e.fn.sparkline._base,{type:"pie",init:function(t,n,i,r,a){var o,s=0;if(E._super.init.call(this,t,n,i,r,a),this.shapes={},this.valueShapes={},this.values=n=e.map(n,Number),"auto"===i.get("width")&&(this.width=this.height),n.length>0)for(o=n.length;o--;)s+=n[o];this.total=s,this.initTarget(),this.radius=c.floor(c.min(this.canvasWidth,this.canvasHeight)/2)},getRegion:function(e,t,n){var i=this.target.getShapeAt(e,t,n);return i!==l&&this.shapes[i]!==l?this.shapes[i]:l},getCurrentRegionFields:function(){var e=this.currentRegion;return{isNull:this.values[e]===l,value:this.values[e],percent:this.values[e]/this.total*100,color:this.options.get("sliceColors")[e%this.options.get("sliceColors").length],offset:e}},changeHighlight:function(e){var t=this.currentRegion,n=this.renderSlice(t,e),i=this.valueShapes[t];delete this.shapes[i],this.target.replaceWithShape(i,n),this.valueShapes[t]=n.id,this.shapes[n.id]=t},renderSlice:function(e,t){var n,i,r,a,o,s=this.target,d=this.options,u=this.radius,p=d.get("borderWidth"),f=d.get("offset"),h=2*c.PI,m=this.values,g=this.total,_=f?2*c.PI*(f/360):0;for(a=m.length,r=0;r<a;r++){if(n=_,i=_,g>0&&(i=_+h*(m[r]/g)),e===r)return o=d.get("sliceColors")[r%d.get("sliceColors").length],t&&(o=this.calcHighlightColor(o,d)),s.drawPieSlice(u,u,u-p,n,i,l,o);_=i}},render:function(){var e,t,n=this.target,i=this.values,r=this.options,a=this.radius,o=r.get("borderWidth");if(E._super.render.call(this)){for(o&&n.drawCircle(a,a,c.floor(a-o/2),r.get("borderColor"),l,o).append(),t=i.length;t--;)i[t]&&(e=this.renderSlice(t).append(),this.valueShapes[t]=e.id,this.shapes[e.id]=t);n.render()}}}),e.fn.sparkline.box=T=n(e.fn.sparkline._base,{type:"box",init:function(t,n,i,r,a){T._super.init.call(this,t,n,i,r,a),this.values=e.map(n,Number),this.width="auto"===i.get("width")?"4.0em":r,this.initTarget(),this.values.length||(this.disabled=1)},getRegion:function(){return 1},getCurrentRegionFields:function(){var e=[{field:"lq",value:this.quartiles[0]},{field:"med",value:this.quartiles[1]},{field:"uq",value:this.quartiles[2]}];return this.loutlier!==l&&e.push({field:"lo",value:this.loutlier}),this.routlier!==l&&e.push({field:"ro",value:this.routlier}),this.lwhisker!==l&&e.push({field:"lw",value:this.lwhisker}),this.rwhisker!==l&&e.push({field:"rw",value:this.rwhisker}),e},render:function(){var e,t,n,i,r,o,s,d,u,p,f,h=this.target,m=this.values,g=m.length,_=this.options,v=this.canvasWidth,y=this.canvasHeight,b=_.get("chartRangeMin")===l?c.min.apply(c,m):_.get("chartRangeMin"),w=_.get("chartRangeMax")===l?c.max.apply(c,m):_.get("chartRangeMax"),x=0;if(T._super.render.call(this)){if(_.get("raw"))_.get("showOutliers")&&m.length>5?(t=m[0],e=m[1],i=m[2],r=m[3],o=m[4],s=m[5],d=m[6]):(e=m[0],i=m[1],r=m[2],o=m[3],s=m[4]);else if(m.sort(function(e,t){return e-t}),i=a(m,1),r=a(m,2),o=a(m,3),n=o-i,_.get("showOutliers")){for(e=s=l,u=0;u<g;u++)e===l&&m[u]>i-n*_.get("outlierIQR")&&(e=m[u]),m[u]<o+n*_.get("outlierIQR")&&(s=m[u]);t=m[0],d=m[g-1]}else e=m[0],s=m[g-1];this.quartiles=[i,r,o],this.lwhisker=e,this.rwhisker=s,this.loutlier=t,this.routlier=d,f=v/(w-b+1),_.get("showOutliers")&&(x=c.ceil(_.get("spotRadius")),v-=2*c.ceil(_.get("spotRadius")),f=v/(w-b+1),t<e&&h.drawCircle((t-b)*f+x,y/2,_.get("spotRadius"),_.get("outlierLineColor"),_.get("outlierFillColor")).append(),d>s&&h.drawCircle((d-b)*f+x,y/2,_.get("spotRadius"),_.get("outlierLineColor"),_.get("outlierFillColor")).append()),h.drawRect(c.round((i-b)*f+x),c.round(.1*y),c.round((o-i)*f),c.round(.8*y),_.get("boxLineColor"),_.get("boxFillColor")).append(),h.drawLine(c.round((e-b)*f+x),c.round(y/2),c.round((i-b)*f+x),c.round(y/2),_.get("lineColor")).append(),h.drawLine(c.round((e-b)*f+x),c.round(y/4),c.round((e-b)*f+x),c.round(y-y/4),_.get("whiskerColor")).append(),h.drawLine(c.round((s-b)*f+x),c.round(y/2),c.round((o-b)*f+x),c.round(y/2),_.get("lineColor")).append(),h.drawLine(c.round((s-b)*f+x),c.round(y/4),c.round((s-b)*f+x),c.round(y-y/4),_.get("whiskerColor")).append(),h.drawLine(c.round((r-b)*f+x),c.round(.1*y),c.round((r-b)*f+x),c.round(.9*y),_.get("medianColor")).append(),_.get("target")&&(p=c.ceil(_.get("spotRadius")),h.drawLine(c.round((_.get("target")-b)*f+x),c.round(y/2-p),c.round((_.get("target")-b)*f+x),c.round(y/2+p),_.get("targetColor")).append(),h.drawLine(c.round((_.get("target")-b)*f+x-p),c.round(y/2),c.round((_.get("target")-b)*f+x+p),c.round(y/2),_.get("targetColor")).append()),h.render()}}}),O=n({init:function(e,t,n,i){this.target=e,this.id=t,this.type=n,this.args=i},append:function(){return this.target.appendShape(this),this}}),P=n({_pxregex:/(\d+)(px)?\s*$/i,init:function(t,n,i){t&&(this.width=t,this.height=n,this.target=i,this.lastShapeId=null,i[0]&&(i=i[0]),e.data(i,"_jqs_vcanvas",this))},drawLine:function(e,t,n,i,r,a){return this.drawShape([[e,t],[n,i]],r,a)},drawShape:function(e,t,n,i){return this._genShape("Shape",[e,t,n,i])},drawCircle:function(e,t,n,i,r,a){return this._genShape("Circle",[e,t,n,i,r,a])},drawPieSlice:function(e,t,n,i,r,a,o){return this._genShape("PieSlice",[e,t,n,i,r,a,o])},drawRect:function(e,t,n,i,r,a){return this._genShape("Rect",[e,t,n,i,r,a])},getElement:function(){return this.canvas},getLastShapeId:function(){return this.lastShapeId},reset:function(){window.alert("reset not implemented")},_insert:function(t,n){e(n).html(t)},_calculatePixelDims:function(t,n,i){var r;r=this._pxregex.exec(n),r?this.pixelHeight=r[1]:this.pixelHeight=e(i).height(),r=this._pxregex.exec(t),r?this.pixelWidth=r[1]:this.pixelWidth=e(i).width()},_genShape:function(e,t){var n=M++;return t.unshift(n),new O(this,n,e,t)},appendShape:function(e){window.alert("appendShape not implemented")},replaceWithShape:function(e,t){window.alert("replaceWithShape not implemented")},insertAfterShape:function(e,t){window.alert("insertAfterShape not implemented")},removeShapeId:function(e){window.alert("removeShapeId not implemented")},getShapeAt:function(e,t,n){window.alert("getShapeAt not implemented")},render:function(){window.alert("render not implemented")}}),L=n(P,{init:function(t,n,i,r){L._super.init.call(this,t,n,i),this.canvas=s.createElement("canvas"),i[0]&&(i=i[0]),this.context=this.canvas.getContext("2d");var a=window.devicePixelRatio||1,o=this.context.webkitBackingStorePixelRatio||this.context.mozBackingStorePixelRatio||this.context.msBackingStorePixelRatio||this.context.oBackingStorePixelRatio||this.context.backingStorePixelRatio||1,c=a/o;e.data(i,"_jqs_vcanvas",this),e(this.canvas).css({display:"inline-block",width:t,height:n,verticalAlign:"top"}),this._insert(this.canvas,i),this._calculatePixelDims(t,n,this.canvas),this.canvas.width=this.pixelWidth*c,this.canvas.height=this.pixelHeight*c,this.context.scale(c,c),this.interact=r,this.shapes={},this.shapeseq=[],this.currentTargetShapeId=l,e(this.canvas).css({width:this.pixelWidth,height:this.pixelHeight})},_getContext:function(e,t,n){var i=this.canvas.getContext("2d");return e!==l&&(i.strokeStyle=e),i.lineWidth=n===l?1:n,t!==l&&(i.fillStyle=t),i},reset:function(){var e=this._getContext();e.clearRect(0,0,this.pixelWidth,this.pixelHeight),this.shapes={},this.shapeseq=[],this.currentTargetShapeId=l},_drawShape:function(e,t,n,i,r){var a,o,s=this._getContext(n,i,r);for(s.beginPath(),s.moveTo(t[0][0]+.5,t[0][1]+.5),a=1,o=t.length;a<o;a++)s.lineTo(t[a][0]+.5,t[a][1]+.5);n!==l&&s.stroke(),i!==l&&s.fill(),this.targetX!==l&&this.targetY!==l&&s.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=e)},_drawCircle:function(e,t,n,i,r,a,o){var s=this._getContext(r,a,o);s.beginPath(),s.arc(t,n,i,0,2*c.PI,!1),this.targetX!==l&&this.targetY!==l&&s.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=e),r!==l&&s.stroke(),a!==l&&s.fill()},_drawPieSlice:function(e,t,n,i,r,a,o,s){var c=this._getContext(o,s);c.beginPath(),c.moveTo(t,n),c.arc(t,n,i,r,a,!1),c.lineTo(t,n),c.closePath(),o!==l&&c.stroke(),s&&c.fill(),this.targetX!==l&&this.targetY!==l&&c.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=e)},_drawRect:function(e,t,n,i,r,a,o){return this._drawShape(e,[[t,n],[t+i,n],[t+i,n+r],[t,n+r],[t,n]],a,o)},appendShape:function(e){return this.shapes[e.id]=e,this.shapeseq.push(e.id),this.lastShapeId=e.id,e.id},replaceWithShape:function(e,t){var n,i=this.shapeseq;for(this.shapes[t.id]=t,n=i.length;n--;)i[n]==e&&(i[n]=t.id);delete this.shapes[e]},replaceWithShapes:function(e,t){var n,i,r,a=this.shapeseq,o={};for(i=e.length;i--;)o[e[i]]=!0;for(i=a.length;i--;)n=a[i],o[n]&&(a.splice(i,1),delete this.shapes[n],r=i);for(i=t.length;i--;)a.splice(r,0,t[i].id),this.shapes[t[i].id]=t[i]},insertAfterShape:function(e,t){var n,i=this.shapeseq;for(n=i.length;n--;)if(i[n]===e)return i.splice(n+1,0,t.id),void(this.shapes[t.id]=t)},removeShapeId:function(e){var t,n=this.shapeseq;for(t=n.length;t--;)if(n[t]===e){n.splice(t,1);break}delete this.shapes[e]},getShapeAt:function(e,t,n){return this.targetX=t,this.targetY=n,this.render(),this.currentTargetShapeId},render:function(){var e,t,n,i=this.shapeseq,r=this.shapes,a=i.length,o=this._getContext();for(o.clearRect(0,0,this.pixelWidth,this.pixelHeight),n=0;n<a;n++)e=i[n],t=r[e],this["_draw"+t.type].apply(this,t.args);this.interact||(this.shapes={},this.shapeseq=[])}}),q=n(P,{init:function(t,n,i){var r;q._super.init.call(this,t,n,i),i[0]&&(i=i[0]),e.data(i,"_jqs_vcanvas",this),this.canvas=s.createElement("span"),e(this.canvas).css({display:"inline-block",position:"relative",overflow:"hidden",width:t,height:n,margin:"0",padding:"0",verticalAlign:"top"}),this._insert(this.canvas,i),this._calculatePixelDims(t,n,this.canvas),this.canvas.width=this.pixelWidth,this.canvas.height=this.pixelHeight,r='<v:group coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'" style="position:absolute;top:0;left:0;width:'+this.pixelWidth+"px;height="+this.pixelHeight+'px;"></v:group>',this.canvas.insertAdjacentHTML("beforeEnd",r),this.group=e(this.canvas).children()[0],this.rendered=!1,this.prerender=""},_drawShape:function(e,t,n,i,r){var a,o,s,c,d,u,p,f=[];for(p=0,u=t.length;p<u;p++)f[p]=""+t[p][0]+","+t[p][1];return a=f.splice(0,1),r=r===l?1:r,o=n===l?' stroked="false" ':' strokeWeight="'+r+'px" strokeColor="'+n+'" ',s=i===l?' filled="false"':' fillColor="'+i+'" filled="true" ',c=f[0]===f[f.length-1]?"x ":"",d='<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"  id="jqsshape'+e+'" '+o+s+' style="position:absolute;left:0;top:0;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0;margin:0;"  path="m '+a+" l "+f.join(", ")+" "+c+'e"> </v:shape>'},_drawCircle:function(e,t,n,i,r,a,o){var s,c,d;return t-=i,n-=i,s=r===l?' stroked="false" ':' strokeWeight="'+o+'px" strokeColor="'+r+'" ',c=a===l?' filled="false"':' fillColor="'+a+'" filled="true" ',d='<v:oval  id="jqsshape'+e+'" '+s+c+' style="position:absolute;top:'+n+"px; left:"+t+"px; width:"+2*i+"px; height:"+2*i+'px"></v:oval>'},_drawPieSlice:function(e,t,n,i,r,a,o,s){var d,u,p,f,h,m,g,_;if(r===a)return"";if(a-r===2*c.PI&&(r=0,a=2*c.PI),u=t+c.round(c.cos(r)*i),p=n+c.round(c.sin(r)*i),f=t+c.round(c.cos(a)*i),h=n+c.round(c.sin(a)*i),u===f&&p===h){if(a-r<c.PI)return"";u=f=t+i,p=h=n}return u===f&&p===h&&a-r<c.PI?"":(d=[t-i,n-i,t+i,n+i,u,p,f,h],m=o===l?' stroked="false" ':' strokeWeight="1px" strokeColor="'+o+'" ',g=s===l?' filled="false"':' fillColor="'+s+'" filled="true" ',_='<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"  id="jqsshape'+e+'" '+m+g+' style="position:absolute;left:0;top:0;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0;margin:0;"  path="m '+t+","+n+" wa "+d.join(", ")+' x e"> </v:shape>')},_drawRect:function(e,t,n,i,r,a,o){return this._drawShape(e,[[t,n],[t,n+r],[t+i,n+r],[t+i,n],[t,n]],a,o)},reset:function(){this.group.innerHTML=""},appendShape:function(e){var t=this["_draw"+e.type].apply(this,e.args);return this.rendered?this.group.insertAdjacentHTML("beforeEnd",t):this.prerender+=t,this.lastShapeId=e.id,e.id},replaceWithShape:function(t,n){var i=e("#jqsshape"+t),r=this["_draw"+n.type].apply(this,n.args);i[0].outerHTML=r},replaceWithShapes:function(t,n){var i,r=e("#jqsshape"+t[0]),a="",o=n.length;for(i=0;i<o;i++)a+=this["_draw"+n[i].type].apply(this,n[i].args);for(r[0].outerHTML=a,i=1;i<t.length;i++)e("#jqsshape"+t[i]).remove()},insertAfterShape:function(t,n){var i=e("#jqsshape"+t),r=this["_draw"+n.type].apply(this,n.args);i[0].insertAdjacentHTML("afterEnd",r)},removeShapeId:function(t){var n=e("#jqsshape"+t);this.group.removeChild(n[0])},getShapeAt:function(e,t,n){var i=e.id.substr(8);return i},render:function(){this.rendered||(this.group.innerHTML=this.prerender,this.rendered=!0)}})})}(document,Math)},function(e,t){"use strict";Element.prototype.hide=function(){this.style.display="none"},Element.prototype.show=function(){this.style.display=""},"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),function(e){e.fn.setVisibility=function(e){return e?this.removeClass("invisible"):this.addClass("invisible"),this}}(jQuery)},,function(e,t,n){"use strict";var i=n(371),r=n(378),a=n(310),o=n(368),s=n(319).localize,c=n(369),l=n(486),d=n(313).defaultRedirectUrl,u=n(318),p=n(509),f=function(){var e=void 0,t=null,n=function(){return/\.html$/i.test(window.location.pathname)?(a.init(),u.init(p.initOptions()),e=$("#content-holder"),e.on("binarypjax:before",f),e.on("binarypjax:after",h),void i.init(e,"#content")):void(window.location.pathname+=".html")},f=function(){t&&(l.onUnload(),u.removeOnDisconnect(),"function"==typeof t.onUnload&&t.onUnload(),t=null)},h=function(e,t){l.onLoad(),o.pushDataLayer();var n=t.getAttribute("data-page");n in r?g(r[n]):/\/get-started\//i.test(window.location.pathname)&&g(r["get-started"])},m={login:function(){return s('Please <a href="[_1]">log in</a> to view this page.',[c.loginUrl()])},only_virtual:"Sorry, this feature is available to virtual accounts only.",only_real:"This feature is not relevant to virtual-money accounts."},g=function(e){t=e.module,e.is_authenticated?a.isLoggedIn()?u.wait("authorize").then(function(n){n.error?_(m.login()):e.only_virtual&&!a.get("is_virtual")?_(m.only_virtual):e.only_real&&a.get("is_virtual")?_(m.only_real):t.onLoad()}):_(m.login()):e.not_authenticated&&a.isLoggedIn()?i.load(d(),!0):t.onLoad(),u.setOnDisconnect(t.onDisconnect)},_=function(t){var n=e.find("#content .container");n.html($("<div/>",{class:"logged_out_title_container",html:n.find("h1")[0]})).append($("<p/>",{class:"center-text notice-msg",html:s(t)}))};return{init:n}}();e.exports=f},function(e,t,n){"use strict";var i=n(379),r=n(380),a=n(381),o=n(385),s=n(386),c=n(387),l=n(388),d=n(391),u=n(392),p=n(393),f=n(394),h=n(395),m=n(397),g=n(403),_=n(404),v=n(405),y=n(406),b=n(407),w=n(408),x=n(409),$=n(410),k=n(415),C=n(418),I=n(421),S=n(437),E=n(443),T=n(444),B=n(445),A=n(361),O=n(447),P=n(450),L=n(452),q=n(456),j=n(457),D=n(458),M=n(462),R=n(465),V=n(466),N=n(467),F=n(469),H=n(472),z=n(473),U=n(475),Y=n(400),W=n(476),G=n(479),J=n(480),X=n(481),K=n(483),Q=n(398),Z=n(370),ee=n(484),te={account_transfer:{module:v,is_authenticated:!0,only_real:!0},api_tokenws:{module:P,is_authenticated:!0},assessmentws:{module:j,is_authenticated:!0,only_real:!0},asset_indexws:{module:k},authenticate:{module:E,is_authenticated:!0,only_real:!0},authorised_appsws:{module:L,is_authenticated:!0},cashier:{module:y},cashier_passwordws:{module:q,is_authenticated:!0,only_real:!0},change_passwordws:{module:T,is_authenticated:!0},charity:{module:r},contact:{module:a},detailsws:{module:N,is_authenticated:!0},endpoint:{module:o},epg_forwardws:{module:b,is_authenticated:!0,only_real:!0},forwardws:{module:b,is_authenticated:!0,only_real:!0},home:{module:l,not_authenticated:!0},iphistoryws:{module:D,is_authenticated:!0},japanws:{module:G,
is_authenticated:!0,only_virtual:!0},knowledge_testws:{module:ee,is_authenticated:!0,only_virtual:!0},limitsws:{module:M,is_authenticated:!0,only_real:!0},logged_inws:{module:i},lost_passwordws:{module:U,not_authenticated:!0},maltainvestws:{module:W,is_authenticated:!0},market_timesws:{module:C},metatrader:{module:Y,is_authenticated:!0},multi_barriers_trading:{module:$},payment_agent_listws:{module:w},payment_methods:{module:y.PaymentMethods},platforms:{module:p},portfoliows:{module:A,is_authenticated:!0},profit_tablews:{module:O,is_authenticated:!0},realws:{module:J,is_authenticated:!0,only_virtual:!0},regulation:{module:f},reset_passwordws:{module:K,not_authenticated:!0},securityws:{module:R,is_authenticated:!0},self_exclusionws:{module:V,is_authenticated:!0,only_real:!0},settingsws:{module:R,is_authenticated:!0},signup:{module:h.AffiliateSignup},statementws:{module:F,is_authenticated:!0},tnc_approvalws:{module:Q,is_authenticated:!0,only_real:!0},top_up_virtualws:{module:H,is_authenticated:!0,only_virtual:!0},trading:{module:S},trading_beta:{module:I},transferws:{module:B,is_authenticated:!0,only_real:!0},virtualws:{module:X,not_authenticated:!0},withdrawws:{module:x,is_authenticated:!0,only_real:!0},"deposit-jp":{module:Z.Deposit,is_authenticated:!0,only_real:!0},"get-started":{module:s},"get-started-jp":{module:c},"home-jp":{module:d,not_authenticated:!0},"ico-subscribe":{module:z,is_authenticated:!0,only_real:!0},"job-details":{module:u},"open-positions":{module:h.OpenPositions},"open-source-projects":{module:h.OpenSourceProjects},"payment-agent":{module:h.PaymentAgent},"terms-and-conditions":{module:m},"terms-and-conditions-jp":{module:m},"video-facility":{module:g,is_authenticated:!0,only_real:!0},"volidx-markets":{module:h.VolidxMarkets},"why-us":{module:_},"why-us-jp":{module:_},"withdraw-jp":{module:Z.Withdraw,is_authenticated:!0,only_real:!0}};e.exports=te},function(e,t,n){"use strict";var i=n(311),r=n(310),a=n(368),o=n(314).get,s=n(314).urlLang,c=n(313).defaultRedirectUrl,l=n(313).urlFor,d=n(313).paramsHash,u=n(309).isEmptyObject,p=function(){var e=function(){parent.window.is_logging_in=1;var e=void 0;try{var n=t();if(!u(n)){var d=i.get("loginid");if(!d){var p=Object.keys(n),f="";p.map(function(e){f+=""+(f?"+":"")+e+":"+(/^V/i.test(e)?"V":"R")+":E"}),d=p[0],r.setCookie("loginid",d),r.setCookie("loginid_list",f)}r.setCookie("login",n[d].token),a.setLoginFlag()}e=sessionStorage.getItem("redirect_url"),sessionStorage.removeItem("redirect_url")}catch(e){console.log("storage is not supported")}var h=!0;if(e){var m=["reset_passwordws","lost_passwordws","change_passwordws","home","home-jp"],g=new RegExp(m.join("|"),"i");g.test(e)||l("")===e||(h=!1)}if(h){var _=s(e)||i.get("language"),v=o();e=c(),_&&_!==v&&(e=e.replace(new RegExp("/"+v+"/","i"),"/"+_.toLowerCase()+"/"))}document.getElementById("loading_link").setAttribute("href",e),window.location.href=e},t=function(){for(var e=d(window.location.href),t={},n=1;e["acct"+n];){var i=e["acct"+n],a=e["token"+n],o=e["cur"+n]||"";i&&a&&(t[i]={token:a,currency:o}),n++}return u(t)||r.set("tokens",JSON.stringify(t)),t};return{onLoad:e}}();e.exports=p},function(e,t){"use strict";var n=function(){var e=null,t=function(){var t=$(".gallery"),n=void 0,i=function(){n=t.find("img"),n.length>1&&n.eq(n.length-1).prependTo(t)};e=setInterval(i,5e3)},n=function(){e&&(clearInterval(e),e=null)};return{onLoad:t,onUnload:n}}();e.exports=n},function(e,t,n){"use strict";var i=n(382),r=function(){var e=function(){t(),i.showDeskLink("style","#contact_content")},t=function(){$(".contact-content").on("change","#cs_telephone_number",function(){var e=$(this).val().split(",");$("#display_cs_telephone").html(e[0]+(e.length>1?"<br />"+e[1]:""))})};return{onLoad:e}}();e.exports=r},function(e,t,n){"use strict";var i=n(319).localize,r=n(313).urlForStatic,a=n(383).loadCSS,o=n(384).loadJS,s=function(){var e=function(e,i){"undefined"==typeof DESK&&(a("https://d3jyn100am7dxp.cloudfront.net/assets/widget_embed_191.cssgz?1367387331"),o("https://d3jyn100am7dxp.cloudfront.net/assets/widget_embed_libraries_191.jsgz?1367387332"));var r=setInterval(function(){"undefined"!=typeof DESK&&(t(),n(e,i),clearInterval(r))},80)},t=function(){new DESK.Widget({version:1,site:"binary.desk.com",port:"80",type:"chat",id:"desk-link",displayMode:0,features:{offerAlways:!0,offerAgentsOnline:!1,offerRoutingAgentsAvailable:!1,offerEmailIfChatUnavailable:!1}}).render()},n=function(e,t){var n=null,a=r("images/pages/contact/chat-icon.svg"),o=function(){var r=$(".a-desk-widget"),o=r.css("background-image");o&&(e?r.css({"background-image":'url("'+a+'")',"background-size":"contain","min-width":50,"min-height":50,width:"auto"}):r.removeAttr("style").text(i("Contact us via live chat")),r.attr("href","javascript:;"),o.match(/(none|chat-icon)/g)&&(clearInterval(n),$("#loading").remove(),$(t).setVisibility(1))),r.removeAttr("onmouseover onmouseout")};n=setInterval(o,500)};return{showDeskLink:e}}();e.exports=s},function(e,t){"use strict";/*!
	loadCSS: load a CSS file asynchronously.
	[c]2014 @scottjehl, Filament Group, Inc.
	Licensed MIT
	*/
function n(e,t,n){var i=window.document.createElement("link"),r=t||window.document.getElementsByTagName("script")[0];return i.rel="stylesheet",i.href=e,i.media="only x",r.parentNode.insertBefore(i,r),setTimeout(function(){i.media=n||"all"}),i}e.exports={loadCSS:n}},function(e,t){"use strict";/*! loadJS: load a JS file asynchronously. [c]2014 @scottjehl, Filament Group, Inc. (Based on http://goo.gl/REQGQ by Paul Irish). Licensed MIT */
function n(e){var t=window.document.getElementsByTagName("script")[0],n=window.document.createElement("script");return n.src=e,t.parentNode.insertBefore(n,t),n}e.exports={loadJS:n}},function(e,t,n){"use strict";var i=n(322).getAppId,r=n(322).getSocketURL,a=function(){var e=function(){var e=$("#server_url"),t=$("#app_id");e.val(r().split("/")[2]),t.val(i()),$("#frm_endpoint").on("submit",function(n){n.preventDefault();var i=e.val().trim().toLowerCase(),r=t.val().trim();i&&localStorage.setItem("config.server_url",i),r&&!isNaN(r)&&localStorage.setItem("config.app_id",parseInt(r)),window.location.reload()}),$("#reset_endpoint").on("click",function(){localStorage.removeItem("config.server_url"),localStorage.removeItem("config.app_id"),window.location.reload()})};return{onLoad:e}}();e.exports=a},function(e,t,n){"use strict";var i=n(310),r=function(){var e=function(){$(".nav li").removeClass("selected").find('a[href="'+window.location.pathname+'"]').parent("li").addClass("selected")},t=function(e,t){$(".subsection").setVisibility(0),t.setVisibility(1);var n=e.find(".back"),i=e.find(".next");t.hasClass("first")?(n.addClass("button-disabled"),i.removeClass("button-disabled")):t.hasClass("last")?(n.removeClass("button-disabled"),i.addClass("button-disabled")):(n.removeClass("button-disabled"),i.removeClass("button-disabled"));var r=t.find("a[name]").attr("name").slice(0,-8);return window.location.hash!=="#"+r&&(window.location.hash=r),!1},n=function(){i.activateByClientType();var n=$(".get-started").find(".subsection-navigation");if(n.length){n.on("click","a",function(){var e=$(this);if(e.hasClass("button-disabled"))return!1;var i=$(".subsection:not(.invisible)"),r=e.hasClass("next")?i.next(".subsection"):i.prev(".subsection");return t(n,r)});var r=location.href.split("#")[1],a=r?$("a[name="+r+"-section]").parent(".subsection"):$(".subsection.first");t(n,a)}e()};return{onLoad:n}}();e.exports=r},function(e,t,n){"use strict";var i=n(310),r=n(371),a=n(315).jpClient,o=function(){var e=void 0,t=void 0,n=void 0,o=function(){var i=window.location.hash;e.find("div").hide(),t.removeClass("selected"),i?(n.hide(),e.find("div[id=content-"+i.slice(1,i.length)+"]").show().find("div").show(),t.filter("."+i.slice(1,i.length)).addClass("selected"),e.show()):(e.hide(),n.show())},s=function(){a()||r.load("get-started"),i.activateByClientType(),e=$(".contents"),t=$(".sidebar ul li"),n=$("#index");var s=window.location.hash;s&&""!==s&&(n.hide(),$(".sidebar ul li."+s.slice(1,s.length)).addClass("selected"),o()),$(window).on("hashchange",function(){o()}),t.click(function(){$(".sidebar ul li").removeClass("selected"),$(this).addClass("selected")})},c=function(){$(window).off("hashchange")};return{onLoad:s,onUnload:c}}();e.exports=o},function(e,t,n){"use strict";var i=n(371),r=n(314).get,a=n(319).localize,o=n(313).urlFor,s=n(389),c=n(318),l=function(){var e=void 0,t=function(){return"JA"!==r()||/home-jp/.test(window.location.pathname)?void c.wait("website_status").then(function(t){e=t.website_status.clients_country;var i="#frm_verify_email";s.init(i,[{selector:"#email",validations:["req","email"],request_field:"verify_email"},{request_field:"type",value:"account_opening"}]),s.handleSubmit({form_selector:i,fnc_response_handler:l,fnc_additional_check:n})}):void i.load("home-jp")},n=function(t){return!("my"===e&&!/@binary\.com$/.test(t.verify_email))||($("#frm_verify_email").find("div").html($("<p/>",{class:"notice-msg center-text",html:a('Sorry, account signup is not available in your country. Please contact <a href="[_1]">customer support</a> for more information.',[o("contact")])})),!1)},l=function(e){var t=e.error;t?$("#signup_error").setVisibility(1).text(t.message):i.load("new_account/virtualws")};return{onLoad:t}}();e.exports=l},function(e,t,n){"use strict";var i=n(390),r=n(309).isEmptyObject,a=n(309).showLoadingImage,o=n(318),s=function(){var e={},t=function(t,n){var r=$(t+":visible"),a=r.find('button[type="submit"]');r.length&&(e[t]={$btn_submit:a,can_submit:!0},Array.isArray(n)&&n.length&&(e[t].fields=n,n.forEach(function(e){e.selector&&(e.$=r.find(e.selector),!e.$.length)||(e.form=t)}))),a.removeAttr("disabled"),i.init(t,n)},n=function(t){var n={},i=e[t].fields;if(!i)return n;var r=void 0,a=void 0,o=void 0,s=void 0,c=void 0;return i.forEach(function(e){e.exclude_request||(a=$(e.form).find(e.selector),(a.is(":visible")||e.value)&&(o=a.val(),r=e.request_field||e.selector,c="native"===a.attr("data-picker"),s=e.value?"function"==typeof e.value?e.value():e.value:c?o:a.attr("data-value")||(/lbl_/.test(r)?e.value||a.text():a.is(":checkbox")?a.is(":checked")?1:0:Array.isArray(o)?o.join(","):o||""),e.exclude_if_empty&&0===o.length||(r=r.replace(/lbl_|#|\./g,""),e.parent_node?(n[e.parent_node]||(n[e.parent_node]={}),n[e.parent_node][r]=s):n[r]=s)))}),n},s=function(e){if(e.length&&!e.find(".barspinner").length){e.attr("disabled","disabled");var t=$("<span/>",{text:e.text(),class:"invisible"});a(e,"white"),e.append(t)}},c=function(e){e.length&&e.find(".barspinner").length&&e.removeAttr("disabled").html(e.find("span").text())},l=function(t){var a=void 0,l=void 0,d=void 0,u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"function"==typeof t.fnc_response_handler&&((t.enable_button||"error"in e)&&(c(l),a.can_submit=!0),t.fnc_response_handler(e))};$(t.form_selector).off("submit").on("submit",function(c){if(c.preventDefault(),a=e[t.form_selector],l=a.$btn_submit,d=a.can_submit,d&&i.validate(t.form_selector)){var p=$.extend({},t.obj_request,n(t.form_selector));if("function"==typeof t.fnc_additional_check&&!t.fnc_additional_check(p))return;s(l),a.can_submit=!1,r(p)?u():o.send(p).then(function(e){u(e)})}})};return{init:t,handleSubmit:l}}();e.exports=s},function(e,t,n){"use strict";var i=n(319).localize,r=n(326).compareBigUnsignedInt,a=function(){var e={},t="error-msg",n="invisible",a={input:"input change",select:"change",checkbox:"change"},o=function(e){return e.length?"checkbox"===e.attr("type")?"checkbox":e.get(0).localName:null},s=function(e){return("checkbox"===e.type?e.$.is(":checked")?"1":"":e.$.val())||""},c=function(r,s){var c=$(r+":visible");if(c.length&&(e[r]={$form:c},Array.isArray(s)&&s.length)){e[r].fields=s;var l=c.find('button[type="submit"]'),d=!1;s.forEach(function(i){if(i.$=c.find(i.selector),i.$.length&&i.validations){if(i.type=o($(i.$[0])),i.form=r,i.msg_element)i.$error=c.find(i.msg_element);else{var s=i.$.parent();if(/req/.test(i.validations)){var l=s.parent().find("label");l.length||(l=s.find("label")),l.length&&0===l.find("span.required_field_asterisk").length&&($(l[0]).append($("<span/>",{class:"required_field_asterisk",text:"*"})),d=!0)}0===s.find("div."+t).length&&s.append($("<div/>",{class:t+" "+n})),i.$error=s.find("."+t)}var u=a[i.type];u&&i.$.unbind(u).on(u,function(){E(i),i.re_check_field&&E(e[r].fields.find(function(e){return e.selector===i.re_check_field}))})}}),d&&0===c.find(".required_field_asterisk.no-margin").length&&l.parent().append($("<p/>",{class:"hint"}).append($("<span/>",{class:"required_field_asterisk no-margin",text:"*"})).append($("<span/>",{text:" "+i("Indicates required field")})))}},l=function(e,t,n){return!!("string"==typeof e?e.trim():e).length||(I.req.message="checkbox"===n.type?"Please select the checkbox.":"This field is required.",!1)},d=function(e){return/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,63}$/.test(e)},u=function(e){return/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]+/.test(e)},p=function(e){return!/[`~!@#$%^&*)(_=+\[}{\]\\\/";:\?><,|\d]+/.test(e)},f=function(e){return!/[`~!@#$%^&*)(_=+\[}{\]\\\/";:\?><|]+/.test(e)},h=function(e){return!/[`~!#$%^&*)(_=+\[}{\]\\";:\?><|]+/.test(e)},m=function(e){return/^[a-zA-Z\d-\s]*$/.test(e)},g=function(e){return/^\+?[0-9\s]*$/.test(e)},_=function(e,t){return t.regex.test(e)},v=function(e){return e.trim().length<=30},y=function(e,t){return e===$(t.to).val()},b=function(e,t){return e!==$(t.to).val()},w=function(e,t){return!t.min||e.trim().length>=t.min},x=function(e,t){return(!t.min||e.trim().length>=t.min)&&(!t.max||e.trim().length<=t.max)},k=function(e,t){if(t.allow_empty&&0===e.length)return!0;var n=!0,r="";return+t.max<+t.min&&t.custom_message?(n=!1,r=i(t.custom_message)):("float"===t.type?/^\d+(\.\d+)?$/:/^\d+$/).test(e)&&$.isNumeric(e)?"float"===t.type&&t.decimals&&!new RegExp("^\\d+(\\.\\d{"+t.decimals.replace(/ /g,"")+"})?$").test(e)?(n=!1,r=i("Only [_1] decimal points are allowed.",[t.decimals])):"min"in t&&"max"in t&&(+e<+t.min||C(e,t))?(n=!1,r=i("Should be between [_1] and [_2]",[t.min,t.max])):"min"in t&&+e<+t.min?(n=!1,r=i("Should be more than [_1]",[t.min])):"max"in t&&C(e,t)&&(n=!1,r=i("Should be less than [_1]",[t.max])):(n=!1,r=i("Should be a valid number")),I.number.message=r,n},C=function(e,t){return"float"===t.type?+e>+t.max:1===r(e,t.max)},I={req:{func:l,message:""},email:{func:d,message:"Invalid email address"},password:{func:u,message:"Password should have lower and uppercase letters with numbers."},general:{func:f,message:"Only letters, numbers, space, hyphen, period, and apostrophe are allowed."},address:{func:h,message:"Only letters, numbers, space, hyphen, period, and apostrophe are allowed."},letter_symbol:{func:p,message:"Only letters, space, hyphen, period, and apostrophe are allowed."},postcode:{func:m,message:"Only letters, numbers, space, and hyphen are allowed."},phone:{func:g,message:"Only numbers and spaces are allowed."},email_token:{func:v,message:"Please submit a valid verification token."},compare:{func:y,message:"The two passwords that you entered do not match."},not_equal:{func:b,message:"[_1] and [_2] cannot be the same."},min:{func:w,message:"Minimum of [_1] characters required."},length:{func:x,message:"You should enter [_1] characters."},number:{func:k,message:""},regular:{func:_,message:""}},S=function(e){return{min:/^mt$/.test(e)?8:6,max:25}},E=function(e){if(!e.$.is(":visible")||!e.validations)return!0;var t=!0,n=void 0;return e.validations.some(function(r){if(!r)return!1;var a=void 0,o={};if("string"==typeof r?a=r:(a=r[0],o=r[1]),"password"!==a||x(s(e),S(o))){var c="custom"===a?o.func:I[a].func;e.is_ok=c(s(e),o,e)}else e.is_ok=!1,a="length",o=S(o);return!e.is_ok&&(n=o.message||I[a].message,"length"===a?n=i(n,[o.min===o.max?o.min:o.min+"-"+o.max]):"min"===a?n=i(n,[o.min]):"not_equal"===a&&(n=i(n,[i(o.name1),i(o.name2)])),t=!1,!0)}),t?T(e):B(e,n),t},T=function(e){e.$error&&e.$error.length&&e.$error.setVisibility(0)},B=function(e,t){T(e),e.$error.text(i(t)).setVisibility(1)},A=function(t){var n=e[t];return!n.fields||(n.is_ok=!0,n.fields.forEach(function(e){E(e)||(n.is_ok&&!e.no_scroll&&$.scrollTo(e.$,500,{offset:-10}),n.is_ok=!1)}),n.is_ok)};return{init:c,validate:A}}();e.exports=a},function(e,t,n){"use strict";var i=n(388),r=function(){var e="product_visible",t="product_",n=void 0,r=void 0,a=void 0,o=void 0,s=void 0,c=void 0,l=function(){i.onLoad(),$("#start_now").click(function(){$.scrollTo($("#frm_verify_email"),500,{offset:-10})}),n=0,r=$(".go-right"),a=$(".go-left"),o=$(".product").length,s=$(".product:eq(0)"),r.on("click",function(){u(this,"right")}),a.on("click",function(){u(this,"left")}),$("#product_wrapper").on("mouseenter",function(){clearTimeout(c)}).on("mouseleave",function(){d()}),d()},d=function e(){clearTimeout(c),c=setTimeout(function(){u(void 0,"right"),e()},1e4)},u=function(e,i){if(!$(e).hasClass("disabled")){var r=$(window).width(),a=r<=959?r<=480?203:603:800,c=Number($(".product_visible").attr("id").split(t)[1]),l="right"===i?c+1:c-1;l>o?(l=1,n=0):n+=a*("right"===i?-1:1),p(c,l),f(l),s.animate({"margin-left":n+"px"},500)}},p=function(n,i){$("#"+t+n).removeClass(e),$("#"+t+i).addClass(e)},f=function(e){h(a,1===e),h(r,e===o)},h=function(e,t){var n=e.attr("src"),i=["enabled","disabled"];e[(t?"add":"remove")+"Class"]("disabled").attr("src",n.replace(i[+!t],i[+t]))},m=function(){clearTimeout(c)};return{onLoad:l,onUnload:m}}();e.exports=r},function(e,t,n){"use strict";var i=n(313).param,r=n(313).urlFor,a=function(){var e=void 0,t=void 0,n=void 0,a=void 0,o=void 0,s=void 0,c=function(){var n=window.location.hash;t.setVisibility(0).filter(n).setVisibility(1),"Information_Technology"===e&&/senior_perl_developer/.test(n)?a.setVisibility(1):a.setVisibility(0)},l=function(){e=i("dept"),n="."+e,o=$(".sidebar"),s=o.filter(n),t=$(".sections > div > div"),a=$(".senior_perl_message"),o.setVisibility(0),$("#title").find("h1").setVisibility(0),$("#image").find("img").setVisibility(0),$(n).setVisibility(1),s.setVisibility(1).find('a[href="'+window.location.hash+'"]').parent("li").addClass("selected"),c(),$("#back-button").attr("href",r("open-positions")+"#"+e),d()},d=function(){var e=s.find("#sidebar-nav li");e.click(function(){e.removeClass("selected"),$(this).addClass("selected")}),$(window).on("hashchange",function(){c()})},u=function(){$(window).off("hashchange")};return{onLoad:l,onUnload:u}}();e.exports=a},function(e,t){"use strict";var n=function(){var e=[],t=function(){e=["more-tools","trading-platforms"];var t=$(".sidebar-nav li");t.click(function(){t.removeClass("selected"),$(this).addClass("selected")}),$(window).on("hashchange",function(){r()}),n(),$(window).resize(n)},n=function(){$(".sidebar").is(":visible")?r():$(".sections").setVisibility(1)},i=function(){var t=window.location.hash;return t&&$.inArray(t.substring(1),e)!==-1?t:"#trading-platforms"},r=function(){var e=$('.sections[id="'+i().substring(1)+'"]');e.is(":visible")&&1===$(".sections:visible").length||($(".sections").setVisibility(0),e.setVisibility(1),$('.sidebar-nav a[href="'+i()+'"]').parent().addClass("selected"))},a=function(){$(window).off("resize hashchange")};return{onLoad:t,onUnload:a}}();e.exports=n},function(e,t){"use strict";var n=function(){var e=function(){$(function(){$("#accordion").accordion({heightStyle:"content",collapsible:!0,active:0})});var e=[],t=$("#planetmap").find("area"),n=$('img[usemap="#planetmap"]');t.each(function(){e.push($(this).attr("coords"))});var i=function(){t.each(function(t){var i="",r=n[0].getBoundingClientRect().width.toFixed(2);e[t].split(",").map(function(e){i+=(i?",":"")+(e*r/900).toFixed(2)}),$(this).attr("coords",i)})};$(document).ready(i),$(window).resize(i)};return{onLoad:e}}();e.exports=n},function(e,t,n){"use strict";var i=n(386),r=n(309).handleHash,a=n(396);e.exports={OpenPositions:{onLoad:function(){a.scrollToHashSection()}},VolidxMarkets:{onLoad:function(){a.goToHashSection(),i.onLoad()},onUnload:function(){a.offScroll()}},OpenSourceProjects:{onLoad:function(){a.sidebarScroll($(".open-source-projects"))},onUnload:function(){a.offScroll()}},PaymentAgent:{onLoad:function(){a.sidebarScroll($(".payment-agent"))},onUnload:function(){a.offScroll()}},AffiliateSignup:{onLoad:function(){tabListener(),r()}}}},function(e,t){"use strict";var n=function(){var e=void 0,t=function(t){if(e=t,t.on("click","#sidebar-nav li",function(){var e=$(this);return $.scrollTo($(".section:eq("+e.index()+")"),500),!1}),t.length){var n=t.find(".sidebar"),i=t.find(".sidebar-container"),r=n.width(),a=n.offset().top,o=function(){if(n.is(":visible")){r||(r=n.width(),a=n.offset().top);var e=$(window).scrollTop();e+n[0].offsetHeight>i[0].offsetHeight+i.offset().top?n.css({position:"absolute",bottom:0,top:"",width:r}):e>a?n.css({position:"fixed",top:0,bottom:"",width:r}):n.css({position:"relative"})}};o();var s=n.find("#sidebar-nav"),c=t.find(".section").length;$(window).on("scroll",function(){if(s.is(":visible")){o();for(var e=0;e<c;e++){var t=$(".section:eq("+e+")"),n=t.offset(),i=n&&$(this).scrollTop()>=n.top-5;0!==$(window).scrollTop()&&!i||"none"===t.css("display")||(s.find("li").removeClass("selected"),0===$(window).scrollTop()||0===s.width()?s.find("li:first-child").addClass("selected"):$(window).scrollTop()+$(window).height()>=$(document).height()?s.find("li:last-child").addClass("selected"):s.find("li:eq("+e+")").addClass("selected"))}}})}},n=function(){var e=!1,t=$("#scrollup");$(document).scroll(function(){if($(this).scrollTop()>100){if(e)return;t.fadeIn(),e=!0}else e&&(t.fadeOut(),e=!1)}),t.click(function(){$.scrollTo(0,500)})};return{sidebarScroll:t,scrollToTop:n,offScroll:function(){$(window).off("scroll"),e&&(e.find("#sidebar-nav li").off("click"),e="")},goToHashSection:function(){var e=window.location.hash;e&&$('a[href="'+e+'"]').click()},scrollToHashSection:function(){var e=window.location.hash;e&&$.scrollTo($(e))}}}();e.exports=n},function(e,t,n){"use strict";var i=n(319).localize,r=n(313).param,a=n(396),o=n(398),s=function(){var e=function(){t(),o.requiresTNCApproval($("#btn_accept"),function(){$(".tnc_accept").setVisibility(1)},function(){$("#tnc_accept").html(i("Your settings have been updated successfully."))}),a.sidebarScroll($(".tac-binary")),tabListener(),$(".currentYear").text((new Date).getFullYear())},t=function(){var e=window.location.hash||"#legal",t=".tab-menu-wrap",n=".tab-content-wrapper",i="active",a="a-active";$(t).find("li").removeClass(i).find("span").removeClass(a);var o=$(e);(o.find(".tm-li-2").length>0||/tm-li-2/.test($(e).attr("class")))&&(o=o.find(".tm-a-2").first().addClass(a).closest(".tm-li")),o.addClass(i);var s="div"+e+"-content";0===$(s).length&&(s="div#"+$(e).find(".tm-li-2").first().attr("id")+"-content"),$(n).find("> div").setVisibility(0).end().find(s).setVisibility(1);var c=r("section"),l=$("#content");if(c){var d=l.find("a#"+c);d.length&&setTimeout(function(){$.scrollTo(d,0,{offset:-10})},500)}else window.location.hash&&setTimeout(function(){$.scrollTo(l.find(".tab-menu"),0,{offset:-10})},500)},n=function(){a.offScroll()};return{onLoad:e,onUnload:n}}();e.exports=s},function(e,t,n){"use strict";var i=n(318),r=n(371),a=n(310),o=n(399),s=n(313).defaultRedirectUrl,c=n(313).urlFor,l=n(309).template,d=function(){var e=function(){n($("#btn_accept"),t,null,!0)},t=function(){var e=a.get("landing_company_fullname");if(e){var t=$("#tnc_container"),n=t.find("#tnc_message");n.html(l(n.html(),[e,c("jp"===a.get("residence")?"terms-and-conditions-jp":"terms-and-conditions")])),t.find("#tnc_loading").remove(),t.find("#tnc_approval").setVisibility(1)}},n=function(e,t,n,r){i.wait("website_status","get_settings").then(function(){return a.shouldAcceptTnc()?(t(),void e.click(function(e){e.preventDefault(),e.stopPropagation(),i.send({tnc_approval:"1"},{forced:!0}).then(function(e){e.error?$("#err_message").html(e.error.message).setVisibility(1):(i.send({get_settings:1},{forced:!0}).then(function(){o.displayAccountStatus()}),d(r),"function"==typeof n&&n())})})):void d(r)})},d=function(e){e&&setTimeout(function(){r.load(s())},500)};return{onLoad:e,requiresTNCApproval:n}}();e.exports=d},function(e,t,n){"use strict";var i=n(371),r=n(310),a=n(368),o=n(319).localize,s=n(369),c=n(312).State,l=n(313).urlFor,d=n(315).checkClientsCountry,u=n(315).jpClient,p=n(318),f=n(400),h=function(){var e=function(){n(),t(),s.isLoginPages()||d(),r.isLoggedIn()&&($("ul#menu-top").addClass("smaller-font"),y())},t=function(){$("#logo").off("click").on("click",function(){i.load(l(r.isLoggedIn()?u()?"multi_barriers_trading":"trading":""))}),$("#btn_login").off("click").on("click",function(e){e.preventDefault(),s.redirectToLogin()}),$("a.logout").off("click").on("click",function(){r.sendLogoutRequest()})},n=function(){if(r.isLoggedIn()){var e=$("<div/>"),t=r.get("loginid_array");t.forEach(function(t){if(!t.disabled){var n="Virtual";t.real&&(n=t.financial?"Investment":t.non_financial?"Gaming":"Real"),n+=" Account";var i=t.id,a=o(n);i===r.get("loginid")?($(".account-type").html(a),$(".account-id").html(i)):e.append($("<a/>",{href:"javascript:;","data-value":i}).append($("<li/>",{text:a}).append($("<div/>",{text:i})))).append($("<div/>",{class:"separator-line-thin-gray"}))}});var n=void 0;$(".login-id-list").html(e).find("a").off("click").on("click",function(e){e.preventDefault(),n=$(this),n.attr("disabled","disabled"),m(n.attr("data-value"))})}},h=function(e){f.isEligible(e)&&$("#all-accounts").find("#user_menu_metatrader").setVisibility(1)},m=function(e){if(e&&0!==e.length){var t=r.getToken(e);if(!t||0===t.length)return void r.sendLogoutRequest(!0);r.clear(),sessionStorage.setItem("active_tab","1"),r.setCookie("loginid",e),r.setCookie("login",t),a.setLoginFlag(),localStorage.setItem("active_loginid",e),$(".login-id-list a").removeAttr("disabled"),window.location.reload()}},g=function(){p.wait("authorize","landing_company","get_settings").then(function(){var e=c.get(["response","landing_company","landing_company"]),t=r.get("loginid_array"),n=$(".upgrademessage"),i=function(e,t){n.setVisibility(1).find("a").setVisibility(1).attr("href",l(e)).html($("<span/>",{text:o(t)}))};if(r.get("is_virtual")){var a=!t.some(function(e){return e.real});n.setVisibility(1).find("> span").setVisibility(1).end().find("a").setVisibility(0);var s=(c.get(["response","get_settings","get_settings","jp_account_status"])||{}).status;if(s){var d=u()&&t.some(function(e){return e.real&&e.disabled});/jp_knowledge_test_(pending|fail)/.test(s)?i("/new_account/knowledge_testws","{JAPAN ONLY}Take knowledge test"):(a||d&&"disabled"!==s)&&(n.setVisibility(1),"jp_activation_pending"===s?0===$(".activation-message").length&&$("#virtual-text").append($("<div/>",{class:"activation-message",text:" "+o("Your Application is Being Processed.")})):"activated"===s&&0===$(".activated-message").length&&$("#virtual-text").append($("<div/>",{class:"activated-message",text:" "+o("{JAPAN ONLY}Your Application has Been Processed. Please Re-Login to Access Your Real-Money Account.")})))}else a?(n.find("> span").setVisibility(1),r.canUpgradeVirtualToFinancial(e)?i("new_account/maltainvestws","Upgrade to a Financial Account"):r.canUpgradeVirtualToJapan(e)?i("new_account/japanws","Upgrade to a Real Account"):i("new_account/realws","Upgrade to a Real Account")):n.find("a").setVisibility(0).html("")}else{var p=!1;(r.canUpgradeGamingToFinancial(e)||"gb"===r.get("residence")&&/^MLT/.test(r.get("loginid")))&&(p=!t.some(function(e){return e.financial})),p?($("#virtual-text").parent().setVisibility(0),i("new_account/maltainvestws","Open a Financial Account")):n.setVisibility(0)}})},_=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=$("#msg_notification");i.html(e).attr({"data-message":e,"data-code":n}),i.is(":hidden")?i.slideDown(500,function(){t&&i.addClass("error")}):t?i.addClass("error"):i.removeClass("error")},v=function(e){var t=$("#msg_notification");e&&t.attr("data-code")!==e||t.is(":visible")&&t.removeClass("error").slideUp(500,function(){t.html("").removeAttr("data-message data-code")})},y=function(){p.wait("authorize").then(function(){var e=void 0,t=void 0,n=!1,i=!1,a=/costarica/.test(r.get("landing_company_name")),s=function(){var e=!/age_verification/.test(t)&&!a;return(!/authenticated/.test(t)||e)&&!u()&&n},d=function(){return("high"===e.risk_classification||r.isFinancial()||i)&&/financial_assessment_not_complete/.test(t)&&!u()},f=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return o(e,['<a href="'+l(t)+n+'">',"</a>"])},h={authenticate:function(){return f("[_1]Authenticate your account[_2] now to take full advantage of all payment methods available.","user/authenticate")},financial_limit:function(){return f("Please set your [_1]30-day turnover limit[_2] to remove deposit limits.","user/security/self_exclusionws")},residence:function(){return f("Please set [_1]country of residence[_2] before upgrading to a real-money account.","user/settings/detailsws")},risk:function(){return f("Please complete the [_1]financial assessment form[_2] to lift your withdrawal and trading limits.","user/settings/assessmentws")},tax:function(){return f("Please [_1]complete your account profile[_2] to lift your withdrawal and trading limits.","user/settings/detailsws")},tnc:function(){return f("Please [_1]accept the updated Terms and Conditions[_2] to lift your withdrawal and trading limits.","user/tnc_approvalws")},unwelcome:function(){return f("Your account is restricted. Kindly [_1]contact customer support[_2] for assistance.","contact")}},m={authenticate:function(){return s()},financial_limit:function(){return/ukrts_max_turnover_limit_not_set/.test(t)},residence:function(){return!r.get("residence")},risk:function(){return d()},tax:function(){return r.shouldCompleteTax()},tnc:function(){return r.shouldAcceptTnc()},unwelcome:function(){return/(unwelcome|(cashier|withdrawal)_locked)/.test(t)}},g=["tnc","financial_limit","risk","tax","authenticate","unwelcome"],y=["residence"],b=function(e){var t=e.some(function(e){return!!m[e]()&&(_(h[e]()),!0)});t||v()};r.get("is_virtual")?b(y):p.wait("website_status","get_account_status","get_settings","balance").then(function(){e=c.get(["response","get_account_status","get_account_status"])||{},t=e.status,a&&+r.get("balance")<200?p.wait("mt5_login_list").then(function(e){e.mt5_login_list.length&&(n=!0,i=!0),b(g)}):(n=!0,b(g))})})};return{onLoad:e,upgradeMessageVisibility:g,metatraderMenuItemVisibility:h,displayNotification:_,hideNotification:v,displayAccountStatus:y}}();e.exports=h},function(e,t,n){"use strict";var i=n(401),r=n(402),a=n(318),o=n(310),s=n(319).localize,c=n(390),l=function(){var e=i.types_info,t=i.actions_info,n=i.fields,l=void 0,d=void 0,u=function(){a.wait("landing_company").then(function(e){p(e)?(f("gaming",d),f("financial",l),h(),r.init(v)):r.displayPageError(s("Sorry, this feature is not available in your jurisdiction."))})},p=function(e){var t=!1;if(!e.error){var n=e.landing_company;l=n.hasOwnProperty("mt_financial_company")&&"vanuatu"===n.mt_financial_company.shortcode,d=n.hasOwnProperty("mt_gaming_company")&&"costarica"===n.mt_gaming_company.shortcode,n.hasOwnProperty("financial_company")&&"costarica"===n.financial_company.shortcode&&(l||d)&&(t=!0)}return t},f=function(t,n){Object.keys(e).forEach(function(i){e[i].account_type===t&&(e[i].is_enabled=n)})},h=function(){a.wait("mt5_login_list").then(function(t){var n=(t.mt5_login_list||[]).filter(function(t){return t.group&&o.getMT5AccountType(t.group)in e});n.forEach(function(t){var n=o.getMT5AccountType(t.group);e[n].account_info={login:t.login},g(t.login,n)}),o.set("mt5_account",m(n)),Object.keys(e).forEach(function(t){e[t].account_info||r.updateAccount(t)})})},m=function(t){return Object.keys(e).indexOf(location.hash.substring(1))>=0?location.hash.substring(1):o.get("mt5_account")||(t&&t.length?o.getMT5AccountType((t.find(function(e){return/real/.test(e.group)})||t.find(function(e){return/demo/.test(e.group)})||{}).group):"demo_vanuatu_cent")},g=function(t,n){a.send({mt5_get_settings:1,login:t}).then(function(t){t.mt5_get_settings&&(e[n].account_info=t.mt5_get_settings,r.updateAccount(n))})},_=function(e,t){var i={};return Object.keys(n[t]).forEach(function(e){var a=n[t][e];a.request_field&&(i[a.request_field]=r.$form().find(a.id).val())}),i["mt5_"+t]=1,$.extend(i,n[t].additional_fields(e)),i},v=function(n){n.preventDefault(),r.hideFormMessage();var i=$(n.target),o=i.attr("acc_type"),s=i.attr("action");c.validate("#frm_"+s)&&(r.disableButton(),r.postValidate(o,s).then(function(n){if(!n)return void r.enableButton();var i=_(o,s);a.send(i).then(function(n){if(n.error)r.displayFormMessage(n.error.message),r.enableButton();else{var i=t[s].login?t[s].login(n):e[o].account_info.login;e[o].account_info||(e[o].account_info={login:i}),r.loadAction(null,o),r.displayMainMessage(t[s].success_msg(n)),g(i,o),"function"==typeof t[s].onSuccess&&t[s].onSuccess(n,o)}r.enableButton()})}))};return{onLoad:u,isEligible:p}}();e.exports=l},function(e,t,n){"use strict";var i=n(318),r=n(310),a=n(368),o=n(319).localize,s=n(312).State,c=n(313).urlFor,l=n(325).formatMoney,d=function(){var e={demo_vanuatu_cent:{account_type:"demo",mt5_account_type:"cent",title:o("Demo Cent"),order:1,max_leverage:1e3,is_demo:!0},demo_vanuatu_standard:{account_type:"demo",mt5_account_type:"standard",title:o("Demo Standard"),order:3,max_leverage:300,is_demo:!0},demo_vanuatu_stp:{account_type:"demo",mt5_account_type:"stp",title:o("Demo STP"),order:5,max_leverage:100,is_demo:!0},real_vanuatu_cent:{account_type:"financial",mt5_account_type:"cent",title:o("Real Cent"),order:2,max_leverage:1e3},real_vanuatu_standard:{account_type:"financial",mt5_account_type:"standard",title:o("Real Standard"),order:4,max_leverage:300},real_vanuatu_stp:{account_type:"financial",mt5_account_type:"stp",title:o("Real STP"),order:6,max_leverage:100},demo_costarica:{account_type:"demo",mt5_account_type:"",title:o("Demo Volatility"),order:7,max_leverage:500,is_demo:!0},real_costarica:{account_type:"gaming",mt5_account_type:"",title:o("Real Volatility"),order:8,max_leverage:500}},t=function(){return $("#msg_"+(r.get("has_real")?"switch":"upgrade")).html()},n={new_account:{title:o("Sign up"),success_msg:function(t){return o("Congratulations! Your [_1] Account has been created.",e[Object.keys(e).find(function(n){return e[n].account_type===t.mt5_new_account.account_type&&e[n].mt5_account_type===(t.mt5_new_account.mt5_account_type||"")})].title)},login:function(e){return e.mt5_new_account.login},prerequisites:function(n){return new Promise(function(a){e[n].is_demo?a():r.get("is_virtual")?a(t()):"financial"===e[n].account_type?i.wait("get_account_status").then(function(e){a(/financial_assessment_not_complete/.test(e.get_account_status.status)?$("#msg_assessment").find("a").attr("onclick","localStorage.setItem('financial_assessment_redirect', '"+c("user/metatrader")+"')").end().html():"")}):a()})},formValues:function(t,n,i){t.find(d[i].lbl_account_type.id).text(e[n].title),t.find(d[i].lbl_email.id).text(d[i].additional_fields(n).email)},onSuccess:function(e){a.mt5NewAccount(e)}},password_change:{title:o("Change Password"),success_msg:function(e){return o("The main password of account number [_1] has been changed.",[e.echo_req.login])},prerequisites:function(){return new Promise(function(e){return e("")})},formValues:function(e,t,n){e.find(d[n].lbl_login.id).text(d[n].additional_fields(t).login)}},deposit:{title:o("Deposit"),success_msg:function(e){return o("[_1] deposit from [_2] to account number [_3] is done. Transaction ID: [_4]",[l(s.get(["response","authorize","authorize","currency"]),e.echo_req.amount),e.echo_req.from_binary,e.echo_req.to_mt5,e.binary_transaction_id])},prerequisites:function(){return new Promise(function(e){r.get("is_virtual")?e(t()):i.send({cashier_password:1}).then(function(t){t.error||1!==t.cashier_password?e():e(o('Your cashier is locked as per your request - to unlock it, please click <a href="[_1]">here</a>.',[c("user/security/cashier_passwordws")]))})})},formValues:function(e,t,n){e.find(d[n].lbl_from.id).text(d[n].additional_fields(t).from_binary),e.find(d[n].lbl_to.id).text(d[n].additional_fields(t).to_mt5)}},withdrawal:{title:o("Withdraw"),success_msg:function(e){return o("[_1] withdrawal from account number [_2] to [_3] is done. Transaction ID: [_4]",[l(s.get(["response","authorize","authorize","currency"]),e.echo_req.amount),e.echo_req.from_mt5,e.echo_req.to_binary,e.binary_transaction_id])},prerequisites:function(n){return new Promise(function(a){r.get("is_virtual")?a(t()):"financial"===e[n].account_type?i.send({get_account_status:1}).then(function(e){a($.inArray("authenticated",e.get_account_status.status)===-1?$("#msg_authenticate").html():"")}):a()})},pre_submit:function(t,n,r){return i.send({mt5_password_check:1,login:e[n].account_info.login,password:t.find(d.withdrawal.txt_main_pass.id).val()}).then(function(e){return 1===+e.mt5_password_check||(e.error&&r(e.error.message),!1)})},formValues:function(e,t,n){e.find(d[n].lbl_from.id).text(d[n].additional_fields(t).from_mt5),e.find(d[n].lbl_to.id).text(d[n].additional_fields(t).to_binary)}}},d={new_account:{lbl_account_type:{id:"#lbl_account_type"},lbl_email:{id:"#lbl_email"},txt_name:{id:"#txt_name",request_field:"name"},txt_main_pass:{id:"#txt_main_pass",request_field:"mainPassword"},txt_re_main_pass:{id:"#txt_re_main_pass"},txt_investor_pass:{id:"#txt_investor_pass",request_field:"investPassword"},chk_tnc:{id:"#chk_tnc"},additional_fields:function(t){return $.extend({
account_type:e[t].account_type,email:r.get("email"),leverage:e[t].max_leverage},e[t].mt5_account_type?{mt5_account_type:e[t].mt5_account_type}:{})}},password_change:{lbl_login:{id:"#lbl_login"},txt_old_password:{id:"#txt_old_password",request_field:"old_password"},txt_new_password:{id:"#txt_new_password",request_field:"new_password"},txt_re_new_password:{id:"#txt_re_new_password"},additional_fields:function(t){return{login:e[t].account_info.login}}},deposit:{lbl_from:{id:"#lbl_from"},lbl_to:{id:"#lbl_to"},txt_amount:{id:"#txt_amount",request_field:"amount"},additional_fields:function(t){return{from_binary:r.get("loginid"),to_mt5:e[t].account_info.login}}},withdrawal:{lbl_from:{id:"#lbl_from"},lbl_to:{id:"#lbl_to"},txt_amount:{id:"#txt_amount",request_field:"amount"},txt_main_pass:{id:"#txt_main_pass"},additional_fields:function(t){return{from_mt5:e[t].account_info.login,to_binary:r.get("loginid")}}}},u={new_account:[{selector:d.new_account.txt_name.id,validations:["req","letter_symbol",["length",{min:2,max:30}]]},{selector:d.new_account.txt_main_pass.id,validations:["req",["password","mt"]]},{selector:d.new_account.txt_re_main_pass.id,validations:["req",["compare",{to:d.new_account.txt_main_pass.id}]]},{selector:d.new_account.txt_investor_pass.id,validations:["req",["password","mt"],["not_equal",{to:d.new_account.txt_main_pass.id,name1:"Main password",name2:"Investor password"}]]},{selector:d.new_account.chk_tnc.id,validations:[["req",{message:"Please accept the terms and conditions."}]]}],password_change:[{selector:d.password_change.txt_old_password.id,validations:["req"]},{selector:d.password_change.txt_new_password.id,validations:["req",["password","mt"],["not_equal",{to:d.password_change.txt_old_password.id,name1:"Current password",name2:"New password"}]],re_check_field:d.password_change.txt_re_new_password.id},{selector:d.password_change.txt_re_new_password.id,validations:["req",["compare",{to:d.password_change.txt_new_password.id}]]}],deposit:[{selector:d.deposit.txt_amount.id,validations:["req",["number",{type:"float",min:1,max:2e4,decimals:"0, 2"}]]}],withdrawal:[{selector:d.withdrawal.txt_main_pass.id,validations:["req"]},{selector:d.withdrawal.txt_amount.id,validations:["req",["number",{type:"float",min:1,max:2e4,decimals:"0, 2"}]]}]};return{types_info:e,actions_info:n,fields:d,validations:u}}();e.exports=d},function(e,t,n){"use strict";var i=n(310),r=n(309).showLoadingImage,a=n(325).formatMoney,o=n(390),s=n(401),c=function(){var e=void 0,t=void 0,n=void 0,c=void 0,l=void 0,d=void 0,u=void 0,p=void 0,f=void 0,h=void 0,m=s.types_info,g=s.actions_info,_=s.validations,v=function(i){h=i,e=$("#mt_account_management"),n=e.find("#mt5_account"),t=e.find("#accounts_list"),c=t.find("> div"),l=e.find("#account_detail"),d=e.find("#fst_action"),u=e.find("#templates"),f=e.find("#main_msg"),l.find('[class*="act_"]').click(S),y()},y=function(){var r=u.find("> .acc-name"),a=i.get("is_virtual")&&!i.get("has_real");e.find("#top_msg").setVisibility(a),Object.keys(m).sort(function(e,t){return m[e].order>m[t].order}).forEach(function(e,t){if(0===c.find("#"+e).length){var n=r.clone();n.attr("value",e),a&&/real/.test(e)&&n.addClass("disabled"),c.append(n),t%2===1&&t<Object.keys(m).length-1&&c.append($("<div/>",{class:"separator fill-bg-color"}))}});var o=function(){t.slideUp("fast",function(){n.removeClass("open")})};n.off("click").on("click",function(e){e.stopPropagation(),t.is(":hidden")?(n.addClass("open"),t.slideDown("fast")):o()}),c.off("click").on("click",".acc-name",function(){$(this).hasClass("disabled")||b($(this).attr("value"),!0)}),$(document).off("click.mt5_account_list").on("click.mt5_account_list",function(){o()})},b=function(e,t){n.attr("value")!==e&&(i.set("mt5_account",e),n.attr("value",e).html(m[e].title).removeClass("empty"),d.setVisibility(0),t&&k(e))},w=function(e){x(e),k(e)},x=function(e){var t=c.find("[value="+e+"]");t.find(".mt-type").text(""+m[e].title),m[e].account_info?(t.find(".mt-login").text(m[e].account_info.login),t.find(".mt-balance").text(a("USD",+m[e].account_info.balance)),t.find(".mt-new").setVisibility(0)):t.find(".mt-new").setVisibility(1)},k=function(t){t===i.get("mt5_account")&&(l.find("#account_desc").html(u.find(".account-desc ."+t).clone()),m[t].account_info?(l.find(".acc-info div[data]").map(function(){var e=$(this).attr("data"),n=m[t].account_info[e];$(this).text("balance"===e?a("USD",+n):"leverage"===e?"1:"+n:n)}),l.find(".act_deposit, .act_withdrawal").setVisibility(!m[t].is_demo),l.find(".has-account").setVisibility(1),l.find("#account_desc .more").setVisibility(0)):l.find(".acc-info, .acc-actions").setVisibility(0),$("#mt_loading").remove(),e.setVisibility(1),b(t),d.hasClass("invisible")&&I(C(t)))},C=function(e){return m[e].account_info?m[e].is_demo?"password_change":"deposit":"new_account"},I=function(e,t){l.find(".acc-actions [class*=act_"+(e||C(t))+"]").click()},S=function(e){var t=$(e.target);"a"!==t.prop("tagName").toLowerCase()&&(t=t.parents("a"));var n=i.get("mt5_account"),r=t.attr("class").split(" ").find(function(e){return/^act_/.test(e)}).replace("act_","");l.find('[class*="act_"]').removeClass("selected"),t.addClass("selected"),d.find("h3").text(g[r].title),g[r].prerequisites(n).then(function(e){if(e)return A(e),void d.find("#frm_action").empty().end().setVisibility(1);d.find("#frm_"+r).length||f.setVisibility(0),p=u.find("#frm_"+r).clone();var t=g[r].formValues;t&&t(p,n,r),p.find("#btn_submit").attr({acc_type:n,action:r}).on("click dblclick",h),d.find("#frm_action").html(p).setVisibility(1).end().setVisibility(1),o.init("#frm_"+r,_[r])})},E=function(e,t){var n=g[t].pre_submit;return n?n(p,e,B):new Promise(function(e){return e(!0)})},T=function(){p.find("#msg_form").html("").setVisibility(0)},B=function(e){p.find("#msg_form").text(e).setVisibility(1)},A=function(e){f.html(e).setVisibility(1),$.scrollTo(d,500,{offset:-80})},O=function(e){$("#page_msg").html(e).setVisibility(1),$("#mt_loading").remove()},P=function(){var e=p.find("button");if(e.length&&!e.find(".barspinner").length){e.attr("disabled","disabled");var t=$("<span/>",{text:e.text(),class:"invisible"});r(e,"white"),e.append(t)}},L=function(){var e=p.find("button");e.length&&e.find(".barspinner").length&&e.removeAttr("disabled").html(e.find("span").text())};return{init:v,$form:function(){return p},loadAction:I,updateAccount:w,postValidate:E,hideFormMessage:T,displayFormMessage:B,displayMainMessage:A,displayPageError:O,disableButton:P,enableButton:L}}();e.exports=c},function(e,t,n){"use strict";var i=n(371),r=n(310),a=n(319).localize,o=n(313).defaultRedirectUrl,s=n(320).getLoginToken,c=n(382),l=n(318),d=function(){var e=function(){return r.get("loginid_array").find(function(e){return e.id===r.get("loginid")}).financial?void l.send({get_account_status:1}).then(function(e){if(e.error)$("#error_message").setVisibility(1).text(e.error.message);else{var t=e.get_account_status.status;/authenticated/.test(t)?i.load(o()):(c.showDeskLink("","#facility_content"),r.isFinancial()||$("#not_authenticated").setVisibility(1),$(".msg_authenticate").setVisibility(1),$("#generated_token").text(s().slice(-4)))}}):void $("#loading").replaceWith($("<p/>",{class:"notice-msg center-text",text:a("Sorry, this feature is not available in your jurisdiction.")}))};return{onLoad:e}}();e.exports=d},function(e,t,n){"use strict";var i=n(310),r=n(396),a=function(){var e=function(){r.sidebarScroll($(".why-us")),i.activateByClientType()},t=function(){r.offScroll()};return{onLoad:e,onUnload:t}}();e.exports=a},function(e,t,n){"use strict";var i=n(318),r=n(310),a=n(319).localize,o=n(389),s=function(){var e="#frm_account_transfer",t=void 0,n=void 0,s=function(i,o){if(i.error||o.error)return void $("#error_message").find("p").text((i.error||o.error).message).end().setVisibility(1);t=i.accounts;var s=r.get("loginid"),l=$(e);n=l.find("#transfer");var d=void 0,u=void 0,p=void 0,f=void 0;t.forEach(function(e,i){+e.balance&&(u=t[i].loginid,p=t[1-i].loginid,d=a("from [_1] to [_2]",[u,p]),f=s===u?Math.min(+t[i].balance,+o.get_limits.remainder):+t[i].balance,n.append($("<option/>",{text:d,"data-from":u,"data-to":p,"data-currency":t[i].currency,"data-balance":f})))});var h=n.find('option[data-from="'+s+'"]');0!==h.length&&h.insertBefore(n.find("option:eq(0)")).attr("selected","selected"),u?c(l):$("#client_message").setVisibility(1)},c=function(t){var i=t.find("#currency");n.on("change",function(){l(i,$(this)),u()}),l(i),t.setVisibility(1),u(),o.handleSubmit({form_selector:e,fnc_response_handler:p})},l=function(e){e.text(d("data-currency"))},d=function(e){return n.find("option:selected").attr(e)},u=function(){o.init(e,[{selector:"#amount",validations:["req",["number",{type:"float",decimals:"1, 2",min:.1,max:d("data-balance"),custom_message:"This amount exceeds your withdrawal limit."}]]},{request_field:"transfer_between_accounts",value:1},{request_field:"account_from",value:function(){return d("data-from")}},{request_field:"account_to",value:function(){return d("data-to")}},{request_field:"currency",value:function(){return d("data-currency")}}])},p=function(e){e.error?$("#form_error").text(e.error.message).setVisibility(1):i.send({transfer_between_accounts:1}).then(function(e){return f(e)})},f=function(n){$(e).setVisibility(0),t=n.accounts,t.forEach(function(e,t){$("#loginid_"+(t+1)).text(e.loginid),$("#balance_"+(t+1)).text(e.currency+" "+e.balance)}),$("#success_form").setVisibility(1)},h=function(){i.send({transfer_between_accounts:1}).then(function(e){i.send({get_limits:1}).then(function(t){return s(e,t)})})};return{onLoad:h}}();e.exports=s},function(e,t,n){"use strict";var i=n(318),r=n(371),a=n(310),o=n(399),s=n(313).defaultRedirectUrl,c=n(313).urlFor,l=n(315).jpClient,d=n(315).jpResidence,u=n(325).isCryptocurrency,p=function(){var e="",t=function(){a.activateByClientType()},n=function(){i.wait("balance").then(function(t){var n=t.balance.currency,i=+t.balance.balance,r="JPY"!==n&&i<=1e3||"JPY"===n&&i<=1e5,a="#VRT_topup_link",o=$(a),s=["toggle","button-disabled"],l={class:o.attr("class").replace(s[+r],s[1-+r]),html:o.html(),id:o.attr("id")};r&&(e=e||c("/cashier/top_up_virtualws"),l.href=e),o.replaceWith($("<a/>",l)),$(a).parent().setVisibility(1)})},p=function(){l()&&!d()&&r.load(s()),a.isLoggedIn()&&i.wait("authorize").then(function(){o.upgradeMessageVisibility();var e=a.get("is_virtual"),t=u(a.get("currency"));e&&n(),(e||/CR/.test(a.get("loginid"))&&!t)&&$("#payment-agent-section").setVisibility(1),$(t?".crypto_currency":".normal_currency").setVisibility(1),a.hasGamingFinancialEnabled()&&$("#account-transfer-section").setVisibility(1)}),t()};return{onLoad:p,PaymentMethods:{onLoad:function(){t()}}}}();e.exports=p},function(e,t,n){"use strict";var i=n(318),r=n(310),a=n(319).localize,o=n(309).template,s=n(320).appendTextValueChild,c=n(389),l=function(){var e=void 0,t="#deposit_withdraw",n=void 0,l=function(e){return e?(v("cashier_locked_message"),void sessionStorage.setItem("cashier_lock_redirect",window.location.href)):void(r.get("currency")?d():p())},d=function(t){if(t){if(t.error)return void _("custom_error",t.error.message);"set_account_currency"===t.msg_type&&r.setCurrency(t.echo_req.set_account_currency)}"deposit"===e?m():"withdraw"===e&&(g("#messages"),u())},u=function(){i.send({verify_email:r.get("email"),type:"payment_withdraw"}).then(function(e){if("error"in e)_("custom_error",e.error.message);else{v("check_email_message");var t="#frm_withdraw";$(t).setVisibility(1),c.init(t,[{selector:"#verification_code",validations:["req","email_token"]}]);var n=h();c.handleSubmit({form_selector:t,obj_request:n,fnc_response_handler:x})}})},p=function(){var e=r.get("currencies").split(",");e.forEach(function(e){s("select_currency",e,e)}),v("choose_currency_message");var t="#frm_currency";$(t).setVisibility(1),c.init(t,[{selector:"#select_currency",request_field:"set_account_currency"}]),c.handleSubmit({form_selector:t,fnc_response_handler:d})},f=function(){var n=$(t).find("#heading"),i=window.location.hash;/withdraw/.test(i)?(e="withdraw",n.text(a("Withdraw"))):/deposit/.test(i)&&(e="deposit",n.text(a("Deposit")))},h=function(t){var i={cashier:e},r=$("#verification_code").val();return r&&(n=r),t&&n&&(i.verification_code=n),/epg/.test(window.location.pathname)&&(i.provider="epg"),i},m=function(){i.send(h(1)).then(function(e){return x(e)})},g=function(e){$("#frm_withdraw, #frm_currency, #frm_ukgc, #errors").setVisibility(0),e&&$(e).setVisibility(0)},_=function(e,t){g(),t&&$("#"+e).text(t),v(e,"errors")},v=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"messages";$("#"+e).siblings().setVisibility(0).end().setVisibility(1),$(t).find("#"+n).setVisibility(1)},y=function(e){var t="personal_details_message",n=void 0;e&&(n={province:"State/Province",country:"Country",city:"Town/City",street:"First line of home address",pcode:"Postal Code / ZIP",phone:"Telephone",email:"Email address"});var i=$("#"+t),r=o(i.html(),[a(e?n[e]:"details")]);i.html(r),v(t)},b=function(e){"error"in e?_("custom_error",e.error.message):m()},w=function(){var e="#frm_ukgc";$(e).setVisibility(1),c.init(e,[{request_field:"ukgc_funds_protection",value:1},{request_field:"tnc_approval",value:1}]),c.handleSubmit({form_selector:e,fnc_response_handler:b})},x=function(e){g("#messages");var n=e.error;if(n)switch(n.code){case"ASK_TNC_APPROVAL":_("tnc_error");break;case"ASK_FIX_DETAILS":y(n.details);break;case"ASK_UK_FUNDS_PROTECTION":w();break;case"ASK_AUTHENTICATE":v("not_authenticated_message");break;case"ASK_FINANCIAL_RISK_APPROVAL":_("financial_risk_error");break;case"ASK_JP_KNOWLEDGE_TEST":_("knowledge_test_error");break;case"JP_NOT_ACTIVATION":_("activation_error");break;case"ASK_AGE_VERIFICATION":_("age_error");break;case"ASK_SELF_EXCLUSION_MAX_TURNOVER_SET":_("limits_error");break;default:_("custom_error",n.message)}else $(t).find("iframe").attr("src",e.cashier).parent().setVisibility(1)},k=function(){f(),i.send({cashier_password:1}).then(function(e){"error"in e?_("custom_error",e.error.message):l(e.cashier_password)})};return{onLoad:k}}();e.exports=l},function(e,t,n){"use strict";var i=n(311),r=n(318),a=n(313).urlForStatic,o=function(){var e=void 0,t=void 0,n="#target_country",o=function(){$(function(){$("#accordion").accordion({heightStyle:"content",collapsible:!0,active:!1})}),e=$("#pa_list"),t=e.find("#accordion").html();var n=i.get("residence");n&&0!==n.length||(n="00"),s(n,!0)},s=function(e,t){r.send({paymentagent_list:e||$(n).val()}).then(function(e){t?c(e):d(e.paymentagent_list.list)})},c=function(e){var t=$(n);t.empty();var i=e.paymentagent_list.available_countries;if(0===i.length)return t.parent().setVisibility(0),void u();var r=e.echo_req.paymentagent_list,a=!1;i.map(function(e){e===r&&(a=!0),l(t,e[1],e[0])}),$("#target_country").setVisibility(1),$(".barspinner").setVisibility(0),a?(t.val(r),d(e.paymentagent_list.list)):s(),t.change(function(){s()})},l=function(e,t,n){e.append($("<option/>",{value:n,text:t}))},d=function(n){if(!n||0===n.length)return void u();var i=$("<div/>",{id:"accordion"});n.map(function(e){var n="";if(e.supported_banks&&e.supported_banks.length>0){var r=e.supported_banks.split(",");r.map(function(e){n+=0===e.length?"":'<img src="'+a("images/pages/payment_agent/banks/"+e.toLowerCase()+".png")+'" alt="'+e+'" title="'+e+'" />'})}i.append(t.replace(/%name/g,e.name).replace(/%summary/g,e.summary).replace(/%deposit_commission/g,e.deposit_commission).replace(/%withdrawal_commission/g,e.withdrawal_commission).replace(/%url/g,e.url).replace(/%email/g,e.email).replace(/%telephone/g,e.telephone).replace(/%further_information/g,e.further_information).replace(/%supported_banks/g,n))}),e.empty().append(i),$("#accordion").accordion({heightStyle:"content",collapsible:!0,active:!1})},u=function(){$(".barspinner").setVisibility(0),$("#no_paymentagent").setVisibility(1)};return{onLoad:o}}();e.exports=o},function(e,t,n){"use strict";var i=n(311),r=n(318),a=n(310),o=n(319).localize,s=n(389),c=function(){var e={error:"#viewError",success:"#viewSuccess",confirm:"#viewConfirm",form:"#viewForm"},t={verification_code:"#verification_code",ddl_agents:"#ddlAgents",txt_amount:"#txtAmount",txt_desc:"#txtDescription"},n=void 0,c=void 0,l=function(n){var i=$(t.ddl_agents);i.empty();var c=(n.paymentagent_list||{}).list;if(c.length>0){r.send({verify_email:a.get("email"),type:"paymentagent_withdraw"}),d(i,o("Please select a payment agent"),"");for(var l=0;l<c.length;l++)d(i,c[l].name,c[l].paymentagent_loginid);f(e.form);var h="#"+$(e.form).find("form").attr("id");s.init(h,[{selector:t.ddl_agents,validations:["req"],request_field:"paymentagent_loginid"},{selector:t.txt_amount,validations:["req",["number",{type:"float",decimals:"1, 2",min:10,max:2e3}]],request_field:"amount"},{selector:t.txt_desc,validations:["general"],request_field:"description"},{selector:t.verification_code,validations:["req","email_token"]},{request_field:"currency",value:"USD"},{request_field:"paymentagent_withdraw",value:1},{request_field:"dry_run",value:1}]),s.handleSubmit({form_selector:h,fnc_response_handler:u,fnc_additional_check:m,enable_button:!0})}else p(o("The Payment Agent facility is currently not available in your country."))},d=function(e,t,n){e.append($("<option/>",{value:n,text:t}))},u=function t(n){var r=n.echo_req;switch(n.paymentagent_withdraw){case 2:f(e.confirm),$("#lblAgentName").text(c),$("#lblCurrency").text(r.currency),$("#lblAmount").text(r.amount),s.init(e.confirm,[{request_field:"paymentagent_loginid",value:r.paymentagent_loginid},{request_field:"amount",value:r.amount},{request_field:"description",value:r.description},{request_field:"verification_code",value:r.verification_code},{request_field:"currency",value:r.currency},{request_field:"paymentagent_withdraw",value:1}]),s.handleSubmit({form_selector:e.confirm,fnc_response_handler:t}),$(e.confirm+" #btnBack").click(function(){f(e.form)});break;case 1:f(e.success),$("#successMessage").css("display","").attr("class","success-msg").html($("<ul/>",{class:"checked"}).append($("<li/>",{text:o("Your request to withdraw [_1] [_2] from your account [_3] to Payment Agent [_4] account has been successfully processed.",[r.currency,r.amount,i.get("loginid"),c])})));break;default:1===n.echo_req.dry_run?(f(e.form),$("#formMessage").setVisibility(1).html(n.error.message)):p("InvalidToken"===n.error.code?o("Your token has expired or is invalid. Please click [_1]here[_2] to restart the verification process.",['<a href="javascript:;" onclick="window.location.reload();">',"</a>"]):n.error.message)}},p=function(t,n){var i=$(e.error);i.find(" > p").setVisibility(0),n?i.find("#"+n).setVisibility(1):i.find("#custom-error").html(t).setVisibility(1),f(e.error)},f=function(e){n.setVisibility(0),$(e).setVisibility(1)},h=function(){r.wait("get_account_status").then(function(e){n=$("#paymentagent_withdrawal").find(".viewItem"),n.setVisibility(0),/(withdrawal|cashier)_locked/.test(e.get_account_status.status)?p("","withdrawal-locked-error"):r.send({paymentagent_list:i.get("residence")}).then(function(e){return l(e)})})},m=function(){return c=$(t.ddl_agents).find("option:selected").text(),!0};return{onLoad:h}}();e.exports=c},function(e,t,n){"use strict";var i=n(304),r=n(411),a=n(308),o=n(412),s=n(303),c=n(413),l=n(318),d=n(329).cleanupChart,u=n(319).localize,p=n(312).State,f=n(360),h=function(){var e=0;p.remove("is_mb_trading");var t=function(){p.set("is_mb_trading",!0),a.set("disable_trading",1),0===e&&(e=1,o.init()),l.send({payout_currencies:1}).then(function(){r(),c.getSymbols()}),$("#tab_portfolio").find("a").text(u("Portfolio")),$("#tab_graph").find("a").text(u("Chart")),$("#tab_explanation").find("a").text(u("Explanation")),p.set("is_chart_allowed",!0),p.set("ViewPopup.onDisplayed",s.hidePriceOverlay),$(".container").css("max-width","1200px")},n=function(){window.location.reload()},h=function(){d(),p.set("is_chart_allowed",!1),f.hide(),p.remove("is_mb_trading"),e=0,i.onUnload(),s.onUnload(),c.onUnload(),l.clear("active_symbols"),p.remove("ViewPopup.onDisplayed"),$(".container").css("max-width","")},m=function(){s.showPriceOverlay(),d(),t()};return{onLoad:t,reload:n,onUnload:h,onDisconnect:m}}();e.exports=h},function(e,t,n){"use strict";var i=n(304),r=n(308),a=n(310),o=n(319).localize,s=n(315).jpClient,c=n(325).formatCurrency,l=function(){var e=$(".trade_form #currency"),t=e.find(".list"),n=a.get("currencies").split(","),l=s(),d=void 0;if(e.length){if(t.empty(),l)d="JPY";else{var u=r.get("currency");d=u&&n.indexOf(u)>=0?u:n[0],n.length>1&&(n.forEach(function(n){t.append($("<div/>",{value:n,text:c(n)})),d===n&&i.setCurrentItem(e,n)}),e.css("z-index","0"))}e.attr("value",d).find("> .current").html(l?o("Lots"):c(d)),r.set("currency",d)}};e.exports=l},function(e,t,n){"use strict";var i=n(304),r=n(308),a=n(327),o=n(303),s=n(413),c=n(359),l=n(328),d=n(344).debounce,u=n(319).localize,p=n(315).jpClient,f=n(325).formatMoney,h=function(){var e=function(){var e=$(".trade_form"),t="invisible";$(document).on("click",function(e){$(e.target).parents("#payout_list").length||B()}),e.find(".current").on("click",function(e){e.stopPropagation();var n=$(this).siblings(".list");n.hasClass(t)&&B(),n.toggleClass(t)});var n=e.find("#underlying");n.length&&n.on("click",".list > div",function(){var e=$(this).attr("value");i.setCurrentItem(n,e,1),r.set("underlying",e),a.hide("SYMBOL_INACTIVE"),c.clean(),s.getContracts(e),s.processForgetTicks(),c.request(e)});var h=e.find("#category");h.length&&h.on("click",".list > div",function(){var e=$(this).attr("value");i.setCurrentItem(h,e),r.set("category",e),i.populatePeriods("rebuild"),s.processPriceRequest(),l.request()});var m=e.find("#period");m.length&&m.on("click",".list > div",function(){var e=$(this).attr("value");i.setCurrentItem(m,e),r.set("period",e),s.processPriceRequest(),$(".remaining-time").removeClass("alert"),i.displayRemainingTime("recalculate")});var g=function(e){var t=!0,n=i.getCurrentContracts(),r=Array.isArray(n)&&"intraday"!==n[0].expiry_type?2e4:5e3;return(!e||isNaN(e)||p()&&(e<1||e>100)||e<=0||e>r)&&(t=!1),t},_=e.find("#payout"),v=e.find("#payout_list"),y=p();if(_.length){var b=function(e){_.find(".current").append($("<div/>",{class:"hint",text:u("Payout")}).append($("<span/>",{id:"actual_payout",text:f("JPY",1e3*e)})))},w=y?1:10;if(!_.attr("value")){var x=r.get("payout")||w;_.value=x,r.set("payout",x),_.attr("value",x).find(".current").html(x),y&&b(x)}_.find(".current").on("click",function(){w=+$(this).text();var e=$("#"+$(this).parent().attr("id")+"_list"),n=e.find(".list");e.hasClass(t)&&B(),e.toggleClass(t),n.toggleClass(t),h.toggleClass(t),m.toggleClass(t)}),v.on("click","> .list > div",d(function(){var e=+r.get("payout"),t=$(this).attr("value"),n=void 0;/(\+|\-)/.test(t)?(n=e+parseInt(t),n<1&&y&&(n=1)):/(ok|clear)/.test(t)?("clear"===t&&(n=w||10),B()):n=t,g(n)&&($(".price-table").setVisibility(1),r.set("payout",n),_.attr("value",n).find(".current").html(n),y&&b(n),s.processPriceRequest())}))}var k=e.find("#currency");k.length&&k.on("click",".list > div",function(){var e=$(this).attr("value");i.setCurrentItem(k,e),r.set("currency",e),s.processPriceRequest()});var C=".trading-status",I=$(C),S=I.find("#allow"),E=I.find("#disallow"),T=function(e){e?(o.hidePriceOverlay(),a.hide("TRADING_DISABLED"),E.removeClass("selected"),S.addClass("selected")):(o.showPriceOverlay(),S.removeClass("selected"),E.addClass("selected"))};I.length&&(T(0),I.on("click",function(e){var t=e.target.getAttribute("id");r.set("disable_trading","disallow"===t),T("allow"===t)}));var B=function(){e.find(".list, #payout_list").setVisibility(0).end().find("#period, #category").setVisibility(1)}};return{init:e}}();e.exports=h},function(e,t,n){"use strict";var i=n(304),r=n(308),a=n(327),o=n(303),s=n(414),c=n(359),l=n(318),d=n(344),u=n(371),p=n(310),f=n(314).get,h=n(319).localize,m=n(313).urlForStatic,g=n(312).State,_=n(315).jpClient,v=function(){var e="",t=void 0,n=function(){l.wait("website_status").then(function(e){var t=g.get(["response","landing_company","landing_company"]),n=p.currentLandingCompany().legal_allowed_markets;if(p.isLoggedIn()&&n&&n.indexOf("forex")===-1)return void u.load("trading");var i={active_symbols:"brief",product_type:"multi_barrier"};t?i.landing_company=t.financial_company?t.financial_company.shortcode:"japan":"jp"!==e.website_status.clients_country&&"JA"!==f()||(i.landing_company="japan"),l.send(i,{msg_type:"active_symbols"}).then(function(e){y(e)})})},y=function(e){if(e.hasOwnProperty("error"))return void a.show({text:e.error.message,uid:"ACTIVE_SYMBOLS"});s.details(e);var t=p.isLoggedIn()&&!_(),n=t?s.getAllSymbols():s.underlyings().major_pairs,i=r.get("underlying");i&&n[i]||(i=void 0,r.remove("underlying"));var o=!0;Object.keys(n).forEach(function(e){n[e].is_active&&(o=!1)}),I(),o?x():(k(),b(i),i&&!n[i].is_active?a.show({text:h("This symbol is not active. Please try another symbol."),uid:"SYMBOL_INACTIVE"}):v.processMarketUnderlying())},b=function(e){var t=$("#underlying"),n=s.getAllSymbols(),r=t.find(".list");r.empty(),t.find(".current").html($("<div/>",{class:"gr-row"}).append($("<img/>",{class:"gr-3 gr-no-gutter-m"})).append($("<span/>",{class:"name gr-6 gr-5-m align-self-center"})).append($("<span/>",{class:"gr-3 gr-4-m align-self-center still",id:"spot"}))),Object.keys(n).indexOf(e)===-1&&(e=""),Object.keys(n).forEach(function(a,o){if(n[a].is_active){var s=!e&&0===o||a===e,c=$("<div/>",{value:a,class:"gr-4 gr-4-t gr-4-m"}).append($("<img/>",{src:m("/images/pages/mb_trading/"+a.toLowerCase()+".svg"),alt:""})).append($("<div/>",{text:n[a].display,class:"name align-self-center"}));r.append(c),s&&i.setCurrentItem(t,a,1)}})},w=".trade-form, .price-table, #trading_bottom_content, .selection_wrapper, #trade_live_chart",x=function(){$(w).setVisibility(0),C("hide"),a.show({text:h("Market is closed. Please try again later."),uid:"MARKET_CLOSED"}),t=setTimeout(function(){n()},3e4)},k=function(){$(w).setVisibility(1),C("show"),a.hide("MARKET_CLOSED")},C=function(e){var t=["gr-5 ","gr-12 "],n="show"===e,i=$("#mb_trading").parent();i.attr("class",i.attr("class").replace(t[+n],t[+!n]))},I=function(){clearTimeout(t)},S=function(){var e=$("#underlying").attr("value");r.set("underlying",e),d.showFormOverlay(),R(),c.request(e),c.clean(),l.clearTimeouts(),T(e)},E=void 0,T=function e(t){var n={contracts_for:t||r.get("underlying"),currency:i.getCurrency(),product_type:"multi_barrier"};t||(n.passthrough={action:"no-proposal"}),l.send(n).then(function(e){a.hide("CONNECTION_ERROR"),i.setContractsResponse(e),A(e)}),E&&B(),E=setTimeout(e,15e3)},B=function(){clearTimeout(E)},A=function(e){if(e.hasOwnProperty("error"))return void a.show({text:e.error.message,uid:e.error.code});g.set("is_chart_allowed",!(e.contracts_for&&e.contracts_for.feed_license&&"chartonly"===e.contracts_for.feed_license)),O(e.contracts_for.close);var t=e.hasOwnProperty("passthrough")&&e.passthrough.hasOwnProperty("action")&&"no-proposal"===e.passthrough.action;return i.populateOptions(t?null:"rebuild"),t?void q():void P()},O=function(t){var i=window.time.unix();i>t?("open"===e&&x(),e="closed"):("closed"===e&&(n(),k()),e="open")},P=function(){o.increaseReqId(),M(),o.showPriceOverlay();var e=i.getCurrentContracts(),t=r.get("period").split("_"),n={proposal_array:1,subscribe:1,basis:"payout",amount:_()?1e3*(parseInt(r.get("payout"))||1):r.get("payout"),currency:i.getCurrency(),symbol:r.get("underlying"),passthrough:{req_id:o.getReqId()},date_expiry:t[1],contract_type:[],barriers:[],trading_period_start:t[0]};e.forEach(function(e){return n.contract_type.push(e.contract_type)});var s=!0,c=e[0];c.available_barriers.forEach(function(e){var t={};2===+c.barriers?(t.barrier=e[1],t.barrier2=e[0]):t.barrier=e,j(c.expired_barriers,t.barrier,t.barrier2)||(s=!1,n.barriers.push(t))}),n.barriers.length&&(o.addPriceObj(n),l.send(n,{callback:L})),s?(a.show({text:h("All barriers in this trading window are expired")+".",uid:"ALL_EXPIRED"}),o.hidePriceOverlay()):a.hide("ALL_EXPIRED")},L=function(e){var t=o.getReqId();if(e.passthrough.req_id===t){if(e.error)return void a.show({text:e.error.message,uid:"PROPOSAL",dismissible:!1});a.hide("PROPOSAL"),o.display(e)}},q=function(){var e=i.getCurrentContracts(),t=void 0,n=void 0;e.forEach(function(e){for(var i=e.expired_barriers,r=0;r<i.length;r++)t=2===+e.barriers?[i[r][0],i[r][1]].join("_"):i[r],n=$('div [data-barrier="'+t+'"]'),n.length>0&&(D(t),n.remove())})},j=function(e,t,n){return n?N(e,[[n,t]]):e.indexOf(t.toString())>-1},D=function(e){var t=o.getPrices();Object.keys(t[e]).forEach(function(n){t[e][n].hasOwnProperty("error")||l.send({forget:t[e][n].proposal.id})})},M=function(){o.showPriceOverlay(),l.send({forget_all:"proposal_array"}),o.cleanup()},R=function(){l.send({forget_all:"ticks"})},V=function(){M(),R()},N=function(e,t){for(var n={},i=0;i<e.length;i++)n[e[i]]=i;return n.hasOwnProperty(t)},F=function(){V(),I(),B(),s.clearData(),c.clean()};return{getSymbols:n,processActiveSymbols:y,processMarketUnderlying:S,getContracts:T,processContract:A,processPriceRequest:P,processProposal:L,processForgetTicks:R,forgetTradingStreams:V,onUnload:F}}();e.exports=v},function(e,t,n){"use strict";var i=n(347),r=function(){var e={},t={},n={},r={},a={},o=function(o){i.clearData();var s=o.active_symbols;e=i.getMarkets(s),t=i.getMarketsList(s),n=i.getTradeUnderlyings(s),r=i.getSymbols(r),a=i.getSymbolNames(s)};return{details:o,markets:function(n){return n?t:e},underlyings:function(){return n},getName:function(e){return a[e]},getAllSymbols:function(){return r},clearData:function(){i.clearData()}}}();e.exports=r},function(e,t,n){"use strict";var i=n(416),r=n(318),a=n(371),o=n(312).State,s=n(309).showLoadingImage,c=n(417),l=n(320).jqueryuiTabsToDropdown,d=n(315).jpClient,u=function(){var e=void 0,t=void 0,n=void 0,p=void 0,f=void 0,h=void 0,m=void 0,g=function(t){return d()?void(o.get("is_beta_trading")||a.load("resources")):(e=$("#asset-index"),f=h=void 0,o.get("is_beta_trading")||(p=void 0),void(e.contents().length||(s(e),m=t&&t.framed,f||w(),e.tabs())))},_=function(){if(p&&f){$("#errorMsg").setVisibility(0),f=i.getAssetIndexData(f,p),h=i.getMarketColumns(),t=$("<ul/>"),n=$("<div/>");for(var r=0;r<f.length;r++){var a=f[r],o=a[3];if(o){var s=v(a,o);s.find("tbody").append(y(a,o))}}e.empty().append(t).append(n.children()),e.is(":ui-tabs")&&e.tabs("destroy"),e.tabs(),m&&(e.find("ul").hide(),$("<div/>",{class:"center-text"}).append(l(e)).prependTo(e))}},v=function(e,i){var r="market-"+i.market,a="submarket-"+i.submarket,o=n.find("#"+a);if(0===o.length){var s=n.find("#"+r);0===s.length&&(s=$("<div/>",{id:r}),t.append($("<li/>").append($("<a/>",{href:"#"+r,text:i.market_display_name,id:"outline"})))),o=b(e,i,a),s.append(o),n.append(s)}return o},y=function(e,t){for(var n=[t.display_name],i=["asset"],r=h[t.market],a=e[4],o=1;o<r.columns.length;o++){var s=r.columns[o];s.length>0&&(n.push(s in a?a[s]:"--"),i.push(s))}return c.createFlexTableRow(n,i,"data")},b=function(e,t,n){var i=t.market,r={id:n,cols:h[i].columns},a=c.createFlexTable([],r,h[i].header),o=$("<tr/>",{class:"flex-tr"}).append($("<th/>",{class:"flex-tr-child submarket-name",colspan:h[i].columns.length,text:t.submarket_display_name}));return a.find("thead").prepend(o),a},w=function(){p||r.send({active_symbols:"brief"}).then(function(e){u.setActiveSymbols(e)}),r.send({asset_index:1}).then(function(e){f=e.asset_index,p&&_()})};return{onLoad:g,setActiveSymbols:function(e){p=e.active_symbols.slice(0),f&&_()}}}();e.exports=u},function(e,t){"use strict";var n=function(){var e=void 0,t=function(e,t){return t.filter(function(n,i){return n.symbol===e&&(t.splice(i,1),!0)})},n=function(n,i){if(!n||!i)return null;e={};for(var r={symbol:0,display_name:1,cells:2,sym_info:3,values:4,cell_props:{cell_name:0,cell_display_name:1,cell_from:2,cell_to:3}},a=0;a<n.length;a++){var o=n[a],s=t(o[r.symbol],i)[0];if(s){var c=s.market;o.push(s),c in e||(e[c]={header:[""],columns:[""]});for(var l=o[r.cells],d={},u=0;u<l.length;u++){var p=l[u][r.cell_props.cell_name];d[p]=[l[u][r.cell_props.cell_from],l[u][r.cell_props.cell_to]].join(" - ");
var f=e[c];f.columns.indexOf(p)===-1&&(f.header.push(l[u][r.cell_props.cell_display_name]),f.columns.push(p))}o.push(d)}}return n};return{getAssetIndexData:n,getMarketColumns:function(){return e}}}();e.exports=n},function(e,t){"use strict";var n=function(){var e=function(e,n,i,r){var a=$("<div></div>",{class:"table-container"}),o=$("<table></table>",{class:n.tableClass||"",id:n.id}),s=t(e,n.cols,"body");if(i){var c=t([i],n.cols,"header");c.appendTo(o)}if(s.appendTo(o),r){var l=t([r],n.cols,"footer");l.appendTo(o)}return o.appendTo(a),a},t=function(e,t,i){for(var r=function(){switch(i){case"body":return $("<tbody></tbody>");case"footer":return $("<tfoot></tfoot>");default:return $("<thead></thead>")}}(),a=0;a<e.length;a++){var o="body"===i?"data":"header",s=n(e[a],t,o);s.appendTo(r)}return r},n=function(e,t,n){if(e.length!==t.length)throw new Error("metadata and data does not match");for(var i="data"===n,r=$("<tr></tr>"),a=0;a<e.length;a++){var o=t[a].toLowerCase().replace(/\s/g,"-"),s=i?$("<td></td>",{class:o,html:e[a]}):$("<th></th>",{class:o,html:e[a]});s.appendTo(r)}return r},i=function(e){for(var t=document.querySelector("#"+e+" > tbody");t&&t.firstElementChild;)t.removeChild(t.firstElementChild)},r=function(e,t,n){var i=document.querySelector("#"+e+" > tbody");if(i){var r=document.createDocumentFragment();t.map(function(e){var t=n(e);r.appendChild(t)}),i.appendChild(r)}};return{createFlexTable:e,createFlexTableRow:n,clearTableBody:i,appendTableBody:r}}();e.exports=n},function(e,t,n){"use strict";var i=n(305),r=n(419),a=n(318),o=n(319).localize,s=n(312).State,c=n(309).showLoadingImage,l=n(417),d=n(320).dateValueChanged,u=n(320).jqueryuiTabsToDropdown,p=n(315).jpClient,f=n(326).toISOFormat,h=n(326).toReadableFormat,m=n(420),g=function(){var e=void 0,t=void 0,n=void 0,_=void 0,v=void 0,y=void 0,b=function(r){if(e=$("#trading-date"),t=$("#trading-times"),n=["Asset","Opens","Closes","Settles","UpcomingEvents"],s.get("is_beta_trading")||(_=v=void 0),!t.contents().length){c(t),y=r&&r.framed,v||E("today",!(_&&_.length));var a=i.utc();e.val(h(a)).attr("data-value",f(a)),m.init({selector:"#trading-date",minDate:0,maxDate:364}),e.change(function(){return!!d(this,"date")&&(t.empty(),c(t),v=null,E(e.attr("data-value"),!_),!0)}),t.tabs()}},w=function(){if(_&&v){$("#errorMsg").setVisibility(0);for(var e=p(),n=v.markets,i=$("<ul/>",{class:e?"invisible":""}),r=$("<div/>"),a=0;a<n.length;a++){var o="market_"+(a+1),s=$("<div/>",{id:o});s.append(x(n[a],e)),s.find("table tr").length&&(r.append(s),e||i.append($("<li/>").append($("<a/>",{href:"#"+o,text:n[a].name,id:"outline"}))))}t.empty().append(i).append(r.children()),t.is(":ui-tabs")&&t.tabs("destroy"),t.tabs(),y&&(t.find("ul").hide(),$("<div/>",{class:"center-text"}).append(u(t)).prependTo(t))}},x=function(e,t){for(var n=$("<div/>"),i=e.submarkets,a=void 0,o=0;o<i.length;o++){if(a=!0,t){var s=r.getSubmarketInfo(_,i[o].name);0!==s.length&&"major_pairs"===s[0].submarket||(a=!1)}if(a){var c=S(e.name+"-"+o);c.find("thead").prepend(k(i[o].name)).find("th.opens, th.closes").addClass("nowrap");for(var l=i[o].symbols,d=0;d<l.length;d++)0!==Object.keys(r.getSymbolInfo(l[d].symbol,_)).length&&c.find("tbody").append(C(e.name,i[o].name,l[d]));c.find("tbody tr").length&&n.append(c)}}return n},k=function(e){return $("<tr/>",{class:"flex-tr"}).append($("<th/>",{class:"flex-tr-child submarket-name",colspan:n.length,text:e}))},C=function(e,t,i){var r=l.createFlexTableRow([i.name,"","",i.times.settlement,""],n,"data");return r.children(".opens").html(i.times.open.join("<br />")),r.children(".closes").html(i.times.close.join("<br />")),r.children(".upcomingevents").html(I(i.events)),r},I=function(e){for(var t="",n=0;n<e.length;n++)t+=""+(n>0?"<br />":"")+o(e[n].descrip)+": "+o(e[n].dates);return t.length>0?t:"--"},S=function(e){var t=[o("Asset"),o("Opens"),o("Closes"),o("Settles"),o("Upcoming Events")],i={id:e,cols:n};return l.createFlexTable([],i,t)},E=function(e,t){var n={active_symbols:"brief"};p()&&(n.landing_company="japan"),t&&a.send(n,{msg_type:"active_symbols"}).then(function(e){g.setActiveSymbols(e)}),a.send({trading_times:e||"today"}).then(function(e){v=e.trading_times,_&&w()})};return{onLoad:b,setActiveSymbols:function(e){_=e.active_symbols.slice(0),v&&w()}}}();e.exports=g},function(e,t){"use strict";var n=function(){var e=function(e,t){return e.filter(function(e){return e.submarket_display_name===t})},t=function(e,t){return t.filter(function(t){return t.symbol===e})};return{getSubmarketInfo:e,getSymbolInfo:t}}();e.exports=n},function(e,t,n){"use strict";var i=n(305),r=n(319).localize,a=n(309).isEmptyObject,o=n(309).clearable,s=n(320).checkInput,c=n(326).toReadableFormat,l=n(326).padLeft,d=function(){var e={},t={},n=function(n){d(n.selector),e[n.selector]={},a(t)&&(t={monthNames:r(["January","February","March","April","May","June","July","August","September","October","November","December"]),monthNamesShort:r(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),dayNames:r(["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]),dayNamesMin:r(["Su","Mo","Tu","We","Th","Fr","Sa"]),nextText:r("Next"),prevText:r("Previous")}),p(n),$(window).resize(function(){m(n.selector)})},d=function(e){$(e).datepicker("destroy").removeAttr("data-picker").off("keydown")},u=function(t){var n=void 0,i=e[t];$(t).keydown(function(e){return 13!==e.which||(n=$(this),e.preventDefault(),e.stopPropagation(),"date"===i.config_data.type&&n.datepicker("setDate",n.val()),n.datepicker("hide"),n.blur(),!1)}).datepicker(i.config_data),$("button.ui-datepicker-trigger").remove()},p=function(n){var r=n.selector,a={dateFormat:"dd M, yy",changeMonth:!0,changeYear:!0,native:!0,type:"date"};Object.keys(t).forEach(function(e){a[e]=t[e]}),$.extend(a,n);var s=function(e){a[e]="number"==typeof n[e]?i().add(Number(n[e]),"day").toDate():n[e]};void 0!==n.minDate&&s("minDate"),void 0!==n.maxDate&&s("maxDate");var c=void 0;a.onSelect=function(t){var n=$(".ui-datepicker-year").val(),a=f(Number($(".ui-datepicker-month").val()),1),s=t.split(" ")[0],l=[n,a,s].join("-");c=$(this);var d=c.attr("data-value"),u="#"+c.attr("id");c.attr("data-value",l);var p="diff"===e[r].config_data.type?i.utc(l+" 23:59:59").diff(i.utc(),"days"):null;return c.val(p||t),d!==l&&($(u).trigger("change",[p||t]),c.hasClass("clearable")&&o(c),!0)},e[r].config_data=$.extend({},a),m(r)},f=function(e,t){return l(e+(t||0),2,"0")},h=function(e){return[e.getFullYear(),f(e.getMonth(),1),f(e.getDate())].join("-")},m=function(t){var n=$(t),r=e[t].config_data;if($(window).width()<770){if(!r.native)return d(t),void n.attr("type","number");if(s("date","not-a-date")&&"native"!==n.attr("data-picker"))return d(t),n.attr({type:"date","data-picker":"native"}).val(n.attr("data-value")).removeClass("clear"),n.attr("readonly")&&n.attr("data-readonly","readonly").removeAttr("readonly"),void 0!==r.minDate&&n.attr("min",h(r.minDate)),void(void 0!==r.maxDate&&n.attr("max",h(r.maxDate)))}if($(window).width()>769&&"jquery"!==n.attr("data-picker")||$(window).width()<770&&!s("date","not-a-date")){var a=n.attr("data-value")||n.val(),l=a&&"diff"!==r.type?c(i(a)):n.val();n.attr({type:"text","data-picker":"jquery","data-value":a}).removeAttr("min max").val(l),n.attr("data-readonly")&&n.attr("readonly","readonly").removeAttr("data-readonly"),n.attr("data-value")&&n.hasClass("clearable")&&o(n),u(t)}};return{init:n,hide:d}}();e.exports=d},function(e,t,n){"use strict";var i=n(422),r=n(423),a=n(425),o=n(426),s=n(344),c=n(329).cleanupChart,l=n(430),d=n(338),u=n(318),p=n(361),f=n(364),h=n(371),m=n(312).State,g=n(315).jpClient,_=n(431),v=n(436),y=function(){var e=0;m.remove("is_beta_trading");var t=function(){var t=g();return t?void h.load("multi_barriers_trading"):(m.set("is_beta_trading",!0),a.clearFormId(),0===e&&(e=1,r.init()),u.send({payout_currencies:1}).then(function(){l(),o.processActiveSymbols_Beta()}),document.getElementById("websocket_form")&&(s.addEventListenerForm(),t||(new v($(".col-left .content-tab-container, #contract_prices_container"),n),new v($(".col-right"),y))),_.init({script:"trading"}),i.bindAnalysisTabEvent(),void f.viewButtonOnClick("#contract_confirmation_container"))},n=function(){var e=0;window.innerWidth>767?$(".col-left").children().each(function(){$(this).is(":visible")&&(e+=$(this).outerHeight(!0))}):e="auto",$("#trading_analysis_content").height(e)},y=function(e){e||(e=$("#analysis_tabs"));var t="see-more",n="more-tabs",i=e.outerWidth(),r=0,a=e.find("li."+t);0===a.length&&(a=$("<li/>",{class:"tm-li "+t}).append($("<a/>",{class:"tm-a",href:"javascript:;"}).append($("<span/>",{class:"caret-down"}))),e.append(a)),a.removeClass("active");var o=e.find("."+n);0===o.length?o=$("<div/>",{class:n}).appendTo(a):o.find(">li").each(function(e,t){$(t).insertBefore(a)}),o.css("top",e.find("li:visible").outerHeight()-1).unbind("click").click(function(){u("fast")});var s=e.find(">li:visible");s.each(function(e,t){r+=$(t).outerWidth(!0)});for(var c=r;c>=i;){var l=e.find(">li:not(."+t+"):visible").last();c-=l.outerWidth(!0),l.prependTo(o)}if(0===o.children().length)return void a.hide();a.show(),o.find(">li.active").length>0&&a.addClass("active");var d=function(){o.slideDown(),0===a.find(".over").length&&($("<div/>",{class:"over"}).insertBefore(a.find(">a")),a.find(".over").width(a.width())),a.addClass("open")},u=function(e){o.slideUp(e||400,function(){a.removeClass("open")})},p=void 0;a.find("> a").unbind("click").on("click",function(e){e.stopPropagation(),o.is(":visible")?(u(),clearTimeout(p)):(clearTimeout(p),d(),p=setTimeout(function(){u(),clearTimeout(p)},3e3))}),$(document).unbind("click").on("click",function(){u()}),o.mouseenter(function(){clearTimeout(p)}),o.mouseleave(function(){clearTimeout(p),p=setTimeout(function(){u()},1e3)})},b=function(){sessionStorage.removeItem("underlying"),window.location.reload()},w=function(){m.remove("is_beta_trading"),e=0,o.forgetTradingStreams_Beta(),u.clear(),d.clear(),p.onUnload(),c(),s.clean(),u.clear("active_symbols")},x=function(){s.showPriceOverlay(),s.showFormOverlay(),c(),t()};return{onLoad:t,reload:b,onUnload:w,onDisconnect:x}}();e.exports=y},function(e,t,n){"use strict";var i=n(329).showChart,r=n(338),a=n(339).getActiveTab_Beta,o=n(340),s=n(308),c=n(415),l=n(418),d=n(361),u=n(310),p=n(314).get,f=n(312).State,h=n(313),m=function(){var e="invisible",t=void 0,n=function(){t=((f.get("is_mb_trading")?s.get("category"):r.get("formname"))||"risefall").replace("matchdiff","digits"),$("#tab_last_digit").setVisibility(/(digits|overunder|evenodd)/.test(t)),sessionStorage.setItem("currentAnalysisTab_Beta",a()),g()},m=function(){u.isLoggedIn()&&$("#tab_portfolio").setVisibility(1),$("#tab_asset_index").setVisibility(1),$("#tab_trading_times").setVisibility(1),$("#analysis_tabs").find("li a").on("click",function(e){e.preventDefault();var t=e.target.parentElement;sessionStorage.setItem("currentAnalysisTab_Beta",t.id),t.classList.contains("active")||g(t.id)})},g=function(e){var t=e||a();switch($("#analysis_tabs").find("li").removeClass("active"),$("#"+t).addClass("active"),_(),t){case"tab_graph":i();break;case"tab_portfolio":d.onLoad();break;case"tab_last_digit":var n=$("#digit_underlying option:selected").val()||$("#underlying").find("option:selected").val(),r=$("#tick_count").val()||100;o.request("",{ticks_history:n,end:"latest",count:r.toString()});break;case"tab_asset_index":c.onLoad({framed:!0}),$("#tab_asset").find("index-content").find("h1").hide();break;case"tab_trading_times":l.onLoad({framed:!0}),$("#tab_trading").find("times-content").find("h1").hide();break;default:v()}},_=function(){var t=a(),n=document.getElementById("analysis_content");if(n){for(var i=n.children,r=document.getElementById(t+"-content"),o=r.classList,s=0,c=i.length;s<c;s++)i[s].classList.remove("selectedTab"),i[s].classList.add(e);o.add("selectedTab"),o.remove(e)}},v=function(){var e=$("#tab_explanation-content");e.find("#explanation_winning > div, #explanation_explain > div, #explanation_image").setVisibility(0),e.find("#explanation_winning, #winning_"+t+", #explanation_explain, #explain_"+t).setVisibility(1);var n={risefall:{image1:"rise-fall-1.svg",image2:"rise-fall-2.svg"},higherlower:{image1:"higher-lower-1.svg",image2:"higher-lower-2.svg"},touchnotouch:{image1:"touch-notouch-1.svg",image2:"touch-notouch-2.svg"},endsinout:{image1:"in-out-1.svg",image2:"in-out-2.svg"},staysinout:{image1:"in-out-3.svg",image2:"in-out-4.svg"},updown:{image1:"up-down-1.svg",image2:"up-down-2.svg"},evenodd:{image1:"evenodd-1.svg",image2:"evenodd-2.svg"},overunder:{image1:"overunder-1.svg",image2:"overunder-2.svg"}};if(n[t]){var i=p().toLowerCase(),r=h.urlForStatic("images/pages/trade-explanation/"+("ja"===i?i+"/":""));e.find("#explanation_image_1").attr("src",r+n[t].image1),e.find("#explanation_image_2").attr("src",r+n[t].image2),e.find("#explanation_image").setVisibility(1)}};return{request:n,getActiveTab:a,bindAnalysisTabEvent:m}}();e.exports=m},function(e,t,n){"use strict";var i=n(305),r=n(422),a=n(349),o=n(424),s=n(425),c=n(426),l=n(352),d=n(329).setChart,u=n(338),p=n(340),f=n(348),h=n(344),m=n(342).getStartDateNode,g=n(345),_=n(318),v=n(371),y=n(368),b=n(320).dateValueChanged,w=n(320).isVisible,x=n(325).formatMoney,k=n(428),C=n(429),I=function(){var e=function(){var e=function(e){h.showPriceOverlay(),u.set("market",e),u.remove("formname"),u.remove("underlying"),c.processMarket_Beta()},n=document.getElementById("contract_markets");n&&n.addEventListener("change",function(t){e(t.target.value)});var C=function(){c.processContractForm_Beta(),r.request()},I=document.getElementById("contract_form_name_nav");I&&I.addEventListener("click",function(e){var t=e.target;if(t&&t.getAttribute("menuitem")){var n=t.classList.contains("active")||t.parentElement.classList.contains("active");u.set("formname",t.getAttribute("menuitem")),h.toggleActiveCatMenuElement(I,e.target.getAttribute("menuitem")),n||C()}});var S=document.getElementById("underlying");S&&S.addEventListener("change",function(e){if(e.target){d(),h.showFormOverlay(),h.showPriceOverlay(),e.target.selectedIndex<0&&(e.target.selectedIndex=0);var t=e.target.value;u.remove("barrier","barrier_high","barrier_low"),u.set("underlying",t),r.request(),f.clean(),h.updateWarmChart(),_.send({contracts_for:t}).then(function(e){g.hide("CONNECTION_ERROR"),c.processContract_Beta(e)}),c.processForgetTicks_Beta(),p.request(t),h.displayTooltip_Beta(u.get("market"),t)}});var E=function(e){e.target.value%1!==0&&(e.target.value=Math.floor(e.target.value)),u.set("duration_amount",e.target.value),o.selectAmount(e.target.value),s.processPriceRequest_Beta(),h.submitForm(document.getElementById("websocket_form"))},T=document.getElementById("duration_amount"),B=!1;T&&(T.addEventListener("keypress",k),$("#duration_amount").on("input",h.debounce(function(e){E(e),o.validateMinDurationAmount(),B=!0})).on("change",h.debounce(function(e){o.validateMinDurationAmount(),B!==!1&&u.get("duration_amount")?B=!1:E(e)})));var A=document.getElementById("expiry_type");A&&A.addEventListener("change",function(e){u.set("expiry_type",e.target.value),c.onExpiryTypeChange(e.target.value),"endtime"!==A.value&&s.processPriceRequest_Beta()});var O=document.getElementById("duration_units");O&&O.addEventListener("change",function(e){u.remove("barrier","barrier_high","barrier_low"),c.onDurationUnitChange(e.target.value),s.processPriceRequest_Beta()});var P=document.getElementById("expiry_date");P&&$("#expiry_date").on("change input",function(){return!!b(this,"date")&&(h.timeIsValid($("#expiry_date"))&&o.selectEndDate(i(this.getAttribute("data-value"))),!0)});var L=document.getElementById("expiry_time");L&&(t(),$("#expiry_time").on("focus, click",t).on("keypress",function(e){k(e,[58])}).on("change input blur",function(){return!!b(this,"time")&&(h.timeIsValid($("#expiry_time"))&&(o.setTime(L.value),s.processPriceRequest_Beta()),!0)}));var q=document.getElementById("amount");q&&(q.addEventListener("keypress",k),q.addEventListener("input",h.debounce(function(e){e.target.value=e.target.value.replace(/[^0-9.]/g,""),z(e.target.value)&&(e.target.value=x(u.get("currency"),parseFloat(e.target.value),1)),u.set("amount",e.target.value),s.processPriceRequest_Beta(),h.submitForm(document.getElementById("websocket_form"))})));var j=m();j&&j.addEventListener("change",function(e){u.set("date_start",e.target.value);var t=o.onStartDateChange(e.target.value);t>=0&&s.processPriceRequest_Beta()});var D=document.getElementById("amount_type");D&&D.addEventListener("change",function(e){u.set("amount_type",e.target.value),s.processPriceRequest_Beta()});var M=document.getElementById("submarket");M&&M.addEventListener("change",function(e){if(e.target){for(var t=document.getElementById("underlying"),n=t.children,i=0,r=n.length;i<r;i++)n[i].disabled="all"!==e.target.value&&e.target.value!==n[i].className;document.querySelectorAll("#underlying option:enabled")[0].selected="selected";var a=new Event("change");t.dispatchEvent(a)}});var R=document.getElementById("currency");R&&R.addEventListener("change",function(e){u.set("currency",e.target.value),s.processPriceRequest_Beta()}),$(".purchase_button").on("click dblclick",function(){if(!w(document.getElementById("confirmation_message_container"))){var e=this.getAttribute("data-purchase-id"),t=this.getAttribute("data-ask-price"),n={buy:e,price:t,passthrough:{}};Object.keys(this.attributes).forEach(function(e){if(e&&this.attributes[e]&&this.attributes[e].name&&!/data\-balloon/.test(this.attributes[e].name)){var t=this.attributes[e].name.match(/data\-(.+)/);t&&t[1]&&"purchase-id"!==t[1]&&"passthrough"!==t[1]&&(n.passthrough[t[1]]=this.attributes[e].value)}},this),e&&t&&(_.send(n).then(function(e){l.display(e),y.pushPurchaseData(e)}),s.incrFormId(),s.processForgetProposals_Beta())}}),$("#close_confirmation_container, #contract_purchase_new_trade").on("click dblclick",function(e){e.target&&(e.preventDefault(),document.getElementById("contract_confirmation_container").style.display="none",document.getElementById("contracts_list").style.display="flex",s.processPriceRequest_Beta())});var V=document.getElementById("barrier");V&&$("#barrier").on("keypress",function(e){k(e,[43,45,46])}).on("input",h.debounce(function(e){a.validateBarrier(),u.set("barrier",e.target.value),s.processPriceRequest_Beta(),h.submitForm(document.getElementById("websocket_form"))},1e3));var N=document.getElementById("barrier_low");N&&N.addEventListener("input",h.debounce(function(e){u.set("barrier_low",e.target.value),s.processPriceRequest_Beta(),h.submitForm(document.getElementById("websocket_form"))}));var F=document.getElementById("barrier_high");F&&F.addEventListener("input",h.debounce(function(e){u.set("barrier_high",e.target.value),s.processPriceRequest_Beta(),h.submitForm(document.getElementById("websocket_form"))}));var H=document.getElementById("prediction");H&&H.addEventListener("change",h.debounce(function(e){u.set("prediction",e.target.value),s.processPriceRequest_Beta(),h.submitForm(document.getElementById("websocket_form"))}));var z=function(e){return!isNaN(e)&&e%1!==0&&(+parseFloat(e)).toFixed(10).replace(/^-?\d*\.?|0+$/g,"").length>2},U=document.getElementById("trading_init_progress");U&&U.addEventListener("click",h.debounce(function(){h.reloadPage()}));var Y=document.getElementById("symbol_tip");Y&&Y.addEventListener("click",h.debounce(function(e){v.load(e.target.getAttribute("target"))}))},t=function(){var e=document.getElementById("date_start").value,t=!e||"now"===e,n=t?window.time?window.time:i.utc():1e3*parseInt(e);C.init({selector:"#expiry_time",minTime:n})};return{init:e}}();e.exports=I},function(e,t,n){"use strict";var i=n(305),r=n(349),a=n(350),o=n(425),s=n(344),c=n(342).processTradingTimesAnswer,l=n(338),d=n(318),u=n(319).localize,p=n(312).State,f=n(320).elementTextContent,h=n(320).isVisible,m=n(326).toISOFormat,g=n(326).toReadableFormat,_=n(420),v=function(){var e={},t=0,n=function(){var n=void 0;n="now"!==l.get("date_start")&&p.get("is_start_dates_displayed")&&i(1e3*l.get("date_start")).isAfter(i())?"forward":"spot";var r=a.durations();if(r===!1)return document.getElementById("expiry_row").style.display="none",l.remove("expiry_type","duration_amount","duration_units","expiry_date","expiry_time"),!1;for(var o=document.getElementById("duration_units"),c=a.form(),d=a.barrier(),u={};o&&o.firstChild;)o.removeChild(o.firstChild);Object.keys(r).forEach(function(e){Object.keys(r[e][c]).forEach(function(t){if(r[e][c].hasOwnProperty(t)){var i={};i=d?r[e][c][d]:r[e][c][t],Object.keys(i).forEach(function(t){n?n!==t||u.hasOwnProperty(n)||(u[e]=i[n]):u.hasOwnProperty(t)||(u[e]=i[t])})}})});var f={};Object.keys(u).forEach(function(e){var t=x(u[e].min_contract_duration),n=x(u[e].max_contract_duration),i=t.unit;if("intraday"===e)switch(i){case"s":f[i]=y(t,n),f.m=y(x("1m"),n,!0),f.h=y(x("1h"),n);break;case"m":f[i]=y(t,n,!0),f.h=y(x("1h"),n);break;case"h":f[i]=y(t,n);break;default:f[i]=y(t,n)}else"daily"!==e&&"tick"!==e||(f[i]=y(t,n))});var h=Object.keys(f).sort(function(e,t){return s.durationOrder(e)>s.durationOrder(t)?1:-1});t=0;for(var m=0;m<h.length;m++){var g=h[m];"t"!==g&&(t=1),f.hasOwnProperty(g)&&o.appendChild(f[g])}return e.unit&&(s.selectOption(e.unit,o)||(e={})),k(),!0},y=function(e,t,n){var i=document.createElement("option"),r=document.createTextNode(e.text);if(i.setAttribute("value",e.unit),i.setAttribute("data-minimum",e.value),t.value&&t.unit){var a=b(t.value,t.unit,e.unit);a&&i.setAttribute("data-maximum",a)}return n&&i.setAttribute("selected","selected"),i.appendChild(r),i},b=function(e,t,n){if(!e||!t||!n)return null;if(t===n)return e;var i={s:1,m:60,h:3600,d:86400};return e*i[t]/i[n]},w=function(){var e=document.getElementById("date_start").value,t=!e||"now"===e,n=i(t?window.time:1e3*parseInt(e)).add(5,"minutes").utc(),r=l.get("expiry_date")?i(l.get("expiry_date")):n,a=l.get("expiry_time")||n.format("HH:mm"),o=m(r);i(o+" "+a).valueOf()<n.valueOf()&&(r=n,o=m(r),a=n.format("HH:mm"));var s=document.getElementById("expiry_date"),c=document.getElementById("expiry_time");s.value=g(r),s.setAttribute("data-value",o),c.value=a,c.setAttribute("data-value",a),l.set("expiry_date",o),l.set("expiry_time",a),v.setTime(a),k()},x=function(e){var t={s:u("seconds"),m:u("minutes"),h:u("hours"),d:u("days"),t:u("ticks")},n=e?e.toString().match(/[a-zA-Z]+|[0-9]+/g):[],i={};return n.length>1?(i.unit=n[1],i.text=t[n[1]],i.value=n[0]):(i.unit="t",i.text=t.t,i.value=n[0]),i},k=function(){var t=document.getElementById("duration_units");if(t.options[t.selectedIndex]){var n=t.options[t.selectedIndex].getAttribute("data-minimum"),i=t.options[t.selectedIndex].getAttribute("data-maximum"),a=l.get("duration_amount")||n;t.value=l.get("duration_units")&&document.querySelectorAll('select[id="duration_units"] [value="'+l.get("duration_units")+'"]').length?l.get("duration_units"):t.value,f(document.getElementById("duration_minimum"),n),f(document.getElementById("duration_maximum"),i),e.amount&&e.unit>a&&(a=e.amount),document.getElementById("duration_amount").value=a,l.set("duration_amount",a),C(),l.set("duration_units",t.value);var o=$("#duration_amount"),s="#duration_amount";"d"===t.value?(_.init({selector:s,type:"diff",minDate:1,maxDate:364,native:!1}),o.change(function(e){var t=void 0,n=$("#duration_amount").val();if(n)t=n;else{e=e.target.getAttribute("data-value");var i=e?new Date(e):new Date,r=window.time?window.time.valueOf():new Date;t=Math.ceil((i-r)/864e5)}o.val(t)})):_.hide(s),$("#expiry_date").is(":visible")&&_.init({selector:"#expiry_date",minDate:0,maxDate:364}),S(),r.display()}},C=function(){var e=document.getElementById("expiry_type"),n=document.createDocumentFragment();0===$("#expiry_type").find("option[value="+l.get("expiry_type")+"]").length&&e.value&&l.set("expiry_type",e.value);var i=l.get("expiry_type")||e.value||"duration",r="duration"===i?"endtime":"duration",a=i;for(a=document.getElementById("expiry_type_"+a),a&&(a.style.display="flex"),r=document.getElementById("expiry_type_"+r),r&&(r.style.display="none");e&&e.firstChild;)e.removeChild(e.firstChild);var o=document.createElement("option"),s=document.createTextNode(u("Duration"));o.setAttribute("value","duration"),"duration"===i&&o.setAttribute("selected","selected"),o.appendChild(s),n.appendChild(o),t&&(o=document.createElement("option"),s=document.createTextNode(u("End Time")),o.setAttribute("value","endtime"),"endtime"===i&&o.setAttribute("selected","selected"),o.appendChild(s),n.appendChild(o)),e.appendChild(n)},I=function(e){var t=document.getElementById("expiry_time"),n=document.getElementById("date_start"),a=g(e),s=m(e);if($("#expiry_date").val(a).attr("data-value",s),l.set("expiry_date",s),e.isAfter(window.time.format("YYYY-MM-DD HH:mm"),"day"))v.setTime(""),l.remove("expiry_time"),T(),n.setAttribute("disabled","disabled"),t.hide(),B(s);else{if(n.removeAttribute("disabled"),!t.value){var c=i(window.time).add(5,"minutes").utc().format("HH:mm");t.value=c,t.setAttribute("data-value",c)}v.setTime(t.value),l.set("expiry_time",l.get("expiry_time")||t.value),t.show(),o.processPriceRequest_Beta()}r.display()},S=function(){var e=document.getElementById("duration_amount"),t=document.getElementById("duration_minimum"),n=document.getElementById("duration_maximum");h(e)&&h(t)&&(+e.value<+t.textContent||+n.textContent&&+e.value>+n.textContent?e.classList.add("error-field"):e.classList.remove("error-field"))},E=function(e){var t=$("#date_start");if(!e||!t.find("option[value="+e+"]").length)return 0;t.val(e);var n=1,r=$("#expiry_time");if("now"!==e&&"endtime"===l.get("expiry_type")){n=-1;var a=i(1e3*parseInt(e)).add(5,"minutes").utc();v.setTime(s.timeIsValid(r)&&l.get("expiry_time")?l.get("expiry_time"):a.format("HH:mm")),v.selectEndDate(s.timeIsValid(r)&&(l.get("expiry_date")?i(l.get("expiry_date")):a))}return s.timeIsValid(r),v.display(),n},T=function(){var e=$("#date_start");e.find('option[value="now"]').length&&l.set("date_start","now")},B=function(e){var t=v.trading_times();t.hasOwnProperty(e)?o.processPriceRequest_Beta():(s.showPriceOverlay(),d.send({trading_times:e}).then(function(e){c(e),o.processPriceRequest_Beta()}))};return{display:n,displayEndTime:w,populate:k,selectEndDate:I,validateMinDurationAmount:S,onStartDateChange:E,setTime:function(e){$("#expiry_time").val(e),l.set("expiry_time",e)},selectAmount:function(t){e.amount=t},selectUnit:function(t){e.unit=t}}}();e.exports=v},function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=n(305),a=n(350),o=n(344),s=n(342).displayPriceMovement,c=n(342).getStartDateNode,l=n(342).getTradingTimes,d=n(338),u=n(318),p=n(319).localize,f=n(320).elementTextContent,h=n(320).isVisible,m=n(325).formatMoney,g=function(){var e={},t=0,n=function(e){var n={proposal:1,subscribe:1},a=e,s=c(),u=document.getElementById("underlying"),p=document.getElementById("amount_type"),f=document.getElementById("currency"),m=document.getElementById("amount"),g=document.getElementById("expiry_type"),_=document.getElementById("duration_amount"),v=document.getElementById("duration_units"),y=document.getElementById("expiry_date"),b=document.getElementById("barrier"),w=document.getElementById("barrier_high"),x=document.getElementById("barrier_low"),$=document.getElementById("prediction");if(m&&h(m)&&m.value&&(n.amount=parseFloat(m.value)),p&&h(p)&&p.value&&(n.basis=p.value),a&&(n.contract_type=e),f&&(f.value||f.getAttribute("value"))&&(n.currency=f.value||f.getAttribute("value")),u&&u.value&&(n.symbol=u.value),s&&h(s)&&"now"!==s.value&&(n.date_start=s.value),g&&h(g)&&"duration"===g.value)n.duration=parseInt(_.value),n.duration_unit=v.value;else if(g&&h(g)&&"endtime"===g.value){var k=y.getAttribute("data-value"),C=d.get("expiry_time");if(!C){var I=l();I.hasOwnProperty(k)&&"object"===i(I[k][u.value])&&I[k][u.value].length&&"--"!==I[k][u.value][0]&&(C=I[k][u.value].length>1?I[k][u.value][1]:I[k][u.value])}n.date_expiry=r.utc(k+" "+(C||"23:59:59")).unix(),n.duration_unit="m"}return b&&h(b)&&b.value&&(n.barrier=b.value),w&&h(w)&&w.value&&(n.barrier=w.value),x&&h(x)&&x.value&&(n.barrier2=x.value),$&&h($)&&(n.barrier=parseInt($.value)),a&&(n.contract_type=e),n.passthrough={form_id:t},o.resetPriceMovement(),n},_=function(t,n){var i=t.proposal,r=i?i.id:"",a=t.echo_req,c=a.contract_type;r&&!c&&(c=e[r]),a&&r&&Object.getOwnPropertyNames(a).length>0&&(e[r]=c);var l=o.contractTypeDisplayMapping(c);if(l){var d=document.getElementById("price_container_"+l);if(d){$(d).is(":visible")||$(d).fadeIn(200,function(){$(d).css("display","flex")});var u=d.getElementsByClassName("contract_heading")[0],h=d.getElementsByClassName("contract_amount")[0],g=d.getElementsByClassName("contract_payout")[0],_=d.getElementsByClassName("stake")[0],v=d.getElementsByClassName("payout")[0],y=d.getElementsByClassName("purchase_button")[0],b=d.getElementsByClassName("contract_description")[0],w=d.getElementsByClassName("price_comment")[0],x=d.getElementsByClassName("contract_error")[0],k=document.getElementById("currency"),C=c&&n?n[c]:"";C&&(u.setAttribute("class","contract_heading "+c),f(u,C));var I=function(e){e&&(e.display_value?($(".stake:hidden").show(),f(_,p("Stake")+": "),f(h,m(k.value||k.getAttribute("value"),e.display_value)),$(".stake_wrapper:hidden").show()):$(".stake_wrapper:visible").hide(),e.payout?(f(v,p("Payout")+": "),f(g,m(k.value||k.getAttribute("value"),+e.payout)),$(".payout_wrapper:hidden").show()):$(".payout_wrapper:visible").hide(),e.longcode&&window.innerWidth>500?b.setAttribute("data-balloon",e.longcode):b.removeAttribute("data-balloon"))};if(t.error)y.hide(),w.hide(),I(t.error.details),x.show(),f(x,t.error.message);else{I(i),$("#websocket_form").find(".error-field").length>0?y.hide():y.show(),w.show(),x.hide(),o.displayCommentPrice(w,k.value||k.getAttribute("value"),i.ask_price,i.payout);var S=y.getAttribute("data-display_value"),E=y.getAttribute("data-payout");s(h,S,i.display_value),s(g,E,i.payout),y.setAttribute("data-purchase-id",r),y.setAttribute("data-ask-price",i.ask_price),y.setAttribute("data-display_value",i.display_value),y.setAttribute("data-payout",i.payout),y.setAttribute("data-symbol",r),Object.keys(a).forEach(function(e){e&&"proposal"!==e&&y.setAttribute("data-"+e,a[e])})}}}},v=function(){e={}},y=function(){t=0},b=function(){o.showPriceOverlay(),u.send({forget_all:"proposal"}),g.clearMapping()},w=function(){g.incrFormId(),b(),o.showPriceOverlay();var e=a.contractType()[a.form()];if("digits"===a.form())switch(sessionStorage.getItem("formname")){case"matchdiff":e={DIGITMATCH:1,DIGITDIFF:1};break;case"evenodd":e={DIGITEVEN:1,DIGITODD:1};break;case"overunder":e={DIGITOVER:1,DIGITUNDER:1}}Object.keys(e).forEach(function(e){u.send(g.proposal(e),{callback:function(e){e.echo_req&&e.echo_req.passthrough&&e.echo_req.passthrough.form_id===t&&(o.hideOverlayContainer(),g.display(e,a.contractType()[a.form()]),o.hidePriceOverlay())}})})};return{proposal:n,display:_,clearMapping:v,clearFormId:y,idDisplayMapping:function(){return e},getFormId:function(){return t},incrFormId:function(){t++},processForgetProposals_Beta:b,processPriceRequest_Beta:w}}();e.exports=g},function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=n(305),a=n(422),o=n(350),s=n(424),c=n(425),l=n(427),d=n(344),u=n(338),p=n(340),f=n(345),h=n(346),m=n(348),g=n(318),_=n(415),v=n(418),y=n(319).localize,b=n(312).State,w=n(320).elementInnerHtml,x=function(){var e=function(){g.send({active_symbols:"brief"}).then(function(e){h.details(e);var n=d.getDefaultMarket();u.set("market",n),d.displayMarkets("contract_markets",h.markets(),n),t(),_.setActiveSymbols(e),v.setActiveSymbols(e)})},t=function(){var e=u.get("market"),t=u.get("underlying");e&&h.underlyings()[e]||(e=d.getDefaultMarket(),
u.set("market",e)),t&&h.underlyings()[e][t]||(t=void 0),d.displayUnderlyings("underlying",h.underlyings()[e],t),n()},n=function(){var e=document.getElementById("underlying");if(e){e.selectedIndex<0&&(e.selectedIndex=0);var t=e.value;u.set("underlying",t),d.showFormOverlay(),p.request(t),m.clean(),d.updateWarmChart(),g.clearTimeouts(),g.send({contracts_for:t}).then(function(e){f.hide("CONNECTION_ERROR"),x(e)}),d.displayTooltip_Beta(u.get("market"),t)}},x=function(e){if(e.hasOwnProperty("error")&&"InvalidSymbol"===e.error.code){c.processForgetProposals_Beta();var t=document.getElementById("contract_confirmation_container"),n=document.getElementById("confirmation_message"),r=document.getElementById("confirmation_error"),s=document.getElementById("confirmation_error_contents"),l=document.getElementById("contracts_list");return t.style.display="block",l.style.display="none",n.hide(),r.show(),void w(s,e.error.message+' <a href="javascript:;" onclick="sessionStorage.removeItem(\'underlying\'); window.location.reload();">'+y("Please reload the page")+"</a>")}b.set("is_chart_allowed",!(e.contracts_for&&e.contracts_for.feed_license&&"chartonly"===e.contracts_for.feed_license)),document.getElementById("trading_socket_container_beta").classList.add("show");var p=document.getElementById("trading_init_progress");"none"!==p.style.display&&(p.style.display="none",u.update()),o.setContracts(e);var f=o.contractForms(),h=void 0;if(u.get("formname")&&f&&f[u.get("formname")])h=u.get("formname");else{var m=d.getContractCategoryTree(f);m[0]&&(h="object"===i(m[0])?m[0][1][0]:m[0])}u.set("formname",h),d.displayContractForms("contract_form_name_nav",f,h),k(),a.request(),d.hideFormOverlay()},k=function(){o.details(sessionStorage.getItem("formname")),l.display(),C();var e=void 0;b.get("is_start_dates_displayed")&&u.get("date_start")&&"now"!==u.get("date_start")?(e=s.onStartDateChange(u.get("date_start")),e&&"endtime"!==u.get("expiry_type")||s.display()):s.display(),u.get("amount")?$("#amount").val(u.get("amount")):u.set("amount",document.getElementById("amount").value),u.get("amount_type")?d.selectOption(u.get("amount_type"),document.getElementById("amount_type")):u.set("amount_type",document.getElementById("amount_type").value),u.get("currency")&&d.selectOption(u.get("currency"),document.getElementById("currency"));var t=u.get("expiry_type")||"duration",n=E(t);n>=0&&c.processPriceRequest_Beta()},C=function(){var e=document.getElementById("prediction_row");"digits"===o.form()&&"evenodd"!==sessionStorage.getItem("formname")?(e.show(),u.get("prediction")?d.selectOption(u.get("prediction"),document.getElementById("prediction")):u.set("prediction",document.getElementById("prediction").value)):(e.hide(),u.remove("prediction"))},I=function(){c.processForgetProposals_Beta(),S()},S=function(){g.send({forget_all:"ticks"})},E=function(e){var t=$("#expiry_type");e&&t.find("option[value="+e+"]").length||(e="duration"),t.val(e);var n=0;if("endtime"===e)s.displayEndTime(),u.get("expiry_date")&&(s.selectEndDate(r(u.get("expiry_date"))),n=-1),u.remove("duration_units","duration_amount");else{l.enable(),s.display(),u.get("duration_units")&&T(u.get("duration_units"));var i=u.get("duration_amount");i&&i>$("#duration_minimum").text()&&$("#duration_amount").val(i),n=1,u.remove("expiry_date","expiry_time","end_date"),s.validateMinDurationAmount()}return n},T=function(e){var t=$("#duration_units");return e&&t.find("option[value="+e+"]").length?(t.val(e),u.set("duration_units",e),s.selectUnit(e),s.populate(),1):0};return{processActiveSymbols_Beta:e,processMarket_Beta:t,processContract_Beta:x,processContractForm_Beta:k,forgetTradingStreams_Beta:I,processForgetTicks_Beta:S,onExpiryTypeChange:E,onDurationUnitChange:T}}();e.exports=x},function(e,t,n){"use strict";var i=n(305),r=n(350),a=n(424),o=n(342).getStartDateNode,s=n(338),c=n(319).localize,l=n(312).State,d=function(){var e=0;l.remove("is_start_dates_displayed");var t=function(e,t){return e.date<t.date?-1:e.date>t.date?1:0},n=function(){var n=r.startDates();if(n&&n.list&&n.list.length){var d=o(),u=document.createDocumentFragment(),p=document.getElementById("date_start_row"),f=void 0,h=void 0;for(p.style.display="flex";d&&d.firstChild;)d.removeChild(d.firstChild);n.has_spot?(f=document.createElement("option"),h=document.createTextNode(c("Now")),f.setAttribute("value","now"),f.appendChild(h),u.appendChild(f),e=1):e=0,n.list.sort(t);var m=void 0;n.list.forEach(function(t){var n=i.unix(t.open).utc(),r=i.unix(t.close).utc(),a=3e5,o=i.utc();for(i(o).isAfter(i(n))&&(n=o),n=i(Math.ceil(+n/a)*a).utc();n.isBefore(r);)n.unix()-o.unix()>300&&(f=document.createElement("option"),f.setAttribute("value",n.utc().unix()),"undefined"!=typeof m||e||(m=n.utc().unix()),h=document.createTextNode(n.format("HH:mm ddd").replace(" "," GMT, ")),f.value===s.get("date_start")&&f.setAttribute("selected","selected"),f.appendChild(h),u.appendChild(f)),n.add(5,"minutes")}),d.appendChild(u),s.set("date_start",d.value),l.set("is_start_dates_displayed",!0),m&&a.onStartDateChange(m)}else l.remove("is_start_dates_displayed"),document.getElementById("date_start_row").style.display="none",s.remove("date_start")};return{display:n,disable:function(){o().setAttribute("disabled","disabled")},enable:function(){o().removeAttribute("disabled")}}}();e.exports=d},function(e,t){"use strict";var n=function(e,t){var n=e.which,i=String.fromCharCode(n),r=[8,37,39,46];t&&t.length>0&&(r=r.concat(t)),("."===i&&e.target.value.indexOf(i)>=0||!/[0-9\.]/.test(i)&&r.indexOf(n)<0||/['%]/.test(i))&&(e.returnValue=!1,e.preventDefault())};e.exports=n},function(e,t,n){"use strict";var i=n(305),r=n(319).localize,a=n(309).clearable,o=n(320).checkInput,s=n(326).padLeft,c=function(){var e={},t=function(t){n(t.selector),e[t.selector]={},d(t),$(window).resize(function(){f(t.selector)})},n=function(e){$(e).timepicker("destroy").removeAttr("data-picker").off("keydown keyup input")},c=function(t){var n=void 0;$(t).keydown(function(e){return 13!==e.which||(n=$(this),e.preventDefault(),e.stopPropagation(),n.timepicker("setTime",n.val()),n.timepicker("hide"),n.blur(),!1)}).timepicker(e[t].config_data)},l=function(){return i.utc(window.time)},d=function(t){var n=l(),o={hourText:r("Hour"),minuteText:r("Minute"),amPmText:r(["AM","PM"])};if(t.minTime&&(t.minTime="now"===t.minTime?n:i.utc(t.minTime),t.minTime.isBefore(n)&&(t.minTime=n),o.minTime={hour:parseInt(t.minTime.hour()),minute:parseInt(t.minTime.minute())}),t.maxTime){t.maxTime=i.utc(t.maxTime);var s=parseInt(t.maxTime.minute()),c=parseInt(t.maxTime.hour());c=s<5?c-1:c,s=s<5?55:s-5,o.maxTime={hour:c,minute:s}}var d=void 0;o.onSelect=function(e){d=$(this);var t="#"+d.attr("id"),r=$(t).attr("data-value");if(r&&r===e)return!1;var o=void 0;if(!e.match(/^(:?[0-3]\d):(:?[0-5]\d):(:?[0-5]\d)$/)){n=l();var s=e.match(/([a-z0-9]*):([a-z0-9]*):?([a-z0-9]*)?/),c=n.format("hh"),p=n.format("mm"),f=n.format("ss");if("undefined"!=typeof s[1]&&isFinite(s[1])&&(c=u(s[1])),"undefined"!=typeof s[2]&&isFinite(s[2])&&(p=u(s[2])),"undefined"!=typeof s[3]&&isFinite(s[3])&&(f=u(s[3])),o=i(n.format("YYYY-MM-DD")+" "+[c,p,f].join(":")).format("HH:mm"),r&&r===o)return!1;d.val(o)}return d.attr("data-value",o||e),$(t).trigger("change",[o||e]),d.hasClass("clearable")&&a(d),!0},e[t.selector].config_data=o,f(t.selector)},u=function(e){return s(e,2,"0")},p=function(e){return[u(e.hour),u(e.minute),"00"].join(":")},f=function(t){var i=$(t),r=e[t].config_data;if($(window).width()<770&&o("time","not-a-time")&&"native"!==i.attr("data-picker")){n(t),i.attr({type:"time","data-picker":"native"}).val(i.attr("data-value")).removeAttr("readonly").removeClass("clear");var s=r.minTime;s&&i.attr("min",p(s));var l=r.maxTime;return void(l&&i.attr("max",p(l)))}($(window).width()>769&&"jquery"!==i.attr("data-picker")||$(window).width()<770&&!o("time","not-a-time"))&&(i.attr({type:"text","data-picker":"jquery",readonly:"readonly"}),i.removeAttr("min max"),i.attr("data-value")&&i.hasClass("clearable")&&a(i),c(t))};return{init:t}}();e.exports=c},function(e,t,n){"use strict";var i=n(338),r=n(310),a=n(325).formatCurrency,o=function(){var e=document.getElementById("currency"),t=document.createDocumentFragment(),n=r.get("currencies").split(",");if(e){for(;e&&e.firstChild;)e.removeChild(e.firstChild);n.length>1?(n.forEach(function(e){var n=document.createElement("option"),i=document.createTextNode(e);n.setAttribute("value",e),n.appendChild(i),t.appendChild(n)}),e.appendChild(t),i.set("currency",e.value)):($("#currency").replaceWith($("<span/>",{id:e.getAttribute("id"),class:e.getAttribute("class"),value:n[0],text:a(n[0])})),i.set("currency",n[0]))}};e.exports=o},function(e,t,n){"use strict";var i=n(311),r=n(319).localize,a=n(432),o=function(){var e=void 0,t=void 0,n=void 0,o=void 0,s=function(i){return e={script:"",autoStart:!1,guideBtnID:"#guideBtn",btnText:r("Walkthrough Guide"),blink_class:"highlight",blink_inDelay:1e3,blink_outDelay:1e3,blink_interval:3e3,blink_count:0},$.extend(!0,e,i),t="hide_guide",n={className:"button",html:$("<span/>",{text:r("Next")})},o={className:"button btnFinish",html:$("<span/>",{text:r("Finish")})},0===$(e.guideBtnID).length?void console.warn('Could not find the button placeholder: <div id="'+e.guideBtnID+'"></div>'):0===e.script.length?void console.warn('"script" name should be specified'):c()?void $(e.guideBtnID).remove():void d()},c=function(){var n=i.get(t);return!!n&&$.inArray(e.script,n.split(","))>=0},l=function(){if(!c()){var n=i.get(t);i.set(t,n?n+","+e.script:e.script)}},d=function(){$(e.guideBtnID).children().length>0||($(e.guideBtnID).addClass("gr-hide-m pulser").append($("<span/>",{class:"close",text:"X"})).append($("<strong/>")),$(e.guideBtnID+" strong").html("<span></span>"+e.btnText),u())},u=function(){$(e.guideBtnID+" strong").click(function(){var t=new a({});t.setScript(p(e.script)),t.runScript()}),e.autoStart&&$(e.guideBtnID).click(),$(e.guideBtnID+" span.close").click(function(){l(),$(e.guideBtnID).remove()})},p=function(e){return"trading"!==e?null:[{selector:"#contract_markets",description:"<h1>"+r("Step")+" 1</h1>"+r("Select your market"),event_type:"next",nextButton:n},{selector:"#underlying",description:"<h1>"+r("Step")+" 2</h1>"+r("Select your underlying asset"),event_type:"next",nextButton:n},{selector:"#contract_form_name_nav",description:"<h1>"+r("Step")+" 3</h1>"+r("Select your trade type"),event_type:"next",nextButton:n},{selector:"#websocket_form",description:"<h1>"+r("Step")+" 4</h1>"+r("Adjust trade parameters"),event_type:"next",nextButton:n},{selector:"#contracts_list",description:"<h1>"+r("Step")+" 5</h1>"+r("Predict the direction<br />and purchase"),event_type:"next",nextButton:o}]};return{init:s}}();e.exports=o},function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=n(1),a=n(433);e.exports=function(e){var t=this,n={onStart:function(){},onEnd:function(){}},i=r.extend(n,e),a=[],o=0;d=r("body");var s=function(){r(".enjoyhint")&&r(".enjoyhint").remove(),r("html, body").css({overflow:"hidden"}),r(document).on("touchmove",c),d.enjoyhint({onNextClick:function(){o++,u()},onSkipClick:function(){var e=a[o],t=r(e.selector);h(e.event),t.off(p(e.event)),l()}})},c=function(e){e.preventDefault()},l=function(){d=r("body"),r(".enjoyhint").remove(),r("html, body").css({overflow:"auto"}),r("html, body").css({"overflow-x":"hidden"}),r(document).off("touchmove",c)};t.clear=function(){r(".enjoyhint_next_btn").removeClass(t.nextUserClass),r(".enjoyhint_next_btn").text("Next"),r(".enjoyhint_skip_btn").removeClass(t.skipUserClass),r(".enjoyhint_skip_btn").text("Skip")};var d=r("body"),u=function e(){if(a&&a[o]){r(".enjoyhint").removeClass("enjoyhint-step-"+o),r(".enjoyhint").addClass("enjoyhint-step-"+(o+1));var n=a[o];n.onBeforeStart&&"function"==typeof n.onBeforeStart&&n.onBeforeStart();var s=n.timeout||0;setTimeout(function(){if(!n.selector)for(var i in n)n.hasOwnProperty(i)&&i.split(" ")[1]&&(n.selector=i.split(" ")[1],n.event=i.split(" ")[0],"next"!=i.split(" ")[0]&&"auto"!=i.split(" ")[0]&&"custom"!=i.split(" ")[0]||(n.event_type=i.split(" ")[0]),n.description=n[i]);setTimeout(function(){t.clear()},250),r(document.body).scrollTo(n.selector,n.scrollAnimationSpeed||250,{offset:-100}),setTimeout(function(){var i=r(n.selector),a=p(n.event);d.enjoyhint("show"),d.enjoyhint("hide_next");var s=i;if(n.event_selector&&(s=r(n.event_selector)),n.event_type||"key"!=n.event||i.keydown(function(t){t.which==n.keyCode&&(o++,e())}),1==n.showNext&&d.enjoyhint("show_next"),1==n.showSkip?d.enjoyhint("show_skip"):d.enjoyhint("hide_skip"),1==n.showSkip,n.nextButton&&(r(".enjoyhint_next_btn").addClass(n.nextButton.className||""),r(".enjoyhint_next_btn").html(n.nextButton.html||"Next"),t.nextUserClass=n.nextButton.className),n.skipButton&&(r(".enjoyhint_skip_btn").addClass(n.skipButton.className||""),r(".enjoyhint_skip_btn").html(n.skipButton.html||"Skip"),t.skipUserClass=n.skipButton.className),n.event_type)switch(n.event_type){case"auto":switch(i[n.event](),n.event){case"click":}return o++,void e();case"custom":f(n.event,function(){o++,h(n.event),e()});break;case"next":d.enjoyhint("show_next")}else s.on(a,function(t){n.keyCode&&t.keyCode!=n.keyCode||(o++,r(this).off(a),e())});var c=Math.max(i.outerWidth(),i.outerHeight()),l=n.radius||Math.round(c/2)+5,u=i.offset(),m=i.outerWidth(),g=i.outerHeight(),_=void 0!==n.margin?n.margin:10,v={x:u.left+Math.round(m/2),y:u.top+Math.round(g/2)-r(document).scrollTop()},y={center_x:v.x,center_y:v.y,text:n.description,top:n.top,bottom:n.bottom,left:n.left,right:n.right,margin:n.margin,scroll:n.scroll};n.shape&&"circle"==n.shape?(y.shape="circle",y.radius=l):(y.radius=0,y.width=m+_,y.height=g+_),d.enjoyhint("render_label_with_shape",y)},n.scrollAnimationSpeed+20||270)},s)}else d.enjoyhint("hide"),i.onEnd(),l()},p=function(e,t){return e+(t?"custom":"")+".enjoy_hint"},f=function(e,t){d.on(p(e,!0),t)},h=function(e){d.off(p(e,!0))};t.runScript=function(){o=0,i.onStart(),u()},t.resumeScript=function(){u()},t.getCurrentStep=function(){return o},t.trigger=function(e){d.trigger(p(e,!0))},t.setScript=function(e){e&&(a=e)},t.set=function(e){t.setScript(e)},t.setSteps=function(e){t.setScript(e)},t.run=function(){t.runScript()},t.resume=function(){t.resumeScript()},s()},"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.roundRect=function(e,t,n,i,r){return n<2*r&&(r=n/2),i<2*r&&(r=i/2),this.beginPath(),this.moveTo(e+r,t),this.arcTo(e+n,t,e+n,t+i,r),this.arcTo(e+n,t+i,e,t+i,r),this.arcTo(e,t+i,e,t,r),this.arcTo(e,t,e+n,t,r),this.closePath(),this});var o={init:function(e){return this.each(function(){function t(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg",e);for(var i in t)n.setAttribute(i,t[i]);return n}var n={onNextClick:function(){},onSkipClick:function(){},animation_time:800};this.enjoyhint_obj={};var i=this.enjoyhint_obj,o=r(this);r("body");i.options=jQuery.extend(n,e),i.gcl={chooser:"enjoyhint"},i.cl={enjoy_hint:"enjoyhint",hide:"enjoyhint_hide",disable_events_element:"enjoyhint_disable_events",btn:"enjoyhint_btn",skip_btn:"enjoyhint_skip_btn",close_btn:"enjoyhint_close_btn",next_btn:"enjoyhint_next_btn",main_canvas:"enjoyhint_canvas",main_svg:"enjoyhint_svg",svg_wrapper:"enjoyhint_svg_wrapper",svg_transparent:"enjoyhint_svg_transparent",kinetic_container:"kinetic_container"},i.canvas_size={w:1.4*r(window).width(),h:1.4*r(window).height()};var s="enj_canvas";i.enjoyhint=r("<div>",{class:i.cl.enjoy_hint+" "+i.cl.svg_transparent}).appendTo(o),i.enjoyhint_svg_wrapper=r("<div>",{class:i.cl.svg_wrapper+" "+i.cl.svg_transparent}).appendTo(i.enjoyhint),i.$stage_container=r('<div id="'+i.cl.kinetic_container+'">').appendTo(i.enjoyhint),i.$canvas=r('<canvas id="'+s+'" width="'+i.canvas_size.w+'" height="'+i.canvas_size.h+'" class="'+i.cl.main_canvas+'">').appendTo(i.enjoyhint),i.$svg=r('<svg width="'+i.canvas_size.w+'" height="'+i.canvas_size.h+'" class="'+i.cl.main_canvas+" "+i.cl.main_svg+'">').appendTo(i.enjoyhint_svg_wrapper);var c=r(t("defs")),l=r(t("marker",{id:"arrowMarker",viewBox:"0 0 36 21",refX:"21",refY:"10",markerUnits:"strokeWidth",orient:"auto",markerWidth:"16",markerHeight:"12"})),d=r(t("path",{style:"fill:none; stroke:rgb(255,255,255); stroke-width:2",d:"M0,0 c30,11 30,9 0,20"}));c.append(l.append(d)).appendTo(i.$svg),i.kinetic_stage=new a.Stage({container:i.cl.kinetic_container,width:i.canvas_size.w,height:i.canvas_size.h}),i.layer=new a.Layer,i.rect=new a.Rect({fill:"rgba(0,0,0,0.6)",width:i.canvas_size.w,height:i.canvas_size.h});var u=r("<div>",{class:i.cl.disable_events_element}).appendTo(i.enjoyhint),p=u.clone().appendTo(i.enjoyhint),f=u.clone().appendTo(i.enjoyhint),h=u.clone().appendTo(i.enjoyhint);i.$skip_btn=r("<div>",{class:i.cl.skip_btn}).appendTo(i.enjoyhint).html("Skip").click(function(e){i.hide(),i.options.onSkipClick()}),i.$next_btn=r("<div>",{class:i.cl.next_btn}).appendTo(i.enjoyhint).html("Next").click(function(e){i.options.onNextClick()}),i.$close_btn=r("<div>",{class:i.cl.close_btn}).appendTo(i.enjoyhint).html("").click(function(e){i.hide(),i.options.onSkipClick()}),i.$canvas.mousedown(function(e){r("canvas").css({left:"4000px"});var t=document.elementFromPoint(e.clientX,e.clientY);return r("canvas").css({left:"0"}),r(t).click(),!1});var m=0,g=130;i.shape=new a.Shape({radius:m,center_x:-g,center_y:-g,width:0,height:0,sceneFunc:function(e){var t=this.getContext("2d")._context,n=(this.pos,t.globalCompositeOperation);t.globalCompositeOperation="destination-out",t.beginPath();var i=this.attrs.center_x-Math.round(this.attrs.width/2),r=this.attrs.center_y-Math.round(this.attrs.height/2);t.roundRect(i,r,this.attrs.width,this.attrs.height,this.attrs.radius),t.fillStyle="red",t.fill(),t.globalCompositeOperation=n}}),i.shape.radius=m,i.layer.add(i.rect),i.layer.add(i.shape),i.kinetic_stage.add(i.layer);[i.enjoyhint,u,p,f,h];return i.show=function(){i.enjoyhint.removeClass(i.cl.hide)},i.hide=function(){i.enjoyhint.addClass(i.cl.hide);var e=new a.Tween({node:i.shape,duration:.002,center_x:-g,center_y:-g});e.play()},i.hide(),i.hideNextBtn=function(){i.$next_btn.addClass(i.cl.hide),i.nextBtn="hide"},i.showNextBtn=function(){i.$next_btn.removeClass(i.cl.hide),i.nextBtn="show"},i.hideSkipBtn=function(){i.$skip_btn.addClass(i.cl.hide)},i.showSkipBtn=function(){i.$skip_btn.removeClass(i.cl.hide)},i.renderCircle=function(e){var t=e.r||0,n=e.x||0,r=e.y||0,o=new a.Tween({node:i.shape,duration:.2,center_x:n,center_y:r,width:2*t,height:2*t,radius:t});o.play();var s=n-t,c=n+t,l=r-t,d=r+t,u=20;return{x:n,y:r,left:s,right:c,top:l,bottom:d,conn:{left:{x:s-u,y:r},right:{x:c+u,y:r},top:{x:n,y:l-u},bottom:{x:n,y:d+u}}}},i.renderRect=function(e){var t=e.r||0,n=e.x||0,r=e.y||0,o=e.w||0,s=e.h||0,c=20,l=new a.Tween({node:i.shape,duration:.2,center_x:n,center_y:r,width:o,height:s,radius:t});l.play();var d=Math.round(o/2),u=Math.round(s/2),p=n-d,f=n+d,h=r-u,m=r+u;return{x:n,y:r,left:p,right:f,top:h,bottom:m,conn:{left:{x:p-c,y:r},right:{x:f+c,y:r},top:{x:n,y:h-c},bottom:{x:n,y:m+c}}}},i.renderLabel=function(e){var t=e.x||0,n=e.y||0,a=(e.text||0,i.getLabelElement({x:t,y:n,text:e.text})),o=a.width(),s=a.height(),c=a.offset().left,l=a.offset().left+o,d=a.offset().top-r(document).scrollTop(),u=a.offset().top+s,p=10,f={x:c-p,y:d+Math.round(s/2)},h={x:l+p,y:d+Math.round(s/2)},m={x:c+Math.round(o/2),y:d-p},g={x:c+Math.round(o/2),y:u+p};return a.detach(),setTimeout(function(){r("#enjoyhint_label").remove(),a.appendTo(i.enjoyhint)},i.options.animation_time/2),{label:a,left:c,right:l,top:d,bottom:u,conn:{left:f,right:h,top:m,bottom:g}}},i.renderArrow=function(e){var n=e.x_from||0,a=e.y_from||0,o=e.x_to||0,s=e.y_to||0,c=e.by_top_side,l=0,d=0;c?a>=s?(d=s,l=n):(d=a,l=o):a>=s?(d=a,l=o):(d=s,l=n);e.text||"";i.enjoyhint.addClass(i.cl.svg_transparent),setTimeout(function(){r("#enjoyhint_arrpw_line").remove();var e="M"+n+","+a+" Q"+l+","+d+" "+o+","+s;i.$svg.append(t("path",{style:"fill:none; stroke:rgb(255,255,255); stroke-width:3","marker-end":"url(#arrowMarker)",d:e,id:"enjoyhint_arrpw_line"})),i.enjoyhint.removeClass(i.cl.svg_transparent)},i.options.animation_time/2)},i.getLabelElement=function(e){return r("<div>",{class:"enjoy_hint_label",id:"enjoyhint_label"}).css({top:e.y+"px",left:e.x+"px"}).html(e.text).appendTo(i.enjoyhint)},i.disableEventsNearRect=function(e){u.css({top:"0",left:"0"}).height(e.top),p.css({top:e.bottom+"px",left:"0"}),f.css({top:"0",left:"0px"}).width(e.left),h.css({top:"0",left:e.right+"px"})},i.renderLabelWithShape=function(e){function t(e,t,n){q=e,j=t,L=n}function n(e,n,i,r,a){var o=[];o=R?e:F?n:N?i:H?r:a,o&&t(o[0],o[1],o[2])}var r=e.shape||"rect",a={},o=0,s=0,c={top:e.top||0,bottom:e.bottom||0,left:e.left||0,right:e.right||0};switch(r){case"circle":o=s=e.radius;var l={top:e.center_y-s+c.top,bottom:e.center_y+s-c.bottom,left:e.center_x-o+c.left,right:e.center_x+o-c.right},d=l.right-l.left,u=l.bottom-l.top;e.radius=Math.round(Math.min(d,u)/2),o=s=Math.round(e.radius/2);var p=Math.round(d/2),f=Math.round(u/2);e.center_x=l.left+p,e.center_y=l.top+f,a=i.renderCircle({x:e.center_x,y:e.center_y,r:e.radius});break;case"rect":o=Math.round(e.width/2),s=Math.round(e.height/2);var l={top:e.center_y-s+c.top,bottom:e.center_y+s-c.bottom,left:e.center_x-o+c.left,right:e.center_x+o-c.right};e.width=l.right-l.left,e.height=l.bottom-l.top,o=Math.round(e.width/2),s=Math.round(e.height/2),e.center_x=l.left+o,e.center_y=l.top+s,a=i.renderRect({x:e.center_x,y:e.center_y,w:e.width,h:e.height,r:e.radius})}var h={w:i.enjoyhint.width(),h:i.enjoyhint.height()},m=i.getLabelElement({x:0,y:0,text:e.text}),g=m.outerWidth(),_=m.outerHeight();m.remove();var v=e.center_y-s,y=h.h-(e.center_y+s),b=e.center_x-o,w=h.w-(e.center_x+o),x=h.w-e.center_x<e.center_x?"left":"right",$=h.h-e.center_y<e.center_y?"top":"bottom",k=150,C=40,I=k+g+C,S=k+_+C,E=o+k,T=s+k,B="left"==x?e.center_x-E-g:e.center_x+E,A="top"==$?e.center_y-T-_:e.center_y+T;v<S&&y<S&&(A=e.center_y+C),b<I&&w<I&&(B=e.center_x);var O=i.renderLabel({x:B,y:A,text:e.text});i.$next_btn.css({left:B,top:A+_+15});var P=B+i.$next_btn.width()+10;"hide"==i.nextBtn&&(P=B),i.$skip_btn.css({left:P,top:A+_+15}),i.$close_btn.css({right:10,top:10}),i.disableEventsNearRect({top:a.top,bottom:a.bottom,left:a.left,right:a.right});var L=!1,q="left",j="left",D=O.left<=a.x&&O.right>=a.x,M=O.right<a.x,R=(O.left>a.x,O.right<a.left,O.left>a.right,O.bottom<a.top),V=O.top>a.bottom,N=O.bottom>=a.y&&O.top<=a.y,F=O.bottom<=a.y&&!R,H=O.top>=a.y&&!V;if(D)if(R)t("bottom","top","top");else{if(!V)return;t("top","bottom","bottom")}else M?n(["right","top","top"],["bottom","left","bottom"],["right","left","top"],["top","left","top"],["right","bottom","bottom"]):n(["left","top","top"],["bottom","right","bottom"],["left","right","top"],["top","right","top"],["left","bottom","bottom"]);var z=O.conn[q],U=a.conn[j],Y="top"==L;i.renderArrow({x_from:z.x,y_from:z.y,x_to:U.x,y_to:U.y,by_top_side:Y})},i.clear=function(){i.ctx.clearRect(0,0,3e3,2e3)},this})},set:function(e){return this.each(function(){this.enjoyhint_obj.setValue(e)}),this},show:function(){return this.each(function(){this.enjoyhint_obj.show()}),this},hide:function(){return this.each(function(){this.enjoyhint_obj.hide()}),this},hide_next:function(){return this.each(function(){this.enjoyhint_obj.hideNextBtn()}),this},show_next:function(){return this.each(function(){this.enjoyhint_obj.showNextBtn()}),this},hide_skip:function(){return this.each(function(){this.enjoyhint_obj.hideSkipBtn()}),this},show_skip:function(){return this.each(function(){this.enjoyhint_obj.showSkipBtn()}),this},render_circle:function(e,t,n){return this.each(function(){this.enjoyhint_obj.renderCircle(e,t,n)}),this},render_label:function(e,t,n){return this.each(function(){this.enjoyhint_obj.renderLabel(e,t,n)}),this},render_label_with_shape:function(e){return this.each(function(){this.enjoyhint_obj.renderLabelWithShape(e)}),this},clear:function(){return this.each(function(){this.enjoyhint_obj.clear()}),this},close:function(e){return this.each(function(){this.enjoyhint_obj.closePopdown()}),this}};r.fn.enjoyhint=function(e){return o[e]?o[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!==("undefined"==typeof e?"undefined":i(e))&&e?(r.error("Method "+e+" does not exist on $.numinput"),this):o.init.apply(this,arguments)}},,function(e,t){},function(e,t){},function(e,t,n){var i,r;"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(a,o){i=o,r="function"==typeof i?i.call(t,n,t,e):i,!(void 0!==r&&(e.exports=r))}(void 0,function(){function e(e,t){var n=Object.prototype.toString.call(e),i="[object Array]"===n||"[object NodeList]"===n||"[object HTMLCollection]"===n||"undefined"!=typeof jQuery&&e instanceof jQuery||"undefined"!=typeof Elements&&e instanceof Elements,r=0,a=e.length;if(i)for(;r<a;r++)t(e[r]);else t(e)}var t=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return window.setTimeout(e,20)},n=function n(i,r){function a(){var e=[];this.add=function(t){e.push(t)};var t,n;this.call=function(){for(t=0,n=e.length;t<n;t++)e[t].call()},this.remove=function(i){var r=[];for(t=0,n=e.length;t<n;t++)e[t]!==i&&r.push(e[t]);e=r},this.length=function(){return e.length}}function o(e,t){return e.currentStyle?e.currentStyle[t]:window.getComputedStyle?window.getComputedStyle(e,null).getPropertyValue(t):e.style[t]}function s(e,n){if(e.resizedAttached){if(e.resizedAttached)return void e.resizedAttached.add(n)}else e.resizedAttached=new a,e.resizedAttached.add(n);e.resizeSensor=document.createElement("div"),e.resizeSensor.className="resize-sensor";var i="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;",r="position: absolute; left: 0; top: 0; transition: 0s;";e.resizeSensor.style.cssText=i,e.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="'+i+'"><div style="'+r+'"></div></div><div class="resize-sensor-shrink" style="'+i+'"><div style="'+r+' width: 200%; height: 200%"></div></div>',e.appendChild(e.resizeSensor),"static"==o(e,"position")&&(e.style.position="relative");var s=e.resizeSensor.childNodes[0],c=s.childNodes[0],l=e.resizeSensor.childNodes[1],d=function(){c.style.width=1e5+"px",c.style.height=1e5+"px",s.scrollLeft=1e5,s.scrollTop=1e5,l.scrollLeft=1e5,l.scrollTop=1e5};d();var u=!1,p=function n(){e.resizedAttached&&(u&&(e.resizedAttached.call(),u=!1),t(n))};t(p);var f,h,m,g,_=function(){(m=e.offsetWidth)==f&&(g=e.offsetHeight)==h||(u=!0,f=m,h=g),d()},v=function(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n)};v(s,"scroll",_),v(l,"scroll",_)}e(i,function(e){s(e,r)}),this.detach=function(e){n.detach(i,e)}};return n.detach=function(t,n){e(t,function(e){e.resizedAttached&&"function"==typeof n&&(e.resizedAttached.remove(n),e.resizedAttached.length())||e.resizeSensor&&(e.contains(e.resizeSensor)&&e.removeChild(e.resizeSensor),delete e.resizeSensor,delete e.resizedAttached)})},n})},function(e,t,n){"use strict";var i=n(328),r=n(344),a=n(329).cleanupChart,o=n(430),s=n(338),c=n(438),l=n(440),d=n(441),u=n(318),p=n(364),f=n(371),h=n(319).localize,m=n(312).State,g=n(315).jpClient,_=n(431),v=function(){var e=0;m.remove("is_trading");var t=function(){u.wait("authorize").then(function(){n()})},n=function(){return g()?void f.load("multi_barriers_trading"):(m.set("is_trading",!0),l.clearFormId(),0===e&&(e=1,c.init()),u.send({payout_currencies:1}).then(function(){o(),d.processActiveSymbols()}),document.getElementById("websocket_form")&&r.addEventListenerForm(),_.init({script:"trading"}),i.bindAnalysisTabEvent(),$("#tab_portfolio").find("a").text(h("Portfolio")),$("#tab_graph").find("a").text(h("Chart")),$("#tab_explanation").find("a").text(h("Explanation")),$("#tab_last_digit").find("a").text(h("Last Digit Stats")),void p.viewButtonOnClick("#contract_confirmation_container"))},v=function(){sessionStorage.removeItem("underlying"),window.location.reload()},y=function(){m.remove("is_trading"),e=0,d.forgetTradingStreams(),u.clear(),s.clear(),a(),r.clean(),u.clear("active_symbols")},b=function(){r.showPriceOverlay(),r.showFormOverlay(),a(),t()};return{onLoad:t,reload:v,onUnload:y,onDisconnect:b}}();e.exports=v},function(e,t,n){"use strict";var i=n(305),r=n(328),a=n(341),o=n(344),s=n(338),c=n(439),l=n(340),d=n(345),u=n(440),p=n(441),f=n(356),h=n(342).getMinMaxTime,m=n(342).getStartDateNode,g=n(348),_=n(318),v=n(371),y=n(368),b=n(320).dateValueChanged,w=n(320).isVisible,x=n(325).getDecimalPlaces,k=n(428),C=n(429),I=function(){var e=function(){var e=function(e){o.showPriceOverlay(),s.set("market",e),s.remove("formname"),s.remove("underlying"),p.processMarket()},n=document.getElementById("contract_markets");n&&n.addEventListener("change",function(t){e(t.target.value)});var h=function(){p.processContractForm(),r.request()},C=document.getElementById("contract_form_name_nav");C&&C.addEventListener("click",function(e){var t=e.target;if(t&&t.getAttribute("menuitem")){var n=t.classList.contains("active")||t.parentElement.classList.contains("active");s.set("formname",t.getAttribute("menuitem")),o.toggleActiveCatMenuElement(C,e.target.getAttribute("menuitem")),n||h()}});var I=document.getElementById("underlying");I&&I.addEventListener("change",function(e){if(e.target){o.showFormOverlay(),o.showPriceOverlay(),e.target.selectedIndex<0&&(e.target.selectedIndex=0);var t=e.target.value;s.remove("barrier","barrier_high","barrier_low"),s.set("underlying",t),g.clean(),o.updateWarmChart(),S(t),l.request(t),o.displayTooltip(s.get("market"),t)}});var S=function(e){_.send({contracts_for:e}).then(function(e){d.hide("CONNECTION_ERROR"),p.processContract(e)})},E=function(e){e.target.value%1!==0&&(e.target.value=Math.floor(e.target.value)),s.set("duration_amount",e.target.value),c.selectAmount(e.target.value),u.processPriceRequest(),o.submitForm(document.getElementById("websocket_form"))},T=document.getElementById("duration_amount"),B=!1;T&&(T.addEventListener("keypress",k),$("#duration_amount").on("input",o.debounce(function(e){E(e),c.validateMinDurationAmount(),B=!0})).on("change",o.debounce(function(e){c.validateMinDurationAmount(),B!==!1&&s.get("duration_amount")?B=!1:E(e)})));var A=document.getElementById("expiry_type");A&&A.addEventListener("change",function(e){s.set("expiry_type",e.target.value),p.onExpiryTypeChange(e.target.value),"endtime"!==A.value&&u.processPriceRequest()});var O=document.getElementById("duration_units");O&&O.addEventListener("change",function(e){s.remove("barrier","barrier_high","barrier_low"),p.onDurationUnitChange(e.target.value),u.processPriceRequest()});var P=document.getElementById("expiry_date");P&&$("#expiry_date").on("change input",function(){return!!b(this,"date")&&(o.timeIsValid($("#expiry_date"))&&c.selectEndDate(i(this.getAttribute("data-value"))),!0)});var L=document.getElementById("expiry_time");L&&(t("#expiry_time"),$("#expiry_time").on("focus click",function(){t("#expiry_time")}).on("keypress",function(e){k(e,[58])}).on("change input blur",function(){return!!b(this,"time")&&(o.timeIsValid($("#expiry_time"))&&(c.setTime(L.value),u.processPriceRequest()),!0)}));var q=document.getElementById("amount");q&&(q.addEventListener("keypress",k),q.addEventListener("input",o.debounce(function(e){e.target.value=e.target.value.replace(/[^0-9.]/g,""),G(e.target.value)&&(e.target.value=parseFloat(e.target.value).toFixed(x(s.get("currency")))),s.set("amount",e.target.value),u.processPriceRequest(),o.submitForm(document.getElementById("websocket_form"))})));var j=!1,D=function(){j||(j=!0,t("#time_start",V),$("#time_start").on("focus click",function(){t("#time_start",V)}).on("change input blur",function(){return!!b(this,"time")&&(s.set("time_start",R.value),u.processPriceRequest(),!0)}))},M=m();
M&&M.addEventListener("change",function(e){s.set("date_start",e.target.value),D();var t=c.onStartDateChange(e.target.value);t>=0&&u.processPriceRequest()});var R=document.getElementById("time_start"),V=$("#date_start");R&&"now"!==M.value&&D();var N=document.getElementById("amount_type");N&&N.addEventListener("change",function(e){s.set("amount_type",e.target.value),u.processPriceRequest()});var F=document.getElementById("submarket");F&&F.addEventListener("change",function(e){if(e.target){for(var t=document.getElementById("underlying"),n=t.children,i=0,r=n.length;i<r;i++)n[i].disabled="all"!==e.target.value&&e.target.value!==n[i].className;document.querySelectorAll("#underlying option:enabled")[0].selected="selected";var a=new Event("change");t.dispatchEvent(a)}});var H=document.getElementById("currency");H&&H.addEventListener("change",function(e){s.set("currency",e.target.value),u.processPriceRequest()}),$(".purchase_button").on("click dblclick",function(){if(!w(document.getElementById("confirmation_message_container"))){var e=this.getAttribute("data-purchase-id"),t=this.getAttribute("data-ask-price"),n={buy:e,price:t,passthrough:{}};Object.keys(this.attributes).forEach(function(e){if(e&&this.attributes[e]&&this.attributes[e].name&&!/data\-balloon/.test(this.attributes[e].name)){var t=this.attributes[e].name.match(/data\-(.+)/);t&&t[1]&&"purchase-id"!==t[1]&&"passthrough"!==t[1]&&(n.passthrough[t[1]]=this.attributes[e].value)}},this),e&&t&&($(".purchase_button").css("visibility","hidden"),_.send(n).then(function(e){f.display(e),y.pushPurchaseData(e)}),u.incrFormId(),u.processForgetProposals())}}),$("#close_confirmation_container").on("click dblclick",function(e){e.target&&w(document.getElementById("confirmation_message_container"))&&(e.preventDefault(),o.hideOverlayContainer(),u.processPriceRequest())});var z=document.getElementById("barrier");z&&$("#barrier").on("keypress",function(e){k(e,[43,45,46])}).on("input",o.debounce(function(e){a.validateBarrier(),s.set("barrier",e.target.value),u.processPriceRequest(),o.submitForm(document.getElementById("websocket_form"))},1e3));var U=document.getElementById("barrier_low");U&&(U.addEventListener("input",o.debounce(function(e){s.set("barrier_low",e.target.value),u.processPriceRequest(),o.submitForm(document.getElementById("websocket_form"))})),U.addEventListener("keypress",function(e){k(e,[43,45,46])}));var Y=document.getElementById("barrier_high");Y&&(Y.addEventListener("input",o.debounce(function(e){s.set("barrier_high",e.target.value),u.processPriceRequest(),o.submitForm(document.getElementById("websocket_form"))})),Y.addEventListener("keypress",function(e){k(e,[43,45,46])}));var W=document.getElementById("prediction");W&&W.addEventListener("change",o.debounce(function(e){s.set("prediction",e.target.value),u.processPriceRequest(),o.submitForm(document.getElementById("websocket_form"))}));var G=function(e){return!isNaN(e)&&e%1!==0&&(+parseFloat(e)).toFixed(10).replace(/^-?\d*\.?|0+$/g,"").length>x(s.get("currency"))},J=document.getElementById("trading_init_progress");J&&J.addEventListener("click",o.debounce(function(){o.reloadPage()}));var X=document.getElementById("symbol_tip");X&&X.addEventListener("click",o.debounce(function(e){v.load(e.target.getAttribute("target"))}))},t=function(e,t){var n=window.time?window.time:i.utc(),r=void 0;t&&(n=h(t,n).minTime,r=h(t,n).maxTime);var a={selector:e,minTime:n,maxTime:r||null};C.init(a)};return{init:e}}();e.exports=I},function(e,t,n){"use strict";var i=n(305),r=n(341),a=n(344),o=n(342),s=n(343),c=n(338),l=n(440),d=n(318),u=n(319).localize,p=n(312).State,f=n(320).elementTextContent,h=n(320).isVisible,m=n(326).toISOFormat,g=n(326).toReadableFormat,_=n(420),v=function(){var e={},t=0,n=function(){var n=void 0;n="now"!==c.get("date_start")&&p.get("is_start_dates_displayed")&&i(1e3*c.get("date_start")).isAfter(i())?"forward":"spot";var r=s.durations();if(r===!1)return document.getElementById("expiry_row").style.display="none",void c.remove("expiry_type","duration_amount","duration_units","expiry_date","expiry_time");for(var o=document.getElementById("duration_units"),l=s.form(),d=s.barrier(),u={};o&&o.firstChild;)o.removeChild(o.firstChild);Object.keys(r).forEach(function(e){Object.keys(r[e][l]).forEach(function(t){var i={};i=d?r[e][l][d]:r[e][l][t],Object.keys(i).forEach(function(t){n?n===t&&(u.hasOwnProperty(n)||(u[e]=i[n])):u.hasOwnProperty(t)||(u[e]=i[t])})})});var f={};Object.keys(u).forEach(function(e){var t=x(u[e].min_contract_duration),n=x(u[e].max_contract_duration),i=t.unit;if("intraday"===e)switch(i){case"s":f[i]=y(t,n),f.m=y(x("1m"),n,!0),f.h=y(x("1h"),n);break;case"m":f[i]=y(t,n,!0),f.h=y(x("1h"),n);break;case"h":f[i]=y(t,n);break;default:f[i]=y(t,n)}else"daily"!==e&&"tick"!==e||(f[i]=y(t,n))});var h=Object.keys(f).sort(function(e,t){return a.durationOrder(e)>a.durationOrder(t)?1:-1});t=0;for(var m=0;m<h.length;m++){var g=h[m];"t"!==g&&(t=1),f.hasOwnProperty(g)&&o.appendChild(f[g])}e.unit&&(a.selectOption(e.unit,o)||(e={})),k()},y=function(e,t,n){var i=document.createElement("option"),r=document.createTextNode(e.text);if(i.setAttribute("value",e.unit),i.setAttribute("data-minimum",e.value),t.value&&t.unit){var a=b(t.value,t.unit,e.unit);a&&i.setAttribute("data-maximum",a)}return n&&i.setAttribute("selected","selected"),i.appendChild(r),i},b=function(e,t,n){if(!e||!t||!n)return null;if(t===n)return e;var i={s:1,m:60,h:3600,d:86400};return e*i[t]/i[n]},w=function(){var e=document.getElementById("date_start").value,t=!e||"now"===e,n=i(t?window.time:1e3*parseInt(e)).add(5,"minutes").utc(),r=c.get("expiry_date")?i(c.get("expiry_date")):n,a=c.get("expiry_time")||n.format("HH:mm"),o=m(r);i(o+" "+a).valueOf()<n.valueOf()&&(r=n,o=m(r),a=n.format("HH:mm"));var s=document.getElementById("expiry_date"),l=document.getElementById("expiry_time");s.value=g(r),s.setAttribute("data-value",o),l.value=a,l.setAttribute("data-value",a),c.set("expiry_date",o),c.set("expiry_time",a),v.setTime(a),k()},x=function(e){var t={s:u("seconds"),m:u("minutes"),h:u("hours"),d:u("days"),t:u("ticks")},n=e?e.toString().match(/[a-zA-Z]+|[0-9]+/g):[],i={};return n.length>1?(i.unit=n[1],i.text=t[n[1]],i.value=n[0]):(i.unit="t",i.text=t.t,i.value=n[0]),i},k=function(){var t=document.getElementById("duration_units");if(t.options[t.selectedIndex]){var n=t.options[t.selectedIndex].getAttribute("data-minimum"),i=t.options[t.selectedIndex].getAttribute("data-maximum"),a=c.get("duration_amount")||n;t.value=c.get("duration_units")&&document.querySelectorAll('select[id="duration_units"] [value="'+c.get("duration_units")+'"]').length?c.get("duration_units"):t.value,f(document.getElementById("duration_minimum"),n),f(document.getElementById("duration_maximum"),i),e.amount&&e.unit>a&&(a=e.amount),document.getElementById("duration_amount").value=a,c.set("duration_amount",a),C(),c.set("duration_units",t.value);var o=$("#duration_amount"),s="#duration_amount";if("d"===t.value){var l=window.time?new Date(window.time.valueOf()):new Date;l.setDate(l.getDate()+1),_.init({selector:s,type:"diff",minDate:1,maxDate:364,native:!1}),o.change(function(e){var t=void 0,n=$("#duration_amount").val();if(n)t=n;else{e=e.target.getAttribute("data-value");var i=e?new Date(e):new Date,r=window.time?window.time.valueOf():new Date;t=Math.ceil((i-r)/864e5)}o.val(t)})}else _.hide(s);$("#expiry_date").is(":visible")&&_.init({selector:"#expiry_date",minDate:0,maxDate:364}),E(),r.display()}},C=function(){var e=document.getElementById("expiry_type"),n=document.createDocumentFragment();0===$("#expiry_type").find("option[value="+c.get("expiry_type")+"]").length&&e.value&&c.set("expiry_type",e.value);var i=c.get("expiry_type")||e.value||"duration",r=i,a="duration"===i?"endtime":"duration";for(r=document.getElementById("expiry_type_"+r),r&&(r.style.display="flex"),a=document.getElementById("expiry_type_"+a),a&&(a.style.display="none");e&&e.firstChild;)e.removeChild(e.firstChild);var o=document.createElement("option"),s=document.createTextNode(u("Duration"));o.setAttribute("value","duration"),"duration"===i&&o.setAttribute("selected","selected"),o.appendChild(s),n.appendChild(o),t&&(o=document.createElement("option"),s=document.createTextNode(u("End Time")),o.setAttribute("value","endtime"),"endtime"===i&&o.setAttribute("selected","selected"),o.appendChild(s),n.appendChild(o)),e.appendChild(n)},I=function(e){var t=document.getElementById("expiry_time"),n=document.getElementById("date_start"),a=g(e),o=m(e);if($("#expiry_date").val(a).attr("data-value",o),c.set("expiry_date",o),e.isAfter(window.time.format("YYYY-MM-DD HH:mm"),"day"))v.setTime(""),c.remove("expiry_time"),B(),n.setAttribute("disabled","disabled"),t.hide(),r.display(),S(o);else{if(n.removeAttribute("disabled"),!t.value){var s=i(window.time).add(5,"minutes").utc().format("HH:mm");t.value=s,t.setAttribute("data-value",s)}v.setTime(t.value),c.set("expiry_time",c.get("expiry_time")||t.value),t.show(),r.display(),l.processPriceRequest()}},S=function(e){var t=o.getTradingTimes();t.hasOwnProperty(e)?l.processPriceRequest():(a.showPriceOverlay(),d.send({trading_times:e}).then(function(e){o.processTradingTimesAnswer(e),l.processPriceRequest()}))},E=function(){var e=document.getElementById("duration_amount"),t=document.getElementById("duration_minimum"),n=document.getElementById("duration_maximum");h(e)&&h(t)&&(+e.value<+t.textContent||+n.textContent&&+e.value>+n.textContent?e.classList.add("error-field"):e.classList.remove("error-field"))},T=function(e){var t=$("#date_start");if(!e||!t.find("option[value="+e+"]").length)return 0;t.val(e),$("#time_start_row").setVisibility("now"!==e);var n=document.getElementById("time_start");o.checkValidTime(n,t,c.get("time_start"));var r=1,s=$("#expiry_time");if("now"!==e&&"endtime"===c.get("expiry_type")){r=-1;var l=i(1e3*parseInt(e)).add(5,"minutes").utc();v.setTime(a.timeIsValid(s)&&c.get("expiry_time")?c.get("expiry_time"):l.format("HH:mm")),v.selectEndDate(a.timeIsValid(s)&&c.get("expiry_date")?i(c.get("expiry_date")):l)}return a.timeIsValid(s),v.display(),r},B=function(){var e=$("#date_start");e.find('option[value="now"]').length&&c.set("date_start","now")};return{display:n,displayEndTime:w,populate:k,selectEndDate:I,validateMinDurationAmount:E,onStartDateChange:T,setTime:function(e){$("#expiry_time").val(e),c.set("expiry_time",e)},selectAmount:function(t){e.amount=t},selectUnit:function(t){e.unit=t}}}();e.exports=v},function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=n(305),a=n(342).getStartDateNode,o=n(344),s=n(342).displayPriceMovement,c=n(342).getTradingTimes,l=n(343),d=n(338),u=n(318),p=n(319).localize,f=n(320).elementTextContent,h=n(320).isVisible,m=n(325).formatMoney,g=function(){var e={},t=0,n=function(e){var n={proposal:1,subscribe:1},s=e,l=a(),u=document.getElementById("time_start"),p=document.getElementById("underlying"),f=document.getElementById("amount_type"),m=document.getElementById("currency"),g=document.getElementById("amount"),_=document.getElementById("expiry_type"),v=document.getElementById("duration_amount"),y=document.getElementById("duration_units"),b=document.getElementById("expiry_date"),w=document.getElementById("barrier"),x=document.getElementById("barrier_high"),$=document.getElementById("barrier_low"),k=document.getElementById("prediction");if(g&&h(g)&&g.value&&(n.amount=parseFloat(g.value)),f&&h(f)&&f.value&&(n.basis=f.value),s&&(n.contract_type=e),m&&(m.value||m.getAttribute("value"))&&(n.currency=m.value||m.getAttribute("value")),p&&p.value&&(n.symbol=p.value),l&&h(l)&&"now"!==l.value){var C=u.value.split(":");n.date_start=r.utc(1e3*Number(l.value)).hour(C[0]).minute(C[1]).unix()}if(_&&h(_)&&"duration"===_.value)n.duration=parseInt(v.value),n.duration_unit=y.value;else if(_&&h(_)&&"endtime"===_.value){var I=b.getAttribute("data-value"),S=d.get("expiry_time");if(!S){var E=c();E.hasOwnProperty(I)&&"object"===i(E[I][p.value])&&E[I][p.value].length&&"--"!==E[I][p.value][0]&&(S=E[I][p.value].length>1?E[I][p.value][1]:E[I][p.value])}n.date_expiry=r.utc(I+" "+(S||"23:59:59")).unix(),n.duration_unit="m"}return w&&h(w)&&w.value&&(n.barrier=w.value),x&&h(x)&&x.value&&(n.barrier=x.value),$&&h($)&&$.value&&(n.barrier2=$.value),k&&h(k)&&(n.barrier=parseInt(k.value)),s&&(n.contract_type=e),n.passthrough={form_id:t},o.resetPriceMovement(),n},_=function(t,n){var i=t.proposal,r=i?i.id:"",a=t.echo_req,c=a.contract_type;r&&!c&&(c=e[r]),a&&r&&Object.getOwnPropertyNames(a).length>0&&(e[r]=c);var l=o.contractTypeDisplayMapping(c);if(l){var d=document.getElementById("price_container_"+l);if(d){$(d).is(":visible")||$(d).fadeIn(200);var u=d.getElementsByClassName("contract_heading")[0],h=d.getElementsByClassName("contract_amount")[0],g=d.getElementsByClassName("contract_payout")[0],_=d.getElementsByClassName("stake")[0],v=d.getElementsByClassName("payout")[0],y=d.getElementsByClassName("purchase_button")[0],b=d.getElementsByClassName("contract_description")[0],w=d.getElementsByClassName("price_comment")[0],x=d.getElementsByClassName("contract_error")[0],k=document.getElementById("currency"),C=c&&n?n[c]:"";C&&(u.setAttribute("class","contract_heading "+c),f(u,C));var I=function(e){e&&(e.display_value?($(".stake:hidden").show(),f(_,p("Stake")+": "),f(h,m(k.value||k.getAttribute("value"),e.display_value)),$(".stake_wrapper:hidden").show()):$(".stake_wrapper:visible").hide(),e.payout?(f(v,p("Payout")+": "),f(g,m(k.value||k.getAttribute("value"),e.payout)),$(".payout_wrapper:hidden").show()):$(".payout_wrapper:visible").hide(),e.longcode&&window.innerWidth>500?b.setAttribute("data-balloon",e.longcode):b.removeAttribute("data-balloon"))};if(t.error)y.hide(),w.hide(),I(t.error.details),x.show(),f(x,t.error.message);else{I(i),$("#websocket_form").find(".error-field:visible").length>0?y.hide():y.show(),w.show(),x.hide(),o.displayCommentPrice(w,k.value||k.getAttribute("value"),i.ask_price,i.payout);var S=y.getAttribute("data-display_value"),E=y.getAttribute("data-payout");s(h,S,i.display_value),s(g,E,i.payout),y.setAttribute("data-purchase-id",r),y.setAttribute("data-ask-price",i.ask_price),y.setAttribute("data-display_value",i.display_value),y.setAttribute("data-payout",i.payout),y.setAttribute("data-symbol",r),Object.keys(a).forEach(function(e){e&&"proposal"!==e&&y.setAttribute("data-"+e,a[e])})}}}},v=function(){e={}},y=function(){t=0},b=function(){o.showPriceOverlay(),u.send({forget_all:"proposal"}),g.clearMapping()},w=function(){g.incrFormId(),b(),o.showPriceOverlay();var e=l.contractType()[l.form()];if("digits"===l.form())switch(sessionStorage.getItem("formname")){case"matchdiff":e={DIGITMATCH:1,DIGITDIFF:1};break;case"evenodd":e={DIGITEVEN:1,DIGITODD:1};break;case"overunder":e={DIGITOVER:1,DIGITUNDER:1}}Object.keys(e).forEach(function(e){u.send(g.proposal(e),{callback:function(e){e.echo_req&&null!==e.echo_req&&e.echo_req.passthrough&&e.echo_req.passthrough.form_id===t&&(o.hideOverlayContainer(),g.display(e,l.contractType()[l.form()]),o.hidePriceOverlay())}})})};return{proposal:n,display:_,clearMapping:v,clearFormId:y,idDisplayMapping:function(){return e},incrFormId:function(){t++},processForgetProposals:b,processPriceRequest:w}}();e.exports=g},function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=n(305),a=n(328),o=n(344),s=n(342).processTradingTimesAnswer,c=n(343),l=n(338),d=n(439),u=n(340),p=n(345),f=n(440),h=n(442).StartDates,m=n(346),g=n(348),_=n(318),v=n(319).localize,y=n(312).State,b=n(320).elementInnerHtml,w=function(){var e=function(){_.send({active_symbols:"brief"}).then(function(e){m.details(e);var n=o.getDefaultMarket();l.set("market",n),o.displayMarkets("contract_markets",m.markets(),n),t()})},t=function(){var e=l.get("market"),t=l.get("underlying");e&&m.underlyings()[e]||(e=o.getDefaultMarket(),l.set("market",e)),t&&m.underlyings()[e][t]||(t=void 0),o.displayUnderlyings("underlying",m.underlyings()[e],t),n()},n=function(){var e=document.getElementById("underlying");if(e){e.selectedIndex<0&&(e.selectedIndex=0);var t=e.value;l.set("underlying",t),o.showFormOverlay(),u.request(t),g.clean(),o.updateWarmChart(),_.clearTimeouts(),w(t),o.displayTooltip(l.get("market"),t)}},w=function(e){_.send({contracts_for:e}).then(function(e){p.hide("CONNECTION_ERROR"),x(e)})},x=function(e){if(e.hasOwnProperty("error")&&"InvalidSymbol"===e.error.code){f.processForgetProposals();var t=document.getElementById("contract_confirmation_container"),n=document.getElementById("confirmation_message"),r=document.getElementById("confirmation_error"),s=document.getElementById("contracts_list");return t.style.display="block",s.style.display="none",n.hide(),r.show(),void b(r,e.error.message+' <a href="javascript:;" onclick="sessionStorage.removeItem(\'underlying\'); window.location.reload();">'+v("Please reload the page")+"</a>")}y.set("is_chart_allowed",!(e.contracts_for&&e.contracts_for.feed_license&&"chartonly"===e.contracts_for.feed_license));var d=document.getElementById("trading_socket_container");d&&d.classList.add("show");var u=document.getElementById("trading_init_progress");u&&"none"!==u.style.display&&(u.style.display="none",l.update()),c.setContracts(e);var p=c.contractForms(),h=void 0;if(l.get("formname")&&p&&p[l.get("formname")])h=l.get("formname");else{var m=o.getContractCategoryTree(p);m[0]&&(h="object"===i(m[0])?m[0][1][0]:m[0])}l.set("formname",h),o.displayContractForms("contract_form_name_nav",p,h),k(),a.request(),o.hideFormOverlay()},k=function(){c.details(sessionStorage.getItem("formname")),h.display(),C();var e=void 0;y.get("is_start_dates_displayed")&&l.get("date_start")&&"now"!==l.get("date_start")?(e=d.onStartDateChange(l.get("date_start")),e&&"endtime"!==l.get("expiry_type")||d.display()):d.display();var t=l.get("currency")||document.getElementById("currency").value;l.get("amount")?$("#amount").val(l.get("amount")):l.set("amount",/btc/i.test(t)?.005:document.getElementById("amount").value),l.get("amount_type")?o.selectOption(l.get("amount_type"),document.getElementById("amount_type")):l.set("amount_type",document.getElementById("amount_type").value),l.get("currency")&&o.selectOption(l.get("currency"),document.getElementById("currency"));var n=l.get("expiry_type")||"duration",i=T(n);i>=0&&f.processPriceRequest()},C=function(){var e=document.getElementById("prediction_row");"digits"===c.form()&&"evenodd"!==sessionStorage.getItem("formname")?(e.show(),l.get("prediction")?o.selectOption(l.get("prediction"),document.getElementById("prediction")):l.set("prediction",document.getElementById("prediction").value)):(e.hide(),l.remove("prediction"))},I=function(){f.processForgetProposals(),S()},S=function(){_.send({forget_all:"ticks"})},E=function(e){s(e),f.processPriceRequest()},T=function(e){var t=$("#expiry_type");e&&t.find("option[value="+e+"]").length||(e="duration"),t.val(e);var n=0;if("endtime"===e)d.displayEndTime(),l.get("expiry_date")&&(d.selectEndDate(r(l.get("expiry_date"))),n=-1),l.remove("duration_units","duration_amount");else{h.enable(),d.display(),l.get("duration_units")&&B(l.get("duration_units"));var i=l.get("duration_amount");i&&i>$("#duration_minimum").text()&&$("#duration_amount").val(i),n=1,l.remove("expiry_date","expiry_time","end_date"),d.validateMinDurationAmount()}return n},B=function(e){var t=$("#duration_units");return e&&t.find("option[value="+e+"]").length?(t.val(e),l.set("duration_units",e),d.selectUnit(e),d.populate(),1):0};return{processActiveSymbols:e,processMarket:t,processContract:x,processContractForm:k,forgetTradingStreams:I,processForgetTicks:S,processTradingTimes:E,onExpiryTypeChange:T,onDurationUnitChange:B}}();e.exports=w},function(e,t,n){"use strict";var i=n(305),r=n(342).getStartDateNode,a=n(343),o=n(338),s=n(439),c=n(319).localize,l=n(312).State,d=function(){var e=0;l.remove("is_start_dates_displayed");var t=function(e,t){return e.date<t.date?-1:e.date>t.date?1:0},n=function(){var n=a.startDates();if(n&&n.list&&n.list.length){var d=r(),u=document.createDocumentFragment(),p=document.getElementById("date_start_row"),f=void 0,h=void 0;for(p.style.display="flex";d&&d.firstChild;)d.removeChild(d.firstChild);n.has_spot?(f=document.createElement("option"),h=document.createTextNode(c("Now")),f.setAttribute("value","now"),f.appendChild(h),u.appendChild(f),e=1):e=0,n.list.sort(t);var m=o.get("date_start")||"now";$("#time_start_row").setVisibility("now"!==m);var g=void 0,_=void 0,v=void 0,y=void 0,b=void 0;n.list.forEach(function(t){var n=i.unix(t.open).utc(),r=i.unix(t.close).utc(),a=3e5,o=i.utc();r.isAfter(o)&&(i(o).isAfter(i(n))&&(n=o),n=i(Math.ceil(+n/a)*a).utc(),v=n.format("ddd"),y=$(u).find("option:contains("+v+")"),b=y.length,b&&!new RegExp(c("Session")).test(y.text())&&$(y[0]).text(y.text()+" - "+c("Session")+" "+b),f=document.createElement("option"),f.setAttribute("value",n.utc().unix()),f.setAttribute("data-end",r.unix()),h=document.createTextNode(v+(y.length?" - "+c("Session")+" "+(b+1):"")),f.value>=m&&!_&&(_=!0,f.setAttribute("selected","selected")),"undefined"!=typeof g||e||(g=n.utc().unix()),f.appendChild(h),u.appendChild(f))}),d.appendChild(u),o.set("date_start",d.value),l.set("is_start_dates_displayed",!0),g&&s.onStartDateChange(g)}else l.remove("is_start_dates_displayed"),document.getElementById("date_start_row").style.display="none",o.remove("date_start")};return{display:n,disable:function(){r().setAttribute("disabled","disabled")},enable:function(){r().removeAttribute("disabled")}}}();e.exports={StartDates:d}},function(e,t,n){"use strict";var i=n(310),r=n(318),a=function(){var e=function(){r.send({get_account_status:1}).then(function(e){if(e.error)$("#error_message").setVisibility(1).text(e.error.message);else{var t=e.get_account_status.status,n=/authenticated/.test(t),r=/age_verification/.test(t);n&&r?$("#fully_authenticated").setVisibility(1):n?r||$("#needs_age_verification").setVisibility(1):i.isFinancial()?$("#not_authenticated_financial").setVisibility(1):$("#not_authenticated").setVisibility(1)}})};return{onLoad:e}}();e.exports=a},function(e,t,n){"use strict";var i=n(318),r=n(371),a=n(310),o=n(319).localize,s=n(389),c=function(){var e="#frm_change_password",t=function(){s.init(e,[{selector:"#old_password",validations:["req",["length",{min:6,max:25}]]},{selector:"#new_password",validations:["req","password",["not_equal",{to:"#old_password",name1:"Current password",name2:"New password"}]],re_check_field:"#repeat_password"},{selector:"#repeat_password",validations:["req",["compare",{to:"#new_password"}]],exclude_request:1},{request_field:"change_password",value:1}]),s.handleSubmit({form_selector:e,fnc_response_handler:n})},n=function(t){"error"in t?$("#form_error").text(o(t.error.message)).setVisibility(1):($(e).setVisibility(0),$("#msg_success").setVisibility(1),setTimeout(function(){a.sendLogoutRequest(!0)},5e3))},c=function(){i.wait("get_account_status").then(function(e){/has_password/.test(e.get_account_status.status)?t():r.load("user/settingsws")})};return{onLoad:c}}();e.exports=c},function(e,t,n){"use strict";var i=n(446),r=n(318),a=n(310),o=n(319).localize,s=n(312).State,c=n(389),l=function(){var e=void 0,t=void 0,n=void 0,l=void 0,d=function(){i.initValues(),r.wait("get_settings","balance").then(function(){t=s.get(["response","get_settings","get_settings","is_authenticated_payment_agent"]),t?u():h(!1)})},u=function(){var t="#frm_paymentagent_transfer",r=$("#no_balance_error"),o=a.get("currency");return e=s.get(["response","balance","balance","balance"]),l=$("#form_error"),o&&0!==+e?(r.setVisibility(0),h(!0),i.updateFormView(o),n=[{request_field:"paymentagent_transfer",value:1},{request_field:"currency",value:o}],c.init(t,[{selector:"#client_id",validations:["req",["regular",{regex:/^\w+\d+$/,message:"Please enter a valid Login ID."}]],request_field:"transfer_to"},{selector:"#amount",validations:["req",["number",{type:"float",decimals:"1, 2",min:10,max:2e3}]]},{request_field:"dry_run",value:1}].concat(n)),c.handleSubmit({form_selector:t,fnc_response_handler:m,fnc_additional_check:f}),void $("#amount").on("input change",function(){p($(this).val())})):($("#pa_transfer_loading").remove(),void r.setVisibility(1))},p=function(t){return+t>+e?(l.text(o("Insufficient balance.")).setVisibility(1),!1):(l.setVisibility(0),!0)},f=function(e){return p(e.amount)},h=function(e){e?($("#pa_transfer_loading").remove(),i.showForm(),i.showNotes()):(i.hideForm(),i.hideNotes(),t||($("#pa_transfer_loading").remove(),$("#not_pa_error").setVisibility(1)))},m=function(e){var t=e.echo_req,n=e.error;return n?1===t.dry_run?void l.text(n.message).setVisibility(1):void i.showTransferError(n.message):2===e.paymentagent_transfer?(i.hideFirstForm(),i.showConfirmation(),i.updateConfirmView(e.client_to_full_name,t.transfer_to.toUpperCase(),t.amount,t.currency),void g(t)):void(1===e.paymentagent_transfer&&(i.hideFirstForm(),i.showDone(),i.updateDoneView(a.get("loginid"),t.transfer_to.toUpperCase(),t.amount,t.currency)))},g=function(e){var t="#frm_confirm_transfer";c.init(t,[{request_field:"transfer_to",value:e.transfer_to},{request_field:"amount",value:e.amount}].concat(n)),c.handleSubmit({form_selector:t,fnc_response_handler:m}),$("#back_transfer").off("click").click(function(){i.showForm(),i.showNotes(),i.hideConfirmation(),i.hideDone(),l.setVisibility(0)})};return{onLoad:d}}();e.exports=l},function(e,t,n){"use strict";var i=n(319).localize,r=function(){var e=void 0,t=void 0,n=void 0,r=void 0,a=function(){e=$("#frm_paymentagent_transfer"),t=$("#frm_confirm_transfer"),n=$("#pa_transfer_done"),r=$("#paymentagent_transfer_notes")},o=function(){e.setVisibility(0)},s=function(){e.setVisibility(1)},c=function(){t.setVisibility(0)},l=function(){t.find(".errorfield").setVisibility(0).end().setVisibility(1)},d=function(){n.setVisibility(0)},u=function(){n.setVisibility(1)},p=function(){r.setVisibility(0)},f=function(){r.setVisibility(1)},h=function(e){t.find(".errorfield").text(i(e)).setVisibility(1)},m=function(t){e.find('label[for="amount"]').text(i("Amount")+" "+t)},g=function(e,n,i,r){t.find("#user_name").empty().text(e).end().find("#loginid").empty().text(n).end().find("#confirm_amount").empty().text(r+" "+i)},_=function(e,t,r,a){var o="Your request to transfer [_1] [_2] from [_3] to [_4] has been successfully processed.",s=i(o,[r,a,e,t]);n.find(" > #confirm_msg").text(s).setVisibility(1)},v=function(){o(),c(),p()};return{initValues:a,hideForm:o,showForm:s,hideConfirmation:c,showConfirmation:l,hideDone:d,showDone:u,hideNotes:p,showNotes:f,showTransferError:h,updateFormView:m,updateConfirmView:g,updateDoneView:_,hideFirstForm:v}}();e.exports=r},function(e,t,n){"use strict";var i=n(448),r=n(364),a=n(318),o=n(319).localize,s=n(363).showLocalTimeOnHover,c=n(367).addTooltip,l=n(367).buildOauthApps,d=function(){var e=void 0,t=void 0,n=void 0,d=void 0,u=void 0,p=void 0,f=void 0,h=function(){return document.getElementById("profit-table")},m=function(){return d===n},g=function(){f=[],d=0,n=0,p=!1,i.errorMessage(null),h()&&i.cleanTableContent()},_=function(){w({offset:n,limit:e}),p=!0},v=function(){var e=f.splice(0,t);return d+=e.length,e},y=function(t){if(t.error)return void i.errorMessage(t.error.message);p=!1;var r=t.profit_table;f=r.transactions,n+=f.length,f.length<e&&(u=!0),h()||(i.createEmptyTable().appendTo("#profit-table-container"),i.updateProfitTable(v()),0===n&&0===f.length&&$("#profit-table").find("tbody").append($("<tr/>",{class:"flex-tr"}).append($("<td/>",{colspan:8}).append($("<p/>",{class:"notice-msg center-text",text:o("Your account has no trading activity.")})))))},b=function(){$(document).scroll(function(){var e=function(e){var t=$(document).height()-$(window).height();return Math.floor(t*e/100)},t=$(document).scrollTop();if(h()&&!(t<e(50)))return!m()||u||p?void(m()||i.updateProfitTable(v())):void _()})},w=function(e){var t={profit_table:1,description:1};e&&$.extend(!0,t,e),a.send(t).then(function(e){y(e),s("td.buy-date,td.sell-date"),$(".barspinner").setVisibility(0)})},x=function(){e=100,t=e/2,n=0,d=0,u=!1,p=!1,f=[],a.send({oauth_apps:1}).then(function(e){c(i.setOauthApps(l(e)))}),_(),b(),r.viewButtonOnClick("#profit-table-container")};return{profitTableHandler:y,onLoad:x,onUnload:g}}();e.exports=d},function(e,t,n){"use strict";var i=n(449),r=n(310),a=n(319).localize,o=n(363).toJapanTimeIfNeeded,s=n(315).jpClient,c=n(325).formatMoney,l=n(367).showTooltip,d=n(417),u=function(){var e={},t=void 0,n=0,u="profit-table",p=["buy-date","ref","payout","contract","buy-price","sell-date","sell-price","pl","details"],f=function(){var e=[a("Date"),a("Ref."),a("Potential Payout"),a("Contract"),a("Purchase Price"),a("Sale Date"),a("Sale Price"),a("Profit/Loss"),a("Details")],n=s();t=r.get("currency"),e[7]+=n?"":t?" ("+t+")":"";var i=[a("Total Profit/Loss"),"","","","","","","",""],o=[],c={cols:p,id:u},l=d.createFlexTable(o,c,e,i);return l.children("table").children("tfoot").children("tr").attr("id","pl-day-total"),l},h=function(e){n+=e.reduce(function(e,t){var n=Number(parseFloat(t.buy_price)),i=Number(parseFloat(t.sell_price)),r=i-n;return e+r},0);var i=s(),r=n>=0?"profit":"loss";$("#pl-day-total").find(" > .pl").text(c(t,Number(n),!i)).removeClass("profit loss").addClass(r)},m=function(t){var n=i.getProfitTabletData(t),r=Number(t.sell_price-t.buy_price)>=0?"profit":"loss",c=s(),u=[c?o(t.purchase_time):n.buyDate,"<span "+l(n.app_id,e[n.app_id])+">"+n.ref+"</span>",/binaryico/i.test(n.shortcode)?"-":n.payout,"",n.buyPrice,c?o(t.sell_time):n.sellDate,n.sellPrice,n.pl,""],f=d.createFlexTableRow(u,p,"data");if(f.children(".pl").addClass(r),f.children(".contract").html(n.desc+"<br>"),f.children(".buy-date, .sell-date").each(function(){$(this).wrapInner('<div class="new-width"></div>')}),!/binaryico/i.test(n.shortcode)){var h=$("<button/>",{class:"button open_contract_details",text:a("View"),contract_id:n.id});f.children(".contract,.details").append(h)}return f[0]},g=function(e){d.appendTableBody(u,e,m),h(e)},_=function(){d.clearTableBody(u),$("#"+u).find("> tfoot").hide(),n=0},v=function(e){var t=$("#profit-table-container").find("#error-msg");e?t.setVisibility(1).text(e):t.setVisibility(0).text("")};return{createEmptyTable:f,updateProfitTable:g,cleanTableContent:_,errorMessage:v,setOauthApps:function(t){return e=t}}}();e.exports=u},function(e,t,n){"use strict";var i=n(305),r=n(310),a=n(315).jpClient,o=n(325).formatMoney,s=function(){var e=function(e){var t=r.get("currency"),n=a(),s=i.utc(1e3*e.purchase_time),c=i.utc(1e3*e.sell_time),l=parseFloat(e.buy_price),d=parseFloat(e.sell_price);return{buyDate:s.format("YYYY-MM-DD")+"\n"+s.format("HH:mm:ss")+" GMT",ref:e.transaction_id,payout:o(t,parseFloat(e.payout),!n),buyPrice:o(t,l,!n),sellDate:c.format("YYYY-MM-DD")+"\n"+c.format("HH:mm:ss")+" GMT",sellPrice:o(t,d,!n),pl:o(t,Number(d-l),!n),desc:e.longcode,id:e.contract_id,app_id:e.app_id,shortcode:e.shortcode}};return{getProfitTabletData:e}}();e.exports=s},function(e,t,n){"use strict";var i=n(318),r=n(371),a=n(363).showLocalTimeOnHover,o=n(319).localize,s=n(451),c=n(315).jpClient,l=n(389),d=n(326).toTitleCase,u=function(){var e="errorfield",t="#token_form",n=30,u=void 0,p=void 0,f=function(){if(c())return void r.load("user/settingsws");u=$("#tokens_list"),p=$(t),i.send({api_token:1}).then(g);var e=o("Only [_1] are allowed.",[["letters","numbers","space","_"].join(", ")]);l.init(t,[{selector:"#txt_name",request_field:"new_token",validations:["req",["regular",{regex:/^[\w\s]+$/,message:e}],["length",{min:2,max:32}]]},{selector:'[id*="chk_scopes_"]',request_field:"new_token_scopes",validations:[["req",{message:o("Please select at least one scope")}]],value:m},{request_field:"api_token",value:1}]),l.handleSubmit({form_selector:t,fnc_response_handler:h,enable_button:!0})},h=function(e){return e.error?void w(e.error.message,!1):(w("New token created.",!0),
$("#txt_name").val(""),void g(e))},m=function(){return p.find('[id*="chk_scopes_"]:checked').map(function(){return $(this).val()}).get()},g=function(e){if("error"in e)return void b(e.error.message);x();var t=e.api_token.tokens;if(0===t.length)return void u.setVisibility(0);t.length>=n?(p.setVisibility(0),b(o("The maximum number of tokens ([_1]) has been reached.",[n]))):p.setVisibility(1),u.setVisibility(1).empty();var i=["Name","Token","Scopes","Last Used","Action"];s.init({id:"tokens_table",container:u,header:i.map(o),cols:i.map(function(e){return e.toLowerCase().replace(/\s/g,"-")}),data:t,formatter:v,style:function(t,n){n.display_name===e.echo_req.new_token&&t.addClass("new"),t.attr("id",n.token),_(t,n)}}),a("td.last-used")},_=function(e,t){var n=o("Are you sure that you want to permanently delete token"),i=$("<button/>",{class:"button btn_delete",text:o("Delete")});i.click(function(e){e.preventDefault(),e.stopPropagation(),window.confirm(n+': "'+t.display_name+'"?')&&y(t.token)}),e.children(".action").html(i)},v=function(e){var t=e.last_used?e.last_used+" GMT":o("Never Used"),n=e.scopes.map(function(e){return o(d(e))}).join(", ");return[e.display_name,e.token,n,t,""]},y=function(e){i.send({api_token:1,delete_token:e}).then(function(e){$("#"+e.echo_req.delete_token).removeClass("new").addClass("deleting").fadeOut(700,function(){$(this).remove(),g(e)})})},b=function(t){$("#token_message").setVisibility(1).find("p").attr("class",e).html(o(t))},w=function(t,n){$("#msg_form").attr("class",n?"success-msg":e).html(n?'<ul class="checked"><li>'+o(t)+"</li></ul>":o(t)).css("display","block").delay(3e3).fadeOut(1e3)},x=function(){$("#token_message").setVisibility(0)};return{onLoad:f}}();e.exports=u},function(e,t,n){"use strict";var i=n(417),r=function(){var e=void 0,t=function(t){e=t;var a=i.createFlexTable([],n(),e.header,e.footer);a.appendTo(e.container),r(e.data)},n=function(){return{id:e.id,tableClass:e.class,cols:e.cols}},r=function(t){var n=e.cols,r=e.formatter,a=e.style;i.appendTableBody(e.id,t,function(e){var t=i.createFlexTableRow(r(e),n,"data");return a&&a(t,e),t[0]})},a=function(t,n){var i=$("<tr/>",{class:"flex-tr"}),r=$("<td/>",{colspan:n}),a=$("<p/>",{class:"notice-msg center-text",text:t});return $("#"+e.id+" tbody").append(i.append(r.append(a)))},o=function(t){e&&(i.clearTableBody(e.id),r(t))},s=function(){e&&(o([]),$("#"+e.id+" > tfoot").hide())};return{init:t,displayError:a,replace:o,clear:s}}();e.exports=r},function(e,t,n){"use strict";var i=n(453),r=n(371),a=n(315).jpClient,o=function(){var e=function(){a()&&r.load("user/settingsws"),i.init()},t=function(){i.clean()};return{onLoad:e,onUnload:t}}();e.exports=o},function(e,t,n){"use strict";var i=n(454),r=n(455),a=n(318),o=function(){var e=function(){r.init(),a.send({oauth_apps:1}).then(function(e){e.error?r.displayError(e.error.message):r.update(e.oauth_apps.map(i.parse))})},t=function(){r.clean()};return{init:e,clean:t}}();e.exports=o},function(e,t,n){"use strict";var i=n(305),r=function(){var e=function(e){var t=e.last_used?i.utc(e.last_used):null;return{name:e.name,scopes:e.scopes,last_used:t,id:e.app_id}};return{parse:e}}();e.exports=r},function(e,t,n){"use strict";var i=n(454),r=n(318),a=n(363).showLocalTimeOnHover,o=n(319).localize,s=n(309).showLoadingImage,c=n(312).State,l=n(451),d=n(326).toTitleCase,u=function(){var e=!1,t="#applications-container",n={no_apps:"You have not granted access to any applications.",revoke_confirm:"Are you sure that you want to permanently revoke access to application",revoke_access:"Revoke access"},u=function(t){var n=t.last_used?t.last_used.format("YYYY-MM-DD HH:mm:ss"):o("Never"),i=t.scopes.map(function(e){return o(d(e))}).join(", "),r=[t.name,i,n];return e&&r.push(""),r},p=function(e,t){var a=$("<button/>",{class:"button",text:o(n.revoke_access)});return a.on("click",function(){window.confirm(o(n.revoke_confirm)+": '"+t.name+"'?")&&(r.send({revoke_oauth_app:t.id}).then(function(e){e.error?m(e.error.message):r.send({oauth_apps:1}).then(function(e){h(e.oauth_apps.map(i.parse))})}),e.css({opacity:.5}))}),a},f=function(n){if($("#applications-table").length)return l.replace(n);var i=["Name","Permissions","Last Used"];return e=/admin/.test((c.get(["response","authorize","authorize"])||{}).scopes),e&&i.push("Action"),l.init({container:t,header:i.map(o),id:"applications-table",cols:i.map(function(e){return e.toLowerCase().replace(/\s/g,"-")}),data:n,style:function(t,n){e&&t.children(".action").first().append(p(t,n))},formatter:u}),a("td.last_used")},h=function(e){$("#loading").remove(),f(e),e.length||l.displayError(o(n.no_apps),7)},m=function(e){$(t).find(".error-msg").text(e)},g=function(){s($("<div/>",{id:"loading"}).insertAfter("#applications-title"))},_=function(){$(t).find(".error-msg").text(""),l.clear()};return{init:g,clean:_,update:h,displayError:m}}();e.exports=u},function(e,t,n){"use strict";var i=n(318),r=n(371),a=n(319).localize,o=n(389),s=function(){var e=void 0,t=void 0,n="#frm_cashier_password",s=function(){e=$(n),i.wait("authorize").then(function(){i.send({cashier_password:1}).then(function(e){return l(e)})})},c=function(t){$("legend").text(a(t.legend)),$("#lockInfo").text(a(t.info)),e.find("button").html(a(t.button))},l=function(t){var i=t.cashier_password;i?(c({legend:"Unlock Cashier",info:"Your cashier is locked as per your request - to unlock it, please enter the password.",button:"Unlock Cashier"}),$("#repeat_password_row").setVisibility(0)):(c({legend:"Lock Cashier",info:"An additional password can be used to restrict access to the cashier.",button:"Update"}),$("#repeat_password_row").setVisibility(1)),e.setVisibility(1),o.init(n,[{selector:"#cashier_password",validations:["req",i?["length",{min:6,max:25}]:"password"],request_field:i?"unlock_password":"lock_password",re_check_field:i?null:"#repeat_cashier_password"},{selector:"#repeat_cashier_password",validations:["req",["compare",{to:"#cashier_password"}]],exclude_request:1},{request_field:"cashier_password",value:1}]),o.handleSubmit({form_selector:n,fnc_response_handler:d})},d=function(n){var i=$("#form_error"),r=$("#form_message");if(r.text(""),i.setVisibility(0),n.error){var o=n.error.message;return"InputValidationFailed"===n.error.code&&(o="Sorry, you have entered an incorrect cashier password"),void i.text(a(o)).setVisibility(1)}t=sessionStorage.getItem("cashier_lock_redirect")||"",e.setVisibility(0),r.text(a("Your settings have been updated successfully.")),setTimeout(u,2e3)},u=function(){t&&(sessionStorage.removeItem("cashier_lock_redirect"),r.load(t))};return{onLoad:s}}();e.exports=s},function(e,t,n){"use strict";var i=n(318),r=n(371),a=n(399),o=n(319).localize,s=n(312).State,c=n(309).isEmptyObject,l=n(309).showLoadingImage,d=n(315).jpClient,u=n(390),p=function(){var e={},t=[],n="#frm_assessment",p=function(){d()&&r.load("user/settingsws"),$(n).on("submit",function(e){e.preventDefault(),h()}),i.send({get_financial_assessment:1}).then(function(e){f(e)})},f=function(r){r||(r=s.get(["response","get_financial_assessment"])),m(!0),e=$.extend({},r.get_financial_assessment),c(e)&&i.wait("get_account_status").then(function(e){"high"===e.get_account_status.risk_classification&&$("#high_risk_classification").setVisibility(1)}),Object.keys(e).forEach(function(t){var n=e[t];$("#"+t).val(n)}),t=[],$(n).find("select").map(function(){var n=$(this).attr("id");t.push({selector:"#"+n,validations:["req"]}),void 0===e[n]&&(e[n]="")}),u.init(n,t)},h=function(){var t=$(n+" #btn_submit");if(t.attr("disabled","disabled"),u.validate(n)){var r=!1;if(Object.keys(e).forEach(function(t){var n=$("#"+t);n.length&&n.val()!==e[t]&&(r=!0)}),0===Object.keys(e).length&&(r=!0),!r)return g("You did not change anything.",!1),void setTimeout(function(){t.removeAttr("disabled")},1e3);var o={set_financial_assessment:1};l($("#msg_form")),$(n).find("select").each(function(){e[$(this).attr("id")]=o[$(this).attr("id")]=$(this).val()}),i.send(o).then(function(e){t.removeAttr("disabled"),e.error?g("Sorry, an error occurred while processing your request.",!1):(g("Your changes have been updated successfully.",!0),i.send({get_account_status:1}).then(function(){a.displayAccountStatus()}))})}else setTimeout(function(){t.removeAttr("disabled")},1e3)},m=function(e){$("#assessment_loading").remove(),e&&$(n).setVisibility(1)},g=function(e,t){var r=localStorage.getItem("financial_assessment_redirect");t&&/metatrader/i.test(r)?(localStorage.removeItem("financial_assessment_redirect"),$.scrollTo($("h1#heading"),500,{offset:-10}),$(n).setVisibility(0),$("#msg_main").setVisibility(1),i.send({get_account_status:1}).then(function(e){$.inArray("authenticated",e.get_account_status.status)===-1&&$("#msg_authenticate").setVisibility(1)})):$("#msg_form").attr("class",t?"success-msg":"errorfield").html(t?$("<ul/>",{class:"checked",style:"display: inline-block;"}).append($("<li/>",{text:o(e)})):o(e)).css("display","block").delay(5e3).fadeOut(1e3)};return{onLoad:p,handleForm:f,submitForm:h}}();e.exports=p},function(e,t,n){"use strict";var i=n(459),r=n(371),a=n(315).jpClient,o=function(){var e=function(){a()&&r.load("user/settingsws"),i.init()},t=function(){i.clean()};return{onLoad:e,onUnload:t}}();e.exports=o},function(e,t,n){"use strict";var i=n(460),r=n(461),a=n(318),o=function(){var e=function(e){if(e.error&&e.error.message)return r.displayError(e.error.message);var t=e.login_history.map(i.parse);return r.update(t)},t=function(){r.init();var t={login_history:"1",limit:50};a.send(t).then(function(t){e(t)})},n=function(){r.clean()};return{init:t,clean:n}}();e.exports=o},function(e,t){"use strict";var n=function(){var e=function(e){for(var t=[{name:"Edge",regex:/Edge\/([\d\w\.\-]+)/i},{name:"SeaMonkey",regex:/seamonkey\/([\d\w\.\-]+)/i},{name:"Opera",regex:/(?:opera|opr)\/([\d\w\.\-]+)/i},{name:"Chromium",regex:/(?:chromium|crios)\/([\d\w\.\-]+)/i},{name:"Chrome",regex:/chrome\/([\d\w\.\-]+)/i},{name:"Safari",regex:/version\/([\d\w\.\-]+)/i},{name:"IE",regex:/msie\s([\d\.]+[\d])/i},{name:"IE",regex:/trident\/\d+\.\d+;.*[rv:]+(\d+\.\d)/i},{name:"Firefox",regex:/firefox\/([\d\w\.\-]+)/i}],n=0;n<t.length;n++){var i=t[n],r=e.match(i.regex);if(null!==r)return{name:i.name,version:r[1]}}return null},t=function(t){var n=t.environment,i=n.split(" ")[2].split("=")[1],r=n.match("User_AGENT=(.+) LANG")[1];return{time:t.time,action:t.action,success:1===t.status,browser:e(r),ip_addr:i}};return{parse:t,parseUserAgent:e}}();e.exports=n},function(e,t,n){"use strict";var i=n(305),r=n(363).showLocalTimeOnHover,a=n(319).localize,o=n(451),s=function(){var e="#login-history-container",t="Your account has no Login/Logout activity.",n=function(){var e=$("#login_history-title").children().first();e.text(a(e.text()))},s=function(e){var t=i.unix(e.time).utc().format("YYYY-MM-DD HH:mm:ss").replace(" ","\n")+" GMT",n=a(e.success?"Successful":"Failed"),r=a(e.action),o=e.browser,s=o?o.name+" v"+o.version:"Unknown",c=/^(opera|chrome|safari|firefox|IE|Edge|SeaMonkey|Chromium) v[0-9.]+$/i;return c.test(s)||"Unknown"===s||(s="Error"),[t,r,s,e.ip_addr,n]},c=function(n){var i=["Date and Time","Action","Browser","IP Address","Status"],c=["timestamp","action","browser","ip","status"];return o.init({id:"login-history-table",container:e,header:i.map(function(e){return a(e)}),cols:c,data:n,formatter:s,style:function(e){e.children(".timestamp").addClass("pre")}}),n.length?r("td.timestamp"):o.displayError(a(t),6)},l=function(){$(e).find(".error-msg").text(""),o.clear()},d=function(e){$("#err").text(e)};return{init:n,clean:l,update:c,displayError:d}}();e.exports=s},function(e,t,n){"use strict";var i=n(318),r=n(463),a=function(){var e=function(){i.send({get_limits:1}).then(function(e){e.error?r.limitsError(e.error):r.limitsHandler(e)})},t=function(){r.clean()};return{onLoad:e,onUnload:t}}();e.exports=a},function(e,t,n){"use strict";var i=n(464),r=n(310),a=n(319).localize,o=n(320).elementTextContent,s=n(325).formatMoney,c=function(){var e=function(e){var t=e.get_limits;i.fillLimitsTable(t);var n=document.getElementById("withdrawal-limit"),c=document.getElementById("already-withdraw"),l=document.getElementById("withdrawal-limit-aggregate");if(99999999===t.lifetime_limit&&99999999===t.num_of_days_limit)o(n,a("Your account is fully authenticated and your withdrawal limits have been lifted."));else{var d="Your withdrawal limit is [_1] [_2] (or equivalent in other currency).",u="You have already withdrawn the equivalent of [_1] [_2].",p="Therefore your current immediate maximum withdrawal (subject to your account having sufficient funds) is [_1] [_2] (or equivalent in other currency).",f="EUR",h=s(f,t.num_of_days_limit,1),m=t.withdrawal_since_inception_monetary,g=s(f,t.remainder,1);/^(iom)$/i.test(r.get("landing_company_name"))?(d="Your [_1] day withdrawal limit is currently [_2] [_3] (or equivalent in other currency).",u="You have already withdrawn the equivalent of [_1] [_2] in aggregate over the last [_3] days.",o(n,a(d,[t.num_of_days,f,h])),o(c,a(u,[f,m,t.num_of_days]))):(/^(costarica|japan)$/i.test(r.get("landing_company_name"))&&(d="Your withdrawal limit is [_1] [_2].",u="You have already withdrawn [_1] [_2].",p="Therefore your current immediate maximum withdrawal (subject to your account having sufficient funds) is [_1] [_2].",f=r.get("currency")||r.get("default_currency")),o(n,a(d,[f,h])),o(c,a(u,[f,m]))),o(l,a(p,[f,g]))}},t=function(e){document.getElementById("withdrawal-title").setAttribute("style","display:none"),document.getElementById("limits-title").setAttribute("style","display:none"),$("#limits_error").append($("<p/>",{class:"center-text notice-msg",text:e&&e.message?e.message:a("Sorry, an error occurred while processing your request.")}))},n=function(){i.clearTableContent()};return{limitsHandler:e,limitsError:t,clean:n}}();e.exports=c},function(e,t,n){"use strict";var i=n(417),r=n(319).localize,a=n(310),o=n(320).elementTextContent,s=n(325).formatMoney,c=function(){var e="",t=function(t,n,i,a){e.append($("<tr/>",{class:"flex-tr"}).append($("<td/>",{class:"flex-tr-child",style:"padding-left: "+i+"; font-weight: "+a+";",text:r(t)})).append($("<td/>",{text:n})))},n=function(n){var i=a.get("currency");i&&$(".limit").append(" ("+i+")");var c=document.getElementById("open-positions"),l=document.getElementById("account-balance"),d=document.getElementById("payout"),u=document.getElementById("payout-per-symbol-and-contract-type");o(c,s(i,n.open_positions,1)),o(l,s(i,n.account_balance,1)),o(d,s(i,n.payout,1)),o(u,s(i,n.payout_per_symbol_and_contract_type,1));var p=n.market_specific;e=$("#client-limits"),Object.keys(p).forEach(function(e){var n=p[e];n.length&&n.length>0?(t(r(e.charAt(0).toUpperCase()+e.slice(1)),"","auto","bold"),Object.keys(n).forEach(function(e){("jp"!==a.get("residence")||/Major Pairs/.test(n[e].name))&&t(n[e].name,"null"!==n[e].turnover_limit?s(i,n[e].turnover_limit,1):0,"25px","normal")})):t(n.name,"null"!==n.turnover_limit?s(i,n.turnover_limit,1):0,"auto","bold")});var f=a.get("loginid");f&&($("#trading-limits").prepend(f+" - "),$("#withdrawal-title").prepend(f+" - ")),$("#withdrawal-limits, #limits-title").setVisibility(1)},c=function(){i.clearTableBody("client-limits")};return{clearTableContent:c,fillLimitsTable:n}}();e.exports=c},function(e,t,n){"use strict";var i=n(318),r=n(310),a=n(315).jpClient,o=function(){var e=function(){i.wait("get_account_status").then(function(e){var t="invisible",n=".real";r.get("is_virtual")?$(n).addClass(t):$(n).not(a()?".ja-hide":"").removeClass(t),/has_password/.test(e.get_account_status.status)&&$("#change_password").removeClass(t),$("#settings_container").removeClass(t)})};return{onLoad:e}}();e.exports=o},function(e,t,n){"use strict";var i=n(305),r=n(318),a=n(371),o=n(310),s=n(399),c=n(319).localize,l=n(313).defaultRedirectUrl,d=n(320).dateValueChanged,u=n(389),p=n(396).scrollToHashSection,f=n(420),h=n(429),m=function(){var e=void 0,t=void 0,n=void 0,m=void 0,g="#frm_self_exclusion",_="#timeout_until_date",v="#timeout_until_time",y="#exclude_until",b="errorfield",w=function(){e=$(g),t={},e.find("input").each(function(){t[this.name]=""}),B(),x(!0)},x=function(i){r.send({get_self_exclusion:1}).then(function(a){return a.error?("ClientSelfExclusion"===a.error.code&&o.sendLogoutRequest(),void(a.error.message&&($("#msg_error").html(a.error.message).setVisibility(1),e.setVisibility(0)))):void r.send({get_account_status:1}).then(function(r){var o=/ukrts_max_turnover_limit_not_set/.test(r.get_account_status.status);"undefined"==typeof m&&(m=o),$("#frm_self_exclusion").find("fieldset > div.form-row:not(.max_30day_turnover)").setVisibility(!o),$("#description_max_30day_turnover").setVisibility(o),$("#description").setVisibility(!o),$("#loading").setVisibility(0),e.setVisibility(1),n=a.get_self_exclusion,$.each(n,function(n,i){t[n]=i.toString(),e.find("#"+n).val(i)}),k(),i&&p()})})},k=function(){var t=[{request_field:"set_self_exclusion",value:1}];e.find('input[type="text"]').each(function(){var e=$(this).attr("id");if(!/(timeout_until|exclude_until)/.test(e)){var i=[],r={min:0};e in n?(i.push("req"),r.max=n[e]):r.allow_empty=!0,i.push(["number",r]),"session_duration_limit"===e&&i.push(["custom",{func:C,message:"Session duration limit cannot be more than 6 weeks."}]),t.push({selector:"#"+e,validations:i,exclude_if_empty:1})}}),t.push({selector:_,request_field:"timeout_until",re_check_field:v,exclude_if_empty:1,value:T,validations:[["custom",{func:function(){return!$(v).val()||$(_).val().length},message:"This field is required."}],["custom",{func:function(e){return!e.length||E(_).isAfter(i().subtract(1,"days"),"day")},message:"Time out must be after today."}],["custom",{func:function(e){return!e.length||E(_).isBefore(i().add(6,"weeks"))},message:"Time out cannot be more than 6 weeks."}]]},{selector:v,exclude_request:1,re_check_field:_,validations:[["custom",{func:function(){return!$(_).val()||!E(_).isSame(i(),"day")||$(v).val().length},message:"This field is required."}],["custom",{func:function(e){return!e.length||!$(_).attr("data-value")||T()>i().valueOf()/1e3},message:"Time out cannot be in the past."}],["custom",{func:I,message:"Please select a valid time."}]]},{selector:y,exclude_if_empty:1,value:function(){return S(y)},validations:[["custom",{func:function(e){return!e.length||E(y).isAfter(i().add(6,"months"))},message:"Exclude time cannot be less than 6 months."}],["custom",{func:function(e){return!e.length||E(y).isBefore(i().add(5,"years"))},message:"Exclude time cannot be for more than 5 years."}]]}),u.init(g,t),u.handleSubmit({form_selector:g,fnc_response_handler:O,fnc_additional_check:A,enable_button:!0})},C=function(e){return+e<=i.duration(6,"weeks").as("minutes")},I=function(e){return!e.length||i(e,"HH:mm",!0).isValid()},S=function(e){var t=$(e);return t.attr("data-value")?t.attr("data-value"):isNaN(new Date(t.val()).getTime())?"":t.val()},E=function(e){return i(new Date(S(e)))},T=function(){return S(_)?(i(new Date(S(_)+"T"+$(v).val())).valueOf()/1e3).toFixed(0):""},B=function(){h.init({selector:v}),f.init({selector:_,minDate:0,maxDate:42}),f.init({selector:y,minDate:i().add(6,"months").add(1,"day").toDate(),maxDate:1825}),$(_+", "+y).change(function(){d(this,"date")})},A=function(e){var t=Object.keys(e).some(function(t){return!("set_self_exclusion"===t||t in n&&n[t]==e[t])});t||P("You did not change anything.",!1);var i=!0;return("timeout_until"in e||"exclude_until"in e)&&(i=window.confirm(c('When you click "OK" you will be excluded from trading on the site until the selected date.'))),t&&i},O=function(e){if(e.error){var t=e.error.message,n=e.error.field;return void(n?(n=/^timeout_until$/.test(n)?"timeout_until_date":n,$("#"+n).siblings(".error-msg").setVisibility(1).html(t)):P(c(t),!1))}P("Your changes have been updated.",!0),o.set("session_start",i().unix()),r.send({get_account_status:1}).then(function(){s.displayAccountStatus(),m?a.load(l()):x()})},P=function(e,t){$("#msg_form").attr("class",t?"success-msg":b).html(t?$("<ul/>",{class:"checked"}).append($("<li/>",{text:c(e)})):c(e)).css("display","block").delay(5e3).fadeOut(1e3)};return{onLoad:w}}();e.exports=m},function(e,t,n){"use strict";var i=n(318),r=n(319).localize,a=n(310),o=n(399),s=n(312).State,c=n(320).detectHedging,l=n(320).makeOption,d=n(325).formatMoney,u=n(389),p=n(305);n(468);var f=function(){var e="#frmPersonalDetails",t=".RealAcc",n=void 0,f=void 0,h=void 0,m=void 0,g=void 0,_=void 0,v=function(){n={},g={},h=a.get("is_virtual"),m=a.get("residence"),f="jp"===m,f&&!h&&$("#fieldset_email_consent").setVisibility(1),y()},y=function(){a.shouldCompleteTax()?$("#tax_information_notice").setVisibility(1):$("#tax_information_notice").setVisibility(0)},b=function(n){var i=$.extend({},n);if(i.date_of_birth=i.date_of_birth?p.utc(new Date(1e3*i.date_of_birth)).format("YYYY-MM-DD"):"",i.name=f?i.last_name:(i.salutation||"")+" "+(i.first_name||"")+" "+(i.last_name||""),w(i),h)$(t).remove();else if(f){var a=i.jp_settings;switch(a.gender){case"f":a.gender=r("Female");break;case"m":a.gender=r("Male")}w(a),null!==a.hedge_asset&&null!==a.hedge_asset_amount&&$(".hedge").setVisibility(1),$(".JpAcc").setVisibility(1)}else $(t).setVisibility(1);$(e).setVisibility(1),u.handleSubmit({form_selector:e,obj_request:{set_settings:1},fnc_response_handler:I,fnc_additional_check:x,enable_button:!0})},w=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=void 0,a=void 0,o=void 0,s=void 0,c=void 0;Object.keys(e).forEach(function(l){i=$("#"+l),a=$("#lbl_"+l),s=i.length>0,c=a.length>0,i=s&&c?f?a:i:s?i:a,i.length>0&&(o=null===e[l]?"":i.hasClass("format_money")?d(_,e[l]):e[l],n[l]=o,t&&(i.is(":checkbox")?i.prop("checked",!!o):/(SELECT|INPUT)/.test(i.prop("nodeName"))?i.val(o.split(",")).trigger("change"):"country"!==l&&i.text(o?r(o):"-")))}),e.country&&($("#residence").replaceWith($("<label/>").append($("<strong/>",{id:"lbl_country"}))),$("#lbl_country").text(e.country),h&&$("#btn_update").setVisibility(0))},x=function(e){return!!(k(e)||e.jp_settings&&k(e.jp_settings))||(S("You did not change anything.",!1),!1)},k=function(e){var t=$.extend({},e);return Object.keys(t).some(function(e){return"set_settings"!==e&&"jp_settings"!==e&&n[e]!==t[e]})},C=function(t){var n=void 0;if(f)n=[{request_field:"address_line_1",value:t.address_line_1},{request_field:"address_line_2",value:t.address_line_2},{request_field:"address_city",value:t.address_city},{request_field:"address_state",value:t.address_state},{request_field:"address_postcode",value:t.address_postcode},{request_field:"phone",value:t.phone},{selector:"#email_consent"},{selector:"#hedge_asset_amount",validations:["req","number"],parent_node:"jp_settings"},{selector:"#hedge_asset",validations:["req"],parent_node:"jp_settings"}],$(e).find("select").each(function(){n.push({selector:"#"+$(this).attr("id"),validations:["req"],parent_node:"jp_settings"})});else if(h)n=[{selector:"#residence",validations:["req"]}];else{n=[{selector:"#address_line_1",validations:["req","address"]},{selector:"#address_line_2",validations:["address"]},{selector:"#address_city",validations:["req","letter_symbol"]},{selector:"#address_state",validations:"SELECT"===$("#address_state").prop("nodeName")?"":["letter_symbol"]},{selector:"#address_postcode",validations:["gb"===a.get("residence")?"req":"","postcode",["length",{min:0,max:20}]]},{selector:"#phone",validations:["req","phone",["length",{min:6,max:35}]]},{selector:"#place_of_birth",validations:a.isFinancial()?["req"]:""},{selector:"#tax_residence",validations:a.isFinancial()?["req"]:""}];var i={selector:"#tax_identification_number",validations:["postcode",["length",{min:0,max:20}]]};a.isFinancial()&&(i.validations[1][1].min=1,i.validations.unshift("req")),n.push(i)}return n},I=function(e){var t=1!==e.set_settings;t||(i.send({get_account_status:1},{forced:!0}).then(function(){y(),o.displayAccountStatus()}),i.send({get_settings:1},{forced:!0}).then(function(e){b(e.get_settings)})),S(t?"Sorry, an error occurred while processing your account.":"Your settings have been updated successfully.",!t)},S=function(e,t){$("#formMessage").attr("class",t?"success-msg":"errorfield").html(t?$("<ul/>",{class:"checked"}).append($("<li/>",{text:r(e)})):r(e)).css("display","block").delay(5e3).fadeOut(1e3)},E=function(e){var t=e.residence_list,n=$("#place_of_birth"),i=$("#tax_residence");if(t.length>0){var a=$("<div/>"),o=$("<div/>");if(t.forEach(function(e){a.append(l(e.text,e.value)),o.append(l(e.text,e.value,e.disabled))}),m){var s=g.tax_residence;n.html(a.html()),i.html(a.html()).promise().done(function(){setTimeout(function(){i.select2().val(s?s.split(","):"").trigger("change").setVisibility(1)},500)}),n.val(g.place_of_birth||m)}else{$("#lbl_country").parent().replaceWith($("<select/>",{id:"residence"}));var c=$("#residence");o.prepend($("<option/>",{text:r("Please select a value"),value:""})),c.html(o.html()),B()}}},T=function(e){var t=e.states_list;if(f){var n=(t.filter(function(e){return e.value===g.address_state})[0]||{}).text;$("#lbl_address_state").text(n||g.address_state)}else{var i="#address_state",a=$(i);a.empty(),t&&t.length>0?(a.append($("<option/>",{value:"",text:r("Please select")})),t.forEach(function(e){a.append($("<option/>",{value:e.value,text:e.text}))})):(a.replaceWith($("<input/>",{id:i.replace("#",""),name:"address_state",type:"text",maxlength:"35"})),a=$(i)),a.val(g.address_state)}B(),f&&!h&&c($("#trading_purpose"),$(".hedge"))},B=function(){u.init(e,C(g))},A=function(){_=a.get("currency"),i.wait("get_account_status","get_settings").then(function(){v(),g=s.get(["response","get_settings","get_settings"]),b(g),h&&m?$("#btn_update").setVisibility(0):($("#btn_update").setVisibility(1),f||i.send({residence_list:1}).then(function(e){return E(e)}),m&&i.send({states_list:m}).then(function(e){return T(e)}))})};return{onLoad:A}}();e.exports=f},,function(e,t,n){"use strict";var i=n(305),r=n(470),a=n(364),o=n(318),s=n(314).get,c=n(319).localize,l=n(363).showLocalTimeOnHover,d=n(367).addTooltip,u=n(367).buildOauthApps,p=n(320).dateValueChanged,f=n(315).jpClient,h=n(326).toISOFormat,m=n(420),g=function(){var e=void 0,t=void 0,n=void 0,g=void 0,_=void 0,v=void 0,y=void 0,b=function(){return document.getElementById("statement-table")},w=function(){return y===v},x=function(e){var t={statement:1,description:1};e&&$.extend(!0,t,e);var n=$("#jump-to").attr("data-value");n&&""!==n&&(t.date_to=i.utc(n).unix()+3600*(f()?15:24),t.date_from=0),o.send(t).then(function(e){I(e)})},k=function(){x({offset:v,limit:e}),g=!0},C=function(){var e=_.splice(0,t);return y+=e.length,$("#rows_count").text(y),e},I=function(t){if(t.error)return void r.errorMessage(t.error.message);g=!1;var i=t.statement;_=i.transactions,v+=_.length,_.length<e&&(n=!0),b()||(r.createEmptyStatementTable().appendTo("#statement-container"),$(".act, .credit").addClass("nowrap"),r.updateStatementTable(C()),0===v&&0===_.length?$("#statement-table").find("tbody").append($("<tr/>",{class:"flex-tr"}).append($("<td/>",{colspan:7}).append($("<p/>",{class:"notice-msg center-text",text:c("Your account has no trading activity.")})))):($("#util_row").setVisibility(1),"JA"===s()&&$("#download_csv").setVisibility(1).find("a").unbind("click").click(function(){r.exportCSV()}))),l("td.date")},S=function(){$(document).scroll(function(){var e=function(e){var t=$(document).height()-$(window).height();return Math.floor(t*e/100)},t=$(document).scrollTop();if(b()&&!(t<e(70)))return!w()||n||g?void(w()||r.updateStatementTable(C())):void k()})},E=function(){g=!1,n=!1,_=[],v=0,y=0,r.errorMessage(null),r.clearTableContent()},T=function(){e=200,t=e/2,n=!1,g=!1,_=[],v=0,y=0,o.send({oauth_apps:1}).then(function(e){d(r.setOauthApps(u(e))),$(".barspinner").setVisibility(0)}),k(),S()},B=function(){var e="#jump-to";$(e).attr("data-value",h(i())).change(function(){return!!p(this,"date")&&($(".table-container").remove(),r.clearTableContent(),T(),!0)}),m.init({selector:e,maxDate:0}),"native"!==$(e).attr("data-picker")&&$(e).val(c("Today"))},A=function(){T(),B(),a.viewButtonOnClick("#statement-container")};return{init:T,statementHandler:I,onLoad:A,onUnload:E}}();e.exports=g},function(e,t,n){"use strict";var i=n(471),r=n(310),a=n(309).downloadCSV,o=n(319).localize,s=n(363).toJapanTimeIfNeeded,c=n(315).jpClient,l=n(367).showTooltip,d=n(417),u=function(){var e=[],t={},n="statement-table",u=["date","ref","payout","act","desc","credit","bal","details"],p=function(){var e=[o("Date"),o("Ref."),o("Potential Payout"),o("Action"),o("Description"),o("Credit/Debit"),o("Balance"),o("Details")],t=c(),i=r.get("currency");e[6]+=t||!i?"":" ("+i+")";var a={id:n,cols:u},s=[];return d.createFlexTable(s,a,e)},f=function(){d.clearTableBody(n),e=[],$("#"+n+" > tfoot").hide()},h=function(n){var a=i.getStatementData(n,r.get("currency"),c());e.push($.extend({},a,{action:o(a.action),desc:o(a.desc)}));var s=parseFloat(n.amount)>=0?"profit":"loss",p=d.createFlexTableRow([a.date,"<span "+l(a.app_id,t[a.app_id])+">"+a.ref+"</span>",a.payout,o(a.action),"",a.amount,a.balance,""],u,"data");if(p.children(".credit").addClass(s),p.children(".date").addClass("pre"),p.children(".desc").html(o(a.desc)+"<br>"),"Sell"===a.action||"Buy"===a.action){var f=$("<button/>",{class:"button open_contract_details",text:o("View"),contract_id:a.id});p.children(".desc,.details").append(f)}return p[0]},m=function(e){d.appendTableBody(n,e,h)},g=function(e){var t=$("#statement-container").find("#error-msg");e?t.setVisibility(1).text(e):t.setVisibility(0).text("")},_=function(){a(i.generateCSV(e,c()),"Statement_"+r.get("loginid")+"_latest"+$("#rows_count").text()+"_"+s(window.time).replace(/\s/g,"_").replace(/:/g,"")+".csv")};return{clearTableContent:f,createEmptyStatementTable:p,updateStatementTable:m,errorMessage:g,exportCSV:_,setOauthApps:function(e){return t=e}}}();e.exports=u},function(e,t,n){"use strict";var i=n(305),r=n(310),a=n(319).localize,o=n(363).toJapanTimeIfNeeded,s=n(325).formatMoney,c=n(326).toTitleCase,l=function(){var e=function(e,t,n){var r=new Date(1e3*e.transaction_time),l=i.utc(r),d=l.format("YYYY-MM-DD"),u=l.format("HH:mm:ss")+" GMT",p=parseFloat(e.payout),f=parseFloat(e.amount),h=parseFloat(e.balance_after),m=/binaryico/i.test(e.shortcode);return{date:n?o(e.transaction_time):d+"\n"+u,ref:e.transaction_id,payout:isNaN(p)||m?"-":s(t,p,!n),action:m?a(/buy/i.test(e.action_type)?"Bid":"Closed Bid"):c(e.action_type),amount:isNaN(f)?"-":s(t,f,!n),balance:isNaN(h)?"-":s(t,h,!n),desc:e.longcode.replace(/\n/g,"<br />"),id:e.contract_id,app_id:e.app_id}},t=function(e,t){var n=["date","ref","payout","action","desc","amount","balance"],i=["Date","Reference ID","Potential Payout","Action","Description","Credit/Debit"].map(function(e){return a(e)}),o=r.get("currency");i.push(a("Balance")+(t||!o?"":" ("+o+")"));var s=",",c=[i.join(s)];return e&&e.length>0&&(c=c.concat(e.map(function(e){return n.map(function(t){return e[t]?e[t].replace(new RegExp(s,"g"),"").replace(new RegExp("\n|<br />","g")," "):""}).join(s)}))),c.join("\r\n")};return{getStatementData:e,generateCSV:t}}();e.exports=l},function(e,t,n){"use strict";var i=n(318),r=n(310),a=n(319).localize,o=function(){var e=void 0,t={error:"#viewError",success:"#viewSuccess"},n=function(){e=$("#topup_virtual .viewItem"),e.setVisibility(0),i.send({topup_virtual:"1"}).then(function(e){e.error?o(a(e.error.message),!1):o(a("[_1] [_2] has been credited to your Virtual money account [_3]",[e.topup_virtual.currency,e.topup_virtual.amount,r.get("loginid")]),!0),$(".barspinner").setVisibility(0)})},o=function(e,n){var i=n?t.success:t.error;s(i),$(i+" > p").html(e)},s=function(t){e.setVisibility(0),$(t).setVisibility(1)};return{onLoad:n}}();e.exports=o},function(e,t,n){"use strict";var i=n(474),r=n(318),a=n(371),o=n(310),s=n(319).localize,c=n(313).defaultRedirectUrl,l=n(315).jpClient,d=n(325).getDecimalPlaces,u=n(325).formatMoney,p=n(428),f=n(389),h=function(){var e="#frm_ico_bid",t=void 0,n=void 0,h=void 0,m=void 0,g=void 0,_=function(){return l()?void a.load(c()):void r.wait("website_status").then(function(t){"closed"===t.website_status.ico_status?($(e).replaceWith($("<p/>",{
class:"notice-msg center-text",text:s("The ICO auction is already closed.")})),i.onLoad(),$("#ico_subscribe").setVisibility(1)):v()})},v=function(){r.wait("balance").then(function(r){i.onLoad(),t=o.get("currency")||"",t?$(".currency").text(t):$(e).find(".topMenuBalance").text(u(t,0)),h=$("#duration"),m=$("#price"),g=$("#total"),y(),$("#ico_subscribe").setVisibility(1);var a=r.balance.balance;if(0===+a)$(e+" input").attr("disabled","disabled"),$(e).on("submit",function(e){e.preventDefault()}).find("button").addClass("inactive"),$("#topup_wrapper").setVisibility(1);else{var s=d(t);n=$("#form_error"),f.init(e,[{selector:"#duration",validations:["req",["number",{min:1,max:1e6}]],parent_node:"parameters"},{selector:"#price",validations:["req",["number",{type:"float",decimals:"1, "+s,min:Math.pow(10,-s).toFixed(s),max:999999999999999}]]},{request_field:"buy",value:1},{request_field:"amount",parent_node:"parameters",value:function(){return document.getElementById("price").value}},{request_field:"contract_type",parent_node:"parameters",value:"BINARYICO"},{request_field:"symbol",parent_node:"parameters",value:"BINARYICO"},{request_field:"basis",parent_node:"parameters",value:"stake"},{request_field:"currency",parent_node:"parameters",value:t},{request_field:"duration_unit",parent_node:"parameters",value:"c"}]),f.handleSubmit({form_selector:e,enable_button:1,fnc_response_handler:b}),$(e+" input").on("keypress",p).on("input change",y)}})},y=function(){var e=h.val(),n=m.val(),i=0;e&&n&&(i=+e*+n),g.text(u(t,i))},b=function(e){e.error?n.text(e.error.message).setVisibility(1):(n.setVisibility(0),$("#duration, #price").val(""),$.scrollTo($("#ico_bids"),500,{offset:-10}))},w=function(){i.onUnload()};return{onLoad:_,onUnload:w}}();e.exports=h},function(e,t,n){"use strict";var i=n(362).Portfolio,r=n(364),a=n(318),o=n(319).localize,s=n(309).showLoadingImage,c=n(325).formatMoney,l=function(){var e=void 0,t=void 0,n=void 0,l=function(){if(!t){e={};var i=$("#portfolio-loading");i.show(),s(i),n=!0,a.send({portfolio:1}).then(function(e){u(e)}),a.send({transaction:1,subscribe:1},{callback:p}),t=!0}},d=function(e,t){var n=e.longcode,i=t?"":"new",r=/unsuccessful/i.test(n)?"Refund Bid":/successful/i.test(n)?"Claim Tokens":/bid/i.test(n)?"Cancel Bid":"Ended",a=/(cancel|end)/i.test(r)?"button-secondary":"",s=/ successful/i.test(n)?"claim":"cancel",l=e.shortcode.split("_"),d=$("<div/>");d.append($("<tr/>",{class:"tr-first "+i+" "+e.contract_id,id:e.contract_id}).append($("<td/>",{class:"ref",text:e.transaction_id})).append($("<td/>",{class:"payout"}).append($("<strong/>",{text:l[2]}))).append($("<td/>",{class:"bid"}).append($("<strong/>",{text:c(e.currency,l[1])}))).append($("<td/>",{class:"purchase"}).append($("<strong/>",{text:c(e.currency,e.buy_price)}))).append($("<td/>",{class:"details",text:n})).append($("<td/>",{class:"button"}).append($("<button/>",{class:"button "+a+" nowrap",contract_id:e.contract_id,action:s,text:o(r)})))).append($("<tr/>",{class:"tr-desc "+i+" "+e.contract_id}).append($("<td/>",{colspan:"6",text:n}))),$("#portfolio-body").prepend(d.html())},u=function(t){if(t.hasOwnProperty("error"))return void h(t.error.message);var r=void 0;0!==t.portfolio.contracts.length&&($("#portfolio-no-contract").hide(),$.each(t.portfolio.contracts,function(t,a){e.hasOwnProperty(a.contract_id)||"BINARYICO"!==a.contract_type||(e[a.contract_id]={},e[a.contract_id].buy_price=a.buy_price,r=i.getPortfolioData(a),d(r,n),setTimeout(function(){$("tr."+a.contract_id).removeClass("new")},1e3))})),r?($('button[action="cancel"]').on("click",function(){a.send({sell:$(this).attr("contract_id"),price:0})}),$("#portfolio-table").setVisibility(1)):($("#portfolio-no-contract").show(),$("#portfolio-table").setVisibility(0)),$("#portfolio-loading").hide(),$("#portfolio-content").setVisibility(1),n=!1},p=function(e){e.hasOwnProperty("error")?h(e.error.message):"buy"===e.transaction.action?a.send({portfolio:1}).then(function(e){u(e)}):"sell"===e.transaction.action&&f(e.transaction.contract_id)},f=function(t){delete e[t],$("tr."+t).removeClass("new").css("opacity","0.5").fadeOut(1e3,function(){$(this).remove(),0===$("#portfolio-body").find("tr").length&&($("#portfolio-table").setVisibility(0),$("#cost-of-open-positions, #value-of-open-positions").text(""),$("#portfolio-no-contract").show())})},h=function(e){var t=$("#portfolio").find("#error-msg");e?t.setVisibility(1).text(e):t.setVisibility(0).text("")},m=function(){l(),r.viewButtonOnClick("#portfolio-table")},g=function(){a.send({forget_all:"transaction"}),$("#portfolio-body").empty(),$("#portfolio-content").setVisibility(0),t=!1};return{updatePortfolio:u,transactionResponseHandler:p,onLoad:m,onUnload:g}}();e.exports=l},function(e,t,n){"use strict";var i=n(371),r=n(319).localize,a=n(389),o=function(){var e=function(e){e.verify_email?i.load("user/reset_passwordws"):e.error&&$("#form_error").setVisibility(1).text(r(e.error.message))},t=function(){var t="#frm_lost_password";a.init(t,[{selector:"#email",validations:["req","email"],request_field:"verify_email"},{request_field:"type",value:"reset_password"}]),a.handleSubmit({form_selector:t,fnc_response_handler:e})};return{onLoad:t}}();e.exports=o},function(e,t,n){"use strict";var i=n(305),r=n(318),a=n(371),o=n(310),s=n(312).State,c=n(313).defaultRedirectUrl,l=n(309).isEmptyObject,d=n(477),u=n(389),p=n(326).toISOFormat,f=function(){var e="#financial-form",t=function(){return s.set("is_financial_opening",1),o.get("has_financial")||!o.get("residence")?void a.load("trading"):(o.get("has_gaming")&&$(".security").hide(),r.wait("landing_company").then(function(e){var t=e.landing_company;o.get("is_virtual")?o.canUpgradeVirtualToJapan(t)?a.load("new_account/japanws"):o.canUpgradeVirtualToFinancial(t)||a.load("new_account/realws"):o.canUpgradeGamingToFinancial(t)||a.load(c())}),void(d.redirectAccount()||(d.populateForm(e,n),r.send({get_financial_assessment:1}).then(function(e){if(!l(e.get_financial_assessment)){var t=Object.keys(e.get_financial_assessment);t.forEach(function(t){var n=e.get_financial_assessment[t];$("#"+t).val(n)})}}),r.wait("get_settings").then(function(e){var t=e.get_settings,n=void 0,r=void 0;Object.keys(t).forEach(function(e){if(n=$("#"+e),r=t[e],"date_of_birth"===e){var a=i.utc(1e3*r);r=a.format("DD MMM, YYYY"),n.attr("data-value",p(a)),$(".input-disabled").attr("disabled","disabled")}r&&n.val(r)})}),u.handleSubmit({form_selector:e,obj_request:{new_account_maltainvest:1,accept_risk:0},fnc_response_handler:f}))))},n=function(){return d.commonValidations().concat(d.selectCheckboxValidation(e),[{selector:"#tax_identification_number",validations:["req","postcode",["length",{min:1,max:20}]]}])},f=function e(t){if("error"in t&&"show risk disclaimer"===t.error.code){$("#financial-form").setVisibility(0);var n=$("#financial-risk");n.setVisibility(1),$.scrollTo(n,500,{offset:-10});var i="#financial-risk";u.init(i,[]);var r=$.extend({},t.echo_req);r.accept_risk=1,u.handleSubmit({form_selector:i,obj_request:r,fnc_response_handler:e})}else d.handleNewAccount(t,t.msg_type)},h=function(){s.set("is_financial_opening",0)};return{onLoad:t,onUnload:h}}();e.exports=f},function(e,t,n){"use strict";var i=n(311),r=n(478),a=n(371),o=n(310),s=n(319).localize,c=n(312).State,l=n(320).makeOption,d=n(389),u=n(318);n(468);var p=function(){var e=function(){return!!o.get("has_real")&&(a.load("trading"),!0)},t=function(){u.wait("landing_company").then(function(e){var t=o.get("is_virtual"),n=e.landing_company;return!c.get("is_financial_opening")&&(!t&&o.canUpgradeGamingToFinancial(n)||o.canUpgradeVirtualToFinancial(n))?(a.load("new_account/maltainvestws"),!1):!(!c.get("is_japan_opening")&&t&&o.canUpgradeVirtualToJapan(n))||(a.load("new_account/japanws"),!1)})},n=function(e,t){p(),u.send({states_list:o.get("residence")}).then(function(n){return m(n.states_list,e,t)}),r()},p=function(){u.send({residence_list:1}).then(function(e){return f(e.residence_list)})},f=function(e){if(e.length>0){var t=$("#place_of_birth"),n=$("#tax_residence"),i=$("#phone"),r=o.get("residence")||"",a="",s=$("<div/>");e.forEach(function(e){s.append(l(e.text,e.value)),r===e.value&&(a=e.text,"jp"!==r&&e.phone_idd&&!i.val()&&i.val("+"+e.phone_idd))}),$("#lbl_residence").html($("<strong/>",{text:a})),t.html(s.html()).val(r),n&&n.html(s.html()).promise().done(function(){setTimeout(function(){n.select2().val(h()||r).trigger("change").setVisibility(1)},500)})}},h=function(){var e=c.get(["response","get_settings","get_settings"]||{}).tax_residence;return e?e.split(","):""},m=function(e,t,n){var i="#address_state";u.wait("get_settings").then(function(r){var a=$(i);a.empty();var o=r.get_settings.address_state;e&&e.length>0?(a.append($("<option/>",{value:"",text:s("Please select")})),e.forEach(function(e){a.append($("<option/>",{value:e.value,text:e.text}))}),o&&a.val(o)):(a.replaceWith($("<input/>",{id:"address_state",name:"address_state",type:"text",maxlength:"35"})),a=$(i),o&&a.text(o)),a.parent().parent().setVisibility(1),t&&"function"==typeof n&&d.init(t,n())})},g=function(e,t){if(e.error){var n=e.error.message;$("#submit-message").empty(),$("#client_message").find(".notice-msg").text("sanity_check"===e.msg_type?s("There was some invalid character in an input field."):n).end().setVisibility(1)}else o.processNewAccount(o.get("email"),e[t].client_id,e[t].oauth_token,!1)},_=function(){var e=[{selector:"#salutation",validations:["req"]},{selector:"#first_name",validations:["req","letter_symbol",["length",{min:2,max:30}]]},{selector:"#last_name",validations:["req","letter_symbol",["length",{min:2,max:30}]]},{selector:"#date_of_birth",validations:["req"]},{selector:"#address_line_1",validations:["req","address",["length",{min:1,max:70}]]},{selector:"#address_line_2",validations:["address",["length",{min:0,max:70}]]},{selector:"#address_city",validations:["req","letter_symbol",["length",{min:1,max:35}]]},{selector:"#address_state",validations:"SELECT"===$("#address_state").prop("nodeName")?"":["general",["length",{min:0,max:35}]]},{selector:"#address_postcode",validations:["gb"===o.get("residence")?"req":"","postcode",["length",{min:0,max:20}]]},{selector:"#phone",validations:["req","phone",["length",{min:6,max:35}]]},{selector:"#secret_question",validations:["req"]},{selector:"#secret_answer",validations:["req","general",["length",{min:4,max:50}]]},{selector:"#tnc",validations:[["req",{message:"Please accept the terms and conditions."}]],exclude_request:1},{request_field:"residence",value:o.get("residence")}];return i.get("affiliate_tracking")&&e.push({request_field:"affiliate_token",value:i.getJSON("affiliate_tracking").t}),e},v=function(e){var t=[],n=void 0,i=void 0;return $(e).find("select, input[type=checkbox]").each(function(){i=$(this).attr("id"),/^(tnc|address_state)$/.test(i)||(n={selector:"#"+i,validations:["req"]},"not_pep"===i&&(n.exclude_request=1),t.push(n))}),t};return{redirectAccount:t,populateForm:n,redirectCookie:e,handleNewAccount:g,commonValidations:_,selectCheckboxValidation:v}}();e.exports=p},function(e,t,n){"use strict";var i=n(305),r=n(320).dateValueChanged,a=n(326).toISOFormat,o=n(420),s=function(){var e="#date_of_birth";o.init({selector:e,minDate:-36500,maxDate:-6575,yearRange:"-100:-18"}),$(e).attr("data-value",a(i())).change(function(){return r(this,"date")}).val("")};e.exports=s},function(e,t,n){"use strict";var i=n(318),r=n(371),a=n(310),o=n(312).State,s=n(477),c=n(320).detectHedging,l=n(389),d=function(){var e=function(){s.redirectCookie()||i.wait("authorize").then(function(){if("jp"!==a.get("residence"))return void r.load("trading");if(o.set("is_japan_opening",1),!s.redirectAccount()){s.populateForm();var e="#japan-form";l.init(e,[{selector:"#first_name",validations:["req","letter_symbol"]},{selector:"#last_name",validations:["req","letter_symbol"]},{selector:"#date_of_birth",validations:["req"]},{selector:"#address_line_1",validations:["req","address"]},{selector:"#address_line_2",validations:["address"]},{selector:"#address_city",validations:["req","letter_symbol"]},{selector:"#address_state",validations:["req"]},{selector:"#address_postcode",validations:["req",["regular",{regex:/^\d{3}-\d{4}$/,message:"Please follow the pattern 3 numbers, a dash, followed by 4 numbers."}]]},{selector:"#phone",validations:["req",["regular",{regex:/^\+?[0-9\s-]+$/,message:"Only numbers, space, and hyphen are allowed."}],["min",{min:6,max:35}]]},{selector:"#secret_answer",validations:["req",["min",{min:1,max:50}]]},{selector:"#daily_loss_limit",validations:["req","number"]},{selector:"#hedge_asset_amount",validations:["req","number"]},{request_field:"residence",value:a.get("residence")},{request_field:"new_account_japan",value:1}].concat(s.selectCheckboxValidation(e))),c($("#trading_purpose"),$(".hedging-assets")),l.handleSubmit({form_selector:e,fnc_response_handler:t})}})},t=function(e){"error"in e?s.handleNewAccount(e,e.msg_type):(r.load("new_account/knowledge_testws"),$("#topbar-msg").children("a").setVisibility(0))},n=function(){o.set("is_japan_opening",0)};return{onLoad:e,onUnload:n}}();e.exports=d},function(e,t,n){"use strict";var i=n(371),r=n(310),a=n(477),o=n(389),s=function(){var e=function(){if(!a.redirectCookie())if(r.get("residence")){if(a.redirectAccount())return;var e="#frm_real";a.populateForm(e,function(){return a.commonValidations().concat(a.selectCheckboxValidation(e))}),o.handleSubmit({form_selector:e,obj_request:{new_account_real:1},fnc_response_handler:t})}else i.load("trading")},t=function(e){return a.handleNewAccount(e,e.msg_type)};return{onLoad:e}}();e.exports=s},function(e,t,n){"use strict";var i=n(311),r=n(318),a=n(310),o=n(319).localize,s=n(313).urlFor,c=n(309).getPropertyValue,l=n(320).makeOption,d=n(315).jpClient,u=n(389),p=n(482),f=function(){var e="#virtual-form",t=function(){d()?m():(r.send({residence_list:1}).then(function(e){return n(e.residence_list)}),$("#residence").setVisibility(1),h()),u.handleSubmit({form_selector:e,fnc_response_handler:g})},n=function(e){if(e.length>0){var t=$("#residence"),n=a.get("residence")||"",i=$("<div/>");e.forEach(function(e){i.append(l(e.text,e.value,e.disabled))}),t.html(i.html()),n||r.wait("website_status").then(function(e){return f(e.website_status)})}},f=function(e){var t=(e||{}).clients_country;if(t){var n=$("#residence"),i=n.find('option[value="'+t+'"]');i.attr("disabled")||i.prop("selected",!0),n.setVisibility(1)}},h=function(){var t=p.getData(),n=[{selector:"#verification_code",validations:["req","email_token"]},{selector:"#client_password",validations:["req","password"],re_check_field:"#repeat_password"},{selector:"#repeat_password",validations:["req",["compare",{to:"#client_password"}]],exclude_request:1},{selector:"#residence"},{selector:"#email_consent"},{request_field:"utm_source",value:p.getSource(t)},{request_field:"new_account_virtual",value:1}];t.utm_medium&&n.push({request_field:"utm_medium",value:t.utm_medium}),t.utm_campaign&&n.push({request_field:"utm_campaign",value:t.utm_campaign});var r=a.get("gclid");r&&n.push({request_field:"gclid_url",value:r}),i.get("affiliate_tracking")&&n.push({request_field:"affiliate_token",value:i.getJSON("affiliate_tracking").t}),u.init(e,n)},m=function(){var e=$("#residence");e.replaceWith($("<label/>",{id:"residence","data-value":"jp",text:o("Japan")})),$("#email_consent").parent().parent().setVisibility(1),h()},g=function(e){if(!e)return!1;var t=e.error;if(!t){var n=e.new_account_virtual;return a.setCookie("residence",e.echo_req.residence),a.processNewAccount(n.email,n.client_id,n.oauth_token,!0)}var i=function(){var e='Your token has expired or is invalid. Please click <a href="[_1]">here</a> to restart the verification process.';return _(e,"")};switch(t.code){case"InputValidationFailed":return c(e,["error","details","verification_code"])?i():v(t.message);case"InvalidToken":return i();case"duplicate email":var r='The email address provided is already in use. If you forgot your password, please try our <a href="[_1]">password recovery tool</a> or contact our customer service.';return _(r,"user/lost_passwordws");case"PasswordError":return v("Password is not strong enough.");default:return v(t.message)}},_=function(e,t){$(".notice-message").remove(),$("#virtual-form").html($("<p/>",{html:o(e,[s(t)])}))},v=function(e){$("#error-account-opening").setVisibility(1).text(o(e))};return{onLoad:t}}();e.exports=f},function(e,t,n){"use strict";var i=n(310),r=n(312).CookieStorage,a=n(313),o=function(){var e=void 0,t=function(){if(!e){e=new r("utm_data"),e.read();var t=new Date;e.expires=t.setMonth(t.getMonth()+3)}},n=function(){t();var n=e.value;return Object.keys(n).map(function(e){n[e]=(n[e]||"").replace(/[^a-zA-Z0-9\s\-\.\_]/gi,"").substring(0,100)}),n},o=function(e){return e||(e=n()),e.utm_source||e.referrer||"direct"},s=function(){if(i.isLoggedIn())return void c();var t=n(),r=a.paramsHash(),o=["utm_source","utm_medium","utm_campaign"];r.utm_source&&o.map(function(n){r[n]&&!t[n]&&e.set(n,r[n])}),r.gclid&&!i.isLoggedIn()&&i.set("gclid",r.gclid);var s=document.referrer,l=localStorage.getItem("index_referrer")||s;localStorage.removeItem("index_referrer"),s&&!new RegExp(window.location.hostname,"i").test(s)&&(l=s),!l||t.referrer||r.utm_source||t.utm_source||e.set("referrer",a.getLocation(l).hostname)},c=function(){t(),e.remove()};return{getData:n,setData:s,clearData:c,getSource:o}}();e.exports=o},function(e,t,n){"use strict";var i=n(319).localize,r=n(369),a=n(478),o=n(389),s=function(){var e=function(e){if($("#container_reset_password").setVisibility(0),e.error){var t=$("#form_error"),n="[_1] Please click the link below to restart the password recovery process. If you require further assistance, please contact our Customer Support.",a=e.error.code;$("#msg_reset_password").setVisibility(0);var o=void 0;"SocialBased"===a?(o=i(e.error.message),t.find("a").setVisibility(0)):o=i(n,[i("InputValidationFailed"===a?"There was some invalid character in an input field.":e.error.message)]),$("#form_error_msg").text(o),t.setVisibility(1)}else $("#msg_reset_password").text(i("Your password has been successfully reset. Please log into your account using your new password.")),setTimeout(function(){r.redirectToLogin()},5e3)},t=function(){a(),$("#have_real_account").off("click").on("click",function(){$(this).is(":checked")?$("#dob_field").setVisibility(1):$("#dob_field").setVisibility(0)});var t="#frm_reset_password";o.init(t,[{selector:"#verification_code",validations:["req","email_token"]},{selector:"#new_password",validations:["req","password"],re_check_field:"#repeat_password"},{selector:"#repeat_password",validations:["req",["compare",{to:"#new_password"}]],exclude_request:1},{selector:"#date_of_birth",validations:["req"]},{request_field:"reset_password",value:1}]),o.handleSubmit({form_selector:t,fnc_response_handler:e})};return{onLoad:t}}();e.exports=s},function(e,t,n){"use strict";var i=n(311),r=n(485),a=n(371),o=n(310),s=n(363).toJapanTimeIfNeeded,c=n(399),l=n(319).localize,d=n(313),u=n(318),p=function(){var e={},t={},n=14,p="{JAPAN ONLY}Congratulations, you have pass the test, our Customer Support will contact you shortly.",f="{JAPAN ONLY}Sorry, you have failed the test, please try again after 24 hours.",h=!1,m=[],g=0,_=void 0,v=void 0,y=void 0,b=void 0,w=void 0,x=function(){u.send({get_settings:1},{forced:!0}).then(function(e){var t=e.get_settings.jp_account_status;if(!t)return void a.load(d.defaultRedirectUrl());switch(_=$("#knowledge-test-container"),v=_.find("#knowledge-test-header"),y=_.find("#knowledge-test-msg"),b=_.find("#knowledge-test-questions"),w=_.find("#knowledge-test-instructions"),c.upgradeMessageVisibility(),t.status){case"jp_knowledge_test_pending":k();break;case"jp_knowledge_test_fail":Date.now()>=1e3*t.next_test_epoch?k():L(t);break;default:window.location.href=d.defaultRedirectUrl()}})},k=function(){m=C(),m.reduce(function(e,t){return e.concat(t)}).forEach(function(e){t[e.id]=e}),E()},C=function(){var e={};_.find("#data-questions").find("> div").each(function(){var t=+$(this).attr("data-section-id");e["section"+t]=[],$(this).find("> div").each(function(){var n=+$(this).attr("data-question-id");e["section"+t].push({category:t,id:n,question:$(this).attr("data-question-en"),question_localized:$(this).text(),correct_answer:S[n],tooltip:$(this).attr("data-tip")})})});var t=[];return Object.keys(e).forEach(function(n){return t.push(I(e[n]))}),t},I=function(e){for(var t=Object.keys(e),n=[],i=0;i<4;i++){var r=Math.floor(100*Math.random())%t.length;n.push(e[t[r]]),t.splice(r,1)}return n},S={1:!1,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!1,10:!0,11:!1,12:!0,13:!1,14:!0,15:!0,16:!0,17:!1,18:!0,19:!0,20:!0,21:!0,22:!1,23:!0,24:!1,25:!1,26:!0,27:!0,28:!0,29:!0,30:!0,31:!1,32:!0,33:!1,34:!0,35:!1,36:!0,37:!0,38:!1,39:!0,40:!1,41:!1,42:!0,43:!0,44:!0,45:!0,46:!0,47:!0,48:!1,49:!1,50:!0,51:!1,52:!0,53:!0,54:!1,55:!0,56:!0,57:!0,58:!0,59:!0,60:!0,61:!0,62:!1,63:!0,64:!0,65:!0,66:!1,67:!0,68:!0,69:!0,70:!0,71:!0,72:!0,73:!0,74:!1,75:!1,76:!0,77:!1,78:!0,79:!0,80:!0,81:!0,82:!0,83:!0,84:!0,85:!0,86:!0,87:!0,88:!1,89:!0,90:!0,91:!0,92:!0,93:!0,94:!0,95:!1,96:!0,97:!0,98:!1,99:!0,100:!0},E=function(){for(var e=0;e<m.length;e++){var t=r.createQuestionTable(m[e]);_.find("#section"+(e+1)+"-question").append(t)}b.find("input[type=radio]").click(T),_.find("#knowledge-test-submit").click(B),P("{JAPAN ONLY}Please complete the following questions.",1)},T=function(t){e[t.target.name]=1===+t.target.value},B=function(){if(!h){var n=Object.keys(e).map(function(e){return+e});if(20!==n.length){w.setVisibility(0),y.addClass("notice-msg").text(l("You need to finish all 20 questions."));var i=m.reduce(function(e,t){return e.concat(t)}).find(function(e){return n.indexOf(e.id)===-1}).id;return void $.scrollTo('a[name="'+i+'"]',500,{offset:-10})}var r=[];Object.keys(e).forEach(function(n){var i=t[n],a=e[n]===i.correct_answer?1:0;g+=a,i.answer=e[n],r.push({category:i.category,id:i.id,question:i.question,answer:i.answer?1:0,pass:a})}),A(r),h=!0}},A=function(e){u.send({jp_knowledge_test:1,score:g,status:g>=n?"pass":"fail",questions:e}).then(function(e){e.error?"TestUnavailableNow"===e.error.code?P("{JAPAN ONLY}The test is unavailable now, test can only be taken again on next business day with respect of most recent test."):($("#form-msg").html(e.error.message).setVisibility(1),h=!1):(O(g,1e3*e.jp_knowledge_test.test_taken_epoch),$.scrollTo("body",500),u.send({get_settings:1},{forced:!0}).then(function(){c.upgradeMessageVisibility()}))})},O=function(e,t){v.text(l("{JAPAN ONLY}Knowledge Test Result")),P(e>=n?p:f),_.append(r.createResultUI(e,t)),e>=n&&i.get("affiliate_tracking")&&y.append($("<img/>",{src:"https://www.tcs-asp.net/aresult?LC=BINARY1&NK="+o.get("loginid")}).setVisibility(0))},P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;w.setVisibility(t),b.setVisibility(t),y.text(l(e))},L=function(e){return P(l("{JAPAN ONLY}Dear customer, you are not allowed to take knowledge test until [_1]. Last test taken at [_2].",[s(e.next_test_epoch),s(e.last_test_epoch)]))};return{onLoad:x}}();e.exports=p},function(e,t,n){"use strict";var i=n(305),r=n(319).localize,a=n(313).urlForStatic,o=function(){var e=function(e,t){var n=e.id,i=n+"true",r=n+"false",a=$("<input />",{type:"radio",name:n,id:i,value:"1"}),o=$("<td></td>").append(a),s=$("<input />",{type:"radio",name:n,id:r,value:"0"}),c=$("<td></td>").append(s);return t&&(e.correct_answer?a.prop("checked",!0):s.prop("checked",!0),a.attr("disabled",!0),s.attr("disabled",!0)),[o,c]},t=function(t,n,i){var o=$("<tr></tr>",{id:t,class:"question"}),s=$("<td></td>").text(r(n.question_localized)),c=$("<a></a>",{name:n.id,class:"no-underline"}),l=$("<img>",{src:a("/images/common/question_1.png"),class:"invisible"});s.append(c.append(l));var d=e(n,i);return o.append(s).append(d[0]).append(d[1])},n=function(e,n){var i=$("<tr></tr>"),a=$("<th></th>",{id:"question-header",class:"question-col"}).text(r("Questions")),o=$("<th></th>",{id:"true-header",class:"true-col"}).text(r("True")),s=$("<th></th>",{id:"fasle-header",class:"false-col"}).text(r("False"));i.append(a).append(o).append(s);var c=$("<table></table>",{id:"knowledge-test"});c.append(i);var l=void 0;return e.forEach(function(e,i){l=t(i,e,n),c.append(l)}),c},o=function(e){var t=$("<table></table>",{class:"kv-pairs"}),n=$("<tr/>").append($("<td/>",{text:r("Score")})).append($("<td/>",{text:e})),a=i(),o=""+i.utc(a).format("YYYY")+r("Year")+i.utc(a).format("MM")+r("Month")+i.utc(a).format("DD")+r("Day")+" ("+r("Weekday")+")",s=$("<tr/>").append($("<td/>",{text:r("Date")})).append($("<td/>",{text:o}));return t.append(n).append(s),t};return{createQuestionTable:n,createResultUI:o}}();e.exports=o},function(e,t,n){"use strict";var i=n(311),r=n(310),a=n(487),o=n(316),s=n(399),c=n(314),l=n(319),d=n(319).localize,u=n(369),p=n(488),f=n(312).LocalStore,h=n(312).State,m=n(313),g=n(315).checkLanguage,_=n(396).scrollToTop,v=n(482),y=n(318),b=n(490),w=n(494),x=n(495);n(492),n(493);var k=function(){var e=function(){h.set("is_loaded_by_pjax",!1),m.init(),x.init(),t(),o.init()},t=function(){$(document).ready(function(){var e=document.cookie.match(/\bloginid=(\w+)/);e=e?e[1]:"",$(window).on("storage",function(t){switch(t.originalEvent.key){case"active_loginid":if(t.originalEvent.newValue===e)return;""===t.originalEvent.newValue?I():window.is_logging_in||I();break;case"new_release_reload_time":t.originalEvent.newValue!==t.originalEvent.oldValue&&I(!0)}}),_(),f.set("active_loginid",e)})},n=function(){h.get("is_loaded_by_pjax")?m.reset():(e(),l.forLang(c.urlLang()),s.onLoad(),c.setCookie(),p.makeMobileMenu(),C(),S(),E()),p.init(),a.onLoad(),sessionStorage.getItem("showLoginPage")&&(sessionStorage.removeItem("showLoginPage"),u.redirectToLogin()),r.isLoggedIn()?y.wait("authorize").then(function(){g(),b.onLoad()}):g(),v.setData()},k=function(){p.onUnload()},C=function(){var e=m.param("t");if(!e||32!==e.length)return!1;w.show();var t=e.length,n=/\w{1}/.test(m.param("s")),r=i.getJSON("affiliate_tracking");if(r&&n&&r&&r.t)return!1;var a={};return 32===t&&(a.t=e.toString()),n&&(a.s="1"),i.set("affiliate_tracking",a,{expires:365,path:"/",domain:"."+location.hostname.split(".").slice(-2).join(".")}),!0},I=function(e){window.location.reload(!!e)},S=function(){var e=localStorage.getItem("config.server_url");if(e&&e.length>0){var t=(/www\.binary\.com/i.test(window.location.hostname)?"":d("This is a staging server - For testing purposes only")+" - ")+"\n                "+d('The server <a href="[_1]">endpoint</a> is: [_2]',[m.urlFor("endpoint"),e]),n=$("#end-note");n.html(t).setVisibility(1),$("#footer").css("padding-bottom",n.height())}},E=function(){var e="//browser-update.org/update.min.js";$('script[src*="'+e+'"]').length||(window.$buoop={vs:{i:11,f:-4,o:-4,s:9,c:-4},api:4,l:c.get().toLowerCase(),url:"https://whatbrowser.org/",noclose:!0,text:d("Your web browser ([_1]) is out of date and may affect your trading experience. Proceed at your own risk. [_2]Update browser[_3]",["{brow_name}",'<a href="https://www.whatbrowser.org/" target="_blank">',"</a>"]),reminder:0},$(document).ready(function(){$("body").append($("<script/>",{src:e}))}))};return{onLoad:n,onUnload:k}}();e.exports=k},function(e,t,n){"use strict";var i=n(310),r=function(){var e=function(){i.activateByClientType("#header"),$("#content").removeClass().addClass($("#content_class").text())};return{onLoad:e}}();e.exports=r},function(e,t,n){"use strict";var i=n(310);n(489);var r=function(){var e=void 0,t=function(){e=$("#main-menu"),$("#menu-top").find("li").removeClass("active"),r();var t=l();t&&t.addClass("active"),(i.isLoggedIn()||/\/(cashier|resources|trading|trading_beta|multi_barriers_trading)/i.test(window.location.pathname))&&n()},n=function(){e.setVisibility(1),a()},r=function(){e.setVisibility(0)},a=function(){e.find("li.item").removeClass("active hover").end().find("li.sub_item a").removeClass("a-active");var t=d(),n=t.item,i=t.subitem;i&&i.addClass("a-active"),n&&(n.addClass("active hover"),c(n))},o=function(){e.unbind().find(".item").unbind()},s=function(){e.find("li.item").removeClass("hover")},c=function(t){e.on("mouseleave",function(){s(),t&&t.addClass("hover")}).find(".item").on("mouseenter",function(){s(),$(this).addClass("hover")})},l=function(){var e="",t=window.location.pathname;return $("#menu-top").find("li a").each(function(){t.indexOf(this.pathname.replace(/\.html/i,""))>=0&&(e=$(this).closest("li"))}),e},d=function(){var t=window.location.pathname;/cashier/i.test(t)&&!/(cashier_password|payment_methods)/.test(t)&&(t=$("#topMenuCashier").find("a").attr("href"));var n=void 0,i=void 0;n=e.find('a[href*="'+t+'"]');var r=n.closest("li");return r.hasClass("sub_item")?(i=n,n=i.closest(".item")):n=r,{item:n,subitem:i}},u=function(){$("#mobile-menu-container").is(":visible")&&$("#mobile-menu").mmenu({position:"right",zposition:"front",slidingSubmenus:!1,searchfield:!0,onClick:{close:!0}},{selectedClass:"active"})};return{init:t,onUnload:o,makeMobileMenu:u}}();e.exports=r},function(e,t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){function t(t,i,r){if(r){if("object"!=("undefined"==typeof t?"undefined":n(t))&&(t={}),"boolean"!=typeof t.isMenu){var a=r.children();t.isMenu=1==a.length&&a.is(i.panelNodetype)}return t}return t=e.extend(!0,{},e[s].defaults,t),("top"==t.position||"bottom"==t.position)&&("back"==t.zposition||"next"==t.zposition)&&(e[s].deprecated('Using position "'+t.position+'" in combination with zposition "'+t.zposition+'"','zposition "front"'),t.zposition="front"),t}function i(t){return t=e.extend(!0,{},e[s].configuration,t),"string"!=typeof t.pageSelector&&(t.pageSelector="> "+t.pageNodetype),t}function r(){l.$wndw=e(window),l.$html=e("html"),l.$body=e("body"),l.$allMenus=e(),e.each([d,u,p],function(e,t){t.add=function(e){e=e.split(" ");for(var n in e)t[e[n]]=t.mm(e[n])}}),d.mm=function(e){return"mm-"+e},d.add("menu ismenu panel list subtitle selected label spacer current highest hidden page blocker modal background opened opening subopened subopen fullsubopen subclose"),d.umm=function(e){return"mm-"==e.slice(0,3)&&(e=e.slice(3)),e},u.mm=function(e){return"mm-"+e},u.add("parent style"),p.mm=function(e){return e+".mm"},p.add("toggle open opening opened close closing closed update setPage setSelected transitionend webkitTransitionEnd mousedown touchstart mouseup touchend scroll touchmove click keydown keyup resize"),l.$wndw.on(p.keydown,function(e){return l.$html.hasClass(d.opened)&&9==e.keyCode?(e.preventDefault(),!1):void 0});var t=0;l.$wndw.on(p.resize,function(e,n){if(n||l.$html.hasClass(d.opened)){var i=l.$wndw.height();(n||i!=t)&&(t=i,l.$page.css("minHeight",i))}}),e[s]._c=d,e[s]._d=u,e[s]._e=p,e[s].glbl=l}function a(t,n){if(t.hasClass(d.current))return!1;var i=e("."+d.panel,n),r=i.filter("."+d.current);return i.removeClass(d.highest).removeClass(d.current).not(t).not(r).addClass(d.hidden),t.hasClass(d.opened)?r.addClass(d.highest).removeClass(d.opened).removeClass(d.subopened):(t.addClass(d.highest),r.addClass(d.subopened)),t.removeClass(d.hidden).removeClass(d.subopened).addClass(d.current).addClass(d.opened),"open"}function o(e,t,n){var i=!1,r=function(){i||t.call(e[0]),i=!0};e.one(p.transitionend,r),e.one(p.webkitTransitionEnd,r),setTimeout(r,1.1*n)}var s="mmenu",c="4.2.2";if(!e[s]){var l={$wndw:null,$html:null,$body:null,$page:null,$blck:null,$allMenus:null},d={},u={},p={},f=0,h=0;e[s]=function(e,t,n){return l.$allMenus=l.$allMenus.add(e),this.$menu=e,this.opts=t,this.conf=n,this.serialnr=f++,this._init(),this},e[s].prototype={open:function(){var e=this;return this._openSetup(),setTimeout(function(){e._openFinish()},50),"open"},_openSetup:function(){h=l.$wndw.scrollTop(),this.$menu.addClass(d.current),l.$allMenus.not(this.$menu).trigger(p.close),l.$page.data(u.style,l.$page.attr("style")||""),l.$wndw.trigger(p.resize,[!0]),this.opts.modal&&l.$html.addClass(d.modal),
this.opts.moveBackground&&l.$html.addClass(d.background),"left"!=this.opts.position&&l.$html.addClass(d.mm(this.opts.position)),"back"!=this.opts.zposition&&l.$html.addClass(d.mm(this.opts.zposition)),this.opts.classes&&l.$html.addClass(this.opts.classes),l.$html.addClass(d.opened),this.$menu.addClass(d.opened)},_openFinish:function(){var e=this;o(l.$page,function(){e.$menu.trigger(p.opened)},this.conf.transitionDuration),l.$html.addClass(d.opening),this.$menu.trigger(p.opening)},close:function(){var e=this;return o(l.$page,function(){e.$menu.removeClass(d.current).removeClass(d.opened),l.$html.removeClass(d.opened).removeClass(d.modal).removeClass(d.background).removeClass(d.mm(e.opts.position)).removeClass(d.mm(e.opts.zposition)),e.opts.classes&&l.$html.removeClass(e.opts.classes),l.$page.attr("style",l.$page.data(u.style)),e.$menu.trigger(p.closed)},this.conf.transitionDuration),l.$html.removeClass(d.opening),this.$menu.trigger(p.closing),"close"},_init:function(){if(this.opts=t(this.opts,this.conf,this.$menu),this.direction=this.opts.slidingSubmenus?"horizontal":"vertical",this._initPage(l.$page),this._initMenu(),this._initBlocker(),this._initPanles(),this._initLinks(),this._initOpenClose(),this._bindCustomEvents(),e[s].addons)for(var n=0;n<e[s].addons.length;n++)"function"==typeof this["_addon_"+e[s].addons[n]]&&this["_addon_"+e[s].addons[n]]()},_bindCustomEvents:function(){var t=this;this.$menu.off(p.open+" "+p.close+" "+p.setPage+" "+p.update).on(p.open+" "+p.close+" "+p.setPage+" "+p.update,function(e){e.stopPropagation()}),this.$menu.on(p.open,function(n){return e(this).hasClass(d.current)?(n.stopImmediatePropagation(),!1):t.open()}).on(p.close,function(n){return e(this).hasClass(d.current)?t.close():(n.stopImmediatePropagation(),!1)}).on(p.setPage,function(e,n){t._initPage(n),t._initOpenClose()});var n=this.$menu.find(this.opts.isMenu&&"horizontal"!=this.direction?"ul, ol":"."+d.panel);n.off(p.toggle+" "+p.open+" "+p.close).on(p.toggle+" "+p.open+" "+p.close,function(e){e.stopPropagation()}),"horizontal"==this.direction?n.on(p.open,function(){return a(e(this),t.$menu)}):n.on(p.toggle,function(){var t=e(this);return t.triggerHandler(t.parent().hasClass(d.opened)?p.close:p.open)}).on(p.open,function(){return e(this).parent().addClass(d.opened),"open"}).on(p.close,function(){return e(this).parent().removeClass(d.opened),"close"})},_initBlocker:function(){var t=this;l.$blck||(l.$blck=e('<div id="'+d.blocker+'" />').appendTo(l.$body)),l.$blck.off(p.touchstart).on(p.touchstart,function(e){e.preventDefault(),e.stopPropagation(),l.$blck.trigger(p.mousedown)}).on(p.mousedown,function(e){e.preventDefault(),l.$html.hasClass(d.modal)||t.$menu.trigger(p.close)})},_initPage:function(t){t||(t=e(this.conf.pageSelector,l.$body),t.length>1&&(e[s].debug("Multiple nodes found for the page-node, all nodes are wrapped in one <"+this.conf.pageNodetype+">."),t=t.wrapAll("<"+this.conf.pageNodetype+" />").parent())),t.addClass(d.page),l.$page=t},_initMenu:function(){this.conf.clone&&(this.$menu=this.$menu.clone(!0),this.$menu.add(this.$menu.find("*")).filter("[id]").each(function(){e(this).attr("id",d.mm(e(this).attr("id")))})),this.$menu.contents().each(function(){3==e(this)[0].nodeType&&e(this).remove()}),this.$menu.prependTo("body").addClass(d.menu),this.$menu.addClass(d.mm(this.direction)),this.opts.classes&&this.$menu.addClass(this.opts.classes),this.opts.isMenu&&this.$menu.addClass(d.ismenu),"left"!=this.opts.position&&this.$menu.addClass(d.mm(this.opts.position)),"back"!=this.opts.zposition&&this.$menu.addClass(d.mm(this.opts.zposition))},_initPanles:function(){var t=this;this.__refactorClass(e("."+this.conf.listClass,this.$menu),"list"),this.opts.isMenu&&e("ul, ol",this.$menu).not(".mm-nolist").addClass(d.list);var n=e("."+d.list+" > li",this.$menu);this.__refactorClass(n.filter("."+this.conf.selectedClass),"selected"),this.__refactorClass(n.filter("."+this.conf.labelClass),"label"),this.__refactorClass(n.filter("."+this.conf.spacerClass),"spacer"),n.off(p.setSelected).on(p.setSelected,function(t,i){t.stopPropagation(),n.removeClass(d.selected),"boolean"!=typeof i&&(i=!0),i&&e(this).addClass(d.selected)}),this.__refactorClass(e("."+this.conf.panelClass,this.$menu),"panel"),this.$menu.children().filter(this.conf.panelNodetype).add(this.$menu.find("."+d.list).children().children().filter(this.conf.panelNodetype)).addClass(d.panel);var i=e("."+d.panel,this.$menu);i.each(function(n){var i=e(this),r=i.attr("id")||d.mm("m"+t.serialnr+"-p"+n);i.attr("id",r)}),i.find("."+d.panel).each(function(){var n=e(this),i=n.is("ul, ol")?n:n.find("ul ,ol").first(),r=n.parent(),a=r.find("> a, > span"),o=r.closest("."+d.panel);if(n.data(u.parent,r),r.parent().is("."+d.list)){var s=e('<a class="'+d.subopen+'" href="#'+n.attr("id")+'" />').insertBefore(a);a.is("a")||s.addClass(d.fullsubopen),"horizontal"==t.direction&&i.prepend('<li class="'+d.subtitle+'"><a class="'+d.subclose+'" href="#'+o.attr("id")+'">'+a.text()+"</a></li>")}});var r="horizontal"==this.direction?p.open:p.toggle;if(i.each(function(){var n=e(this),i=n.attr("id");e('a[href="#'+i+'"]',t.$menu).off(p.click).on(p.click,function(e){e.preventDefault(),n.trigger(r)})}),"horizontal"==this.direction){var a=e("."+d.list+" > li."+d.selected,this.$menu);a.add(a.parents("li")).parents("li").removeClass(d.selected).end().each(function(){var t=e(this),n=t.find("> ."+d.panel);n.length&&(t.parents("."+d.panel).addClass(d.subopened),n.addClass(d.opened))}).closest("."+d.panel).addClass(d.opened).parents("."+d.panel).addClass(d.subopened)}else e("li."+d.selected,this.$menu).addClass(d.opened).parents("."+d.selected).removeClass(d.selected);var o=i.filter("."+d.opened);o.length||(o=i.first()),o.addClass(d.opened).last().addClass(d.current),"horizontal"==this.direction&&i.find("."+d.panel).appendTo(this.$menu)},_initLinks:function(){var t=this;e("."+d.list+" > li > a",this.$menu).not("."+d.subopen).not("."+d.subclose).not('[rel="external"]').not('[target="_blank"]').off(p.click).on(p.click,function(n){var i=e(this),r=i.attr("href");t.__valueOrFn(t.opts.onClick.setSelected,i)&&i.parent().trigger(p.setSelected);var a=t.__valueOrFn(t.opts.onClick.preventDefault,i,"#"==r.slice(0,1));a&&n.preventDefault(),t.__valueOrFn(t.opts.onClick.blockUI,i,!a)&&l.$html.addClass(d.blocking),t.__valueOrFn(t.opts.onClick.close,i,a)&&t.$menu.triggerHandler(p.close)})},_initOpenClose:function(){var t=this,n=this.$menu.attr("id");n&&n.length&&(this.conf.clone&&(n=d.umm(n)),e('a[href="#'+n+'"]').off(p.click).on(p.click,function(e){e.preventDefault(),t.$menu.trigger(p.open)}));var n=l.$page.attr("id");n&&n.length&&e('a[href="#'+n+'"]').off(p.click).on(p.click,function(e){e.preventDefault(),t.$menu.trigger(p.close)})},__valueOrFn:function(e,t,n){return"function"==typeof e?e.call(t[0]):"undefined"==typeof e&&"undefined"!=typeof n?n:e},__refactorClass:function(e,t){e.removeClass(this.conf[t+"Class"]).addClass(d[t])}},e.fn[s]=function(n,a){return l.$wndw||r(),n=t(n,a),a=i(a),this.each(function(){var t=e(this);t.data(s)||t.data(s,new e[s](t,n,a))})},e[s].version=c,e[s].defaults={position:"left",zposition:"back",moveBackground:!0,slidingSubmenus:!0,modal:!1,classes:"",onClick:{setSelected:!0}},e[s].configuration={preventTabbing:!0,panelClass:"Panel",listClass:"List",selectedClass:"Selected",labelClass:"Label",spacerClass:"Spacer",pageNodetype:"div",panelNodetype:"ul, ol, div",transitionDuration:400},function(){var t=window.document,n=window.navigator.userAgent,i=(document.createElement("div").style,"ontouchstart"in t),r="WebkitOverflowScrolling"in t.documentElement.style,a=function(){return n.indexOf("Android")>=0&&2.4>parseFloat(n.slice(n.indexOf("Android")+8))}();e[s].support={touch:i,oldAndroidBrowser:a,overflowscrolling:function(){return!i||(!!r||!a)}()}}(),e[s].debug=function(){},e[s].deprecated=function(e,t){"undefined"!=typeof console&&"undefined"!=typeof console.warn&&console.warn("MMENU: "+e+" is deprecated, use "+t+" instead.")}}}(jQuery),!function(e){var t="mmenu",i="counters";e[t].prototype["_addon_"+i]=function(){var r=this,a=this.opts[i],o=e[t]._c,s=e[t]._d,c=e[t]._e;o.add("counter noresults"),c.add("updatecounters"),"boolean"==typeof a&&(a={add:a,update:a}),"object"!=("undefined"==typeof a?"undefined":n(a))&&(a={}),a=e.extend(!0,{},e[t].defaults[i],a),a.count&&(e[t].deprecated('the option "count" for counters, the option "update"'),a.update=a.count),this.__refactorClass(e("em."+this.conf.counterClass,this.$menu),"counter");var l=e("."+o.panel,this.$menu);if(a.add&&l.each(function(){var t=e(this),n=t.data(s.parent);if(n){var i=e('<em class="'+o.counter+'" />'),r=n.find("> a."+o.subopen);r.parent().find("em."+o.counter).length||r.before(i)}}),a.update){var d=e("em."+o.counter,this.$menu);d.off(c.updatecounters).on(c.updatecounters,function(e){e.stopPropagation()}).each(function(){var t=e(this),n=e(t.next().attr("href"),r.$menu);n.is("."+o.list)||(n=n.find("> ."+o.list)),n.length&&t.on(c.updatecounters,function(){var e=n.children().not("."+o.label).not("."+o.subtitle).not("."+o.hidden).not("."+o.noresults);t.html(e.length)})}).trigger(c.updatecounters),this.$menu.on(c.update,function(){d.trigger(c.updatecounters)})}},e[t].defaults[i]={add:!1,update:!1},e[t].configuration.counterClass="Counter",e[t].addons=e[t].addons||[],e[t].addons.push(i)}(jQuery),!function(e){function t(e,t,n){return t>e&&(e=t),e>n&&(e=n),e}var i="mmenu",r="dragOpen";e[i].prototype["_addon_"+r]=function(){var a=this,o=this.opts[r];if(e.fn.hammer){var s=e[i]._c,c=(e[i]._d,e[i]._e);s.add("dragging"),c.add("dragleft dragright dragup dragdown dragend");var l=e[i].glbl;if("boolean"==typeof o&&(o={open:o}),"object"!=("undefined"==typeof o?"undefined":n(o))&&(o={}),"number"!=typeof o.maxStartPos&&(o.maxStartPos="left"==this.opts.position||"right"==this.opts.position?150:75),o=e.extend(!0,{},e[i].defaults[r],o),o.open){var d=0,u=!1,p=0,f=0,h="width";switch(this.opts.position){case"left":case"right":h="width";break;default:h="height"}switch(this.opts.position){case"left":var m={events:c.dragleft+" "+c.dragright,open_dir:"right",close_dir:"left",delta:"deltaX",page:"pageX",negative:!1};break;case"right":var m={events:c.dragleft+" "+c.dragright,open_dir:"left",close_dir:"right",delta:"deltaX",page:"pageX",negative:!0};break;case"top":var m={events:c.dragup+" "+c.dragdown,open_dir:"down",close_dir:"up",delta:"deltaY",page:"pageY",negative:!1};break;case"bottom":var m={events:c.dragup+" "+c.dragdown,open_dir:"up",close_dir:"down",delta:"deltaY",page:"pageY",negative:!0}}var g=this.__valueOrFn(o.pageNode,this.$menu,l.$page);"string"==typeof g&&(g=e(g));var _=l.$page.find("."+s.mm("fixed-top")+", ."+s.mm("fixed-bottom")),v=l.$page;switch(a.opts.zposition){case"back":v=v.add(_);break;case"front":v=a.$menu;break;case"next":v=v.add(a.$menu).add(_)}g.hammer().on(c.touchstart+" "+c.mousedown,function(e){if("touchstart"==e.type)var t=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],n=t[m.page];else if("mousedown"==e.type)var n=e[m.page];switch(a.opts.position){case"right":case"bottom":n>=l.$wndw[h]()-o.maxStartPos&&(d=1);break;default:n<=o.maxStartPos&&(d=1)}}).on(m.events+" "+c.dragend,function(e){d>0&&(e.gesture.preventDefault(),e.stopPropagation())}).on(m.events,function(e){var n=m.negative?-e.gesture[m.delta]:e.gesture[m.delta];if(u=n>p?m.open_dir:m.close_dir,p=n,p>o.threshold&&1==d){if(l.$html.hasClass(s.opened))return;d=2,a._openSetup(),l.$html.addClass(s.dragging),f=t(l.$wndw[h]()*a.conf[r][h].perc,a.conf[r][h].min,a.conf[r][h].max)}2==d&&v.css(a.opts.position,t(p,10,f)-("front"==a.opts.zposition?f:0))}).on(c.dragend,function(){2==d&&(l.$html.removeClass(s.dragging),v.css(a.opts.position,""),u==m.open_dir?a._openFinish():a.close()),d=0})}}},e[i].defaults[r]={open:!1,threshold:50},e[i].configuration[r]={width:{perc:.8,min:140,max:440},height:{perc:.8,min:140,max:880}},e[i].addons=e[i].addons||[],e[i].addons.push(r)}(jQuery),!function(e){var t="mmenu",i="header";e[t].prototype["_addon_"+i]=function(){var r=this,a=this.opts[i],o=this.conf[i],s=e[t]._c,c=(e[t]._d,e[t]._e);s.add("header hasheader prev next title titletext"),c.add("updateheader");var l=e[t].glbl;if("boolean"==typeof a&&(a={add:a,update:a}),"object"!=("undefined"==typeof a?"undefined":n(a))&&(a={}),a=e.extend(!0,{},e[t].defaults[i],a),a.add){var d=a.content?a.content:'<a class="'+s.prev+'" href="javascript:;"></a><span class="'+s.title+'"></span><a class="'+s.next+'" href="javascript:;"></a>';e('<div class="'+s.header+'" />').prependTo(this.$menu).append(d)}var u=e("div."+s.header,this.$menu);if(u.length&&this.$menu.addClass(s.hasheader),a.update&&u.length){var p=u.find("."+s.title),f=u.find("."+s.prev),h=u.find("."+s.next),m="#"+l.$page.attr("id");f.add(h).on(c.click,function(t){t.preventDefault(),t.stopPropagation();var n=e(this).attr("href");"#"!==n&&(n==m?r.$menu.trigger(c.close):e(n,r.$menu).trigger(c.open))}),e("."+s.panel,this.$menu).each(function(){var t=e(this),n=e("."+o.panelHeaderClass,t).text(),i=e("."+o.panelPrevClass,t).attr("href"),r=e("."+o.panelNextClass,t).attr("href");n||(n=e("."+s.subclose,t).text()),n||(n=a.title),i||(i=e("."+s.subclose,t).attr("href")),t.off(c.updateheader).on(c.updateheader,function(e){e.stopPropagation(),p[n?"show":"hide"]().text(n),f[i?"show":"hide"]().attr("href",i),h[r?"show":"hide"]().attr("href",r)}),t.on(c.open,function(){e(this).trigger(c.updateheader)})}).filter("."+s.current).trigger(c.updateheader)}},e[t].defaults[i]={add:!1,content:!1,update:!1,title:"Menu"},e[t].configuration[i]={panelHeaderClass:"Header",panelNextClass:"Next",panelPrevClass:"Prev"},e[t].addons=e[t].addons||[],e[t].addons.push(i)}(jQuery),!function(e){var t="mmenu",i="labels";e[t].prototype["_addon_"+i]=function(){function r(){var e=s.hassearch&&a.$menu.hasClass(s.hassearch),t=s.hasheader&&a.$menu.hasClass(s.hasheader);return e?t?100:50:t?60:0}var a=this,o=this.opts[i],s=e[t]._c,c=(e[t]._d,e[t]._e);if(s.add("collapsed"),s.add("fixedlabels original clone"),c.add("updatelabels position scroll"),e[t].support.touch&&(c.scroll+=" "+c.mm("touchmove")),"boolean"==typeof o&&(o={collapse:o}),"object"!=("undefined"==typeof o?"undefined":n(o))&&(o={}),o=e.extend(!0,{},e[t].defaults[i],o),o.collapse){this.__refactorClass(e("li."+this.conf.collapsedClass,this.$menu),"collapsed");var l=e("."+s.label,this.$menu);l.each(function(){var t=e(this),n=t.nextUntil("."+s.label,"all"==o.collapse?null:"."+s.collapsed);"all"==o.collapse&&(t.addClass(s.opened),n.removeClass(s.collapsed)),n.length&&(t.wrapInner("<span />"),e('<a href="javascript:;" class="'+s.subopen+" "+s.fullsubopen+'" />').prependTo(t).on(c.click,function(e){e.preventDefault(),t.toggleClass(s.opened),n[t.hasClass(s.opened)?"removeClass":"addClass"](s.collapsed)}))})}else if(o.fixed){if("horizontal"!=this.direction)return;this.$menu.addClass(s.fixedlabels);var d=e("."+s.panel,this.$menu),l=e("."+s.label,this.$menu);d.add(l).off(c.updatelabels+" "+c.position+" "+c.scroll).on(c.updatelabels+" "+c.position+" "+c.scroll,function(e){e.stopPropagation()});var u=r();d.each(function(){var t=e(this),n=t.find("."+s.label);if(n.length){var i=t.scrollTop();n.each(function(){var n=e(this);n.wrapInner("<div />").wrapInner("<div />");var r,a,o,l=n.find("> div"),d=e();n.on(c.updatelabels,function(){i=t.scrollTop(),n.hasClass(s.hidden)||(d=n.nextAll("."+s.label).not("."+s.hidden).first(),r=n.offset().top+i,a=!!d.length&&d.offset().top+i,o=l.height(),n.trigger(c.position))}),n.on(c.position,function(){var e=0;a&&i+u>a-o?e=a-r-o:i+u>r&&(e=i-r+u),l.css("top",e)})}),t.on(c.updatelabels,function(){i=t.scrollTop(),u=r(),n.trigger(c.position)}).on(c.scroll,function(){n.trigger(c.updatelabels)})}}),this.$menu.on(c.update,function(){d.trigger(c.updatelabels)}).on(c.opening,function(){d.trigger(c.updatelabels).trigger(c.scroll)})}},e[t].defaults[i]={fixed:!1,collapse:!1},e[t].configuration.collapsedClass="Collapsed",e[t].addons=e[t].addons||[],e[t].addons.push(i)}(jQuery),!function(e){function t(e){switch(e){case 9:case 16:case 17:case 18:case 37:case 38:case 39:case 40:return!0}return!1}var i="mmenu",r="searchfield";e[i].prototype["_addon_"+r]=function(){var a=this,o=this.opts[r],s=e[i]._c,c=e[i]._d,l=e[i]._e;if(s.add("search hassearch noresults nosubresults counter"),l.add("search reset change"),"boolean"==typeof o&&(o={add:o,search:o}),"object"!=("undefined"==typeof o?"undefined":n(o))&&(o={}),o=e.extend(!0,{},e[i].defaults[r],o),o.add&&(e('<div class="'+s.search+'" />').prependTo(this.$menu).append('<input placeholder="'+o.placeholder+'" type="text" autocomplete="off" />'),o.noResults&&e("ul, ol",this.$menu).first().append('<li class="'+s.noresults+'">'+o.noResults+"</li>")),e("div."+s.search,this.$menu).length&&this.$menu.addClass(s.hassearch),o.search){var d=e("div."+s.search,this.$menu).find("input");if(d.length){var u=e("."+s.panel,this.$menu),p=e("."+s.list+"> li."+s.label,this.$menu),f=e("."+s.list+"> li",this.$menu).not("."+s.subtitle).not("."+s.label).not("."+s.noresults),h="> a";o.showLinksOnly||(h+=", > span"),d.off(l.keyup+" "+l.change).on(l.keyup,function(e){t(e.keyCode)||a.$menu.trigger(l.search)}).on(l.change,function(){a.$menu.trigger(l.search)}),this.$menu.off(l.reset+" "+l.search).on(l.reset+" "+l.search,function(e){e.stopPropagation()}).on(l.reset,function(){a.$menu.trigger(l.search,[""])}).on(l.search,function(t,n){"string"==typeof n?d.val(n):n=d.val(),n=n.toLowerCase(),u.scrollTop(0),f.add(p).addClass(s.hidden),f.each(function(){var t=e(this);e(h,t).text().toLowerCase().indexOf(n)>-1&&t.add(t.prevAll("."+s.label).first()).removeClass(s.hidden)}),e(u.get().reverse()).each(function(){var t=e(this),n=t.data(c.parent);if(n){var i=t.add(t.find("> ."+s.list)).find("> li").not("."+s.subtitle).not("."+s.label).not("."+s.hidden);i.length?n.removeClass(s.hidden).removeClass(s.nosubresults).prevAll("."+s.label).first().removeClass(s.hidden):(t.hasClass(s.current)&&n.trigger(l.open),n.addClass(s.nosubresults))}}),a.$menu[f.not("."+s.hidden).length?"removeClass":"addClass"](s.noresults),a.$menu.trigger(l.update)})}}},e[i].defaults[r]={add:!1,search:!1,showLinksOnly:!0,placeholder:"Search",noResults:"No results found."},e[i].addons=e[i].addons||[],e[i].addons.push(r)}(jQuery)},function(e,t,n){"use strict";var i=n(324),r=n(491),a=n(318),o=n(310),s=function(){var e=function(e){var t=e.key,n=e.newValue;("client.reality_check.ack"===t&&1===+n||"client.reality_check.keep_open"===t&&0===+n)&&r.closePopUp()},t=function(){r.shouldShowPopup()&&a.wait("landing_company").then(function(){(o.currentLandingCompany()||{}).has_reality_check&&(r.setLoginTime(1e3*o.get("session_start")),window.addEventListener("storage",e,!1),i.resetInvalid(),i.get("ack")?i.get("keep_open")?r.getSummaryAsync():r.startSummaryTimer():r.renderFrequencyPopUp())})};return{onLoad:t}}();e.exports=s},function(e,t,n){"use strict";var i=n(324),r=n(318),a=n(363).showLocalTimeOnHover,o=n(313).urlFor,s=n(389);n(492),n(493);var c=function(){var e=o("user/reality_check_summary"),t=o("user/reality_check_frequency"),n={selector:"#frm_reality_check",num_reality_duration:"#num_reality_duration"},l=void 0,d=function(n){$.ajax({url:n?e:t,dataType:"html",method:"GET",success:function(e){u(e,n)}})},u=function(e,t){var r="reality_check_content";e.includes(r)&&0===$("#reality_check").length&&($("body").append($("<div/>",{id:"reality_check",class:"lightbox"}).append($(e).find("#"+r))),$(n.num_reality_duration).val(Math.floor(+i.get("interval")/60/1e3)),$("#statement").off("click").on("click dblclick",g),$("#logout").off("click").on("click dblclick",_),t&&p(t),h())},p=function(e){$("#start_time").text(e.start_time_string),$("#login_time").text(e.login_time),$("#current_time").text(e.current_time),$("#session_duration").text(e.session_duration),$("#loginid").text(e.loginid),$("#rc_currency").text(e.currency),$("#turnover").text(e.turnover),$("#profit_loss").text(e.profit_loss),$("#bought").text(e.contracts_bought),$("#sold").text(e.contracts_sold),$("#open").text(e.open_contracts),$("#potential").text(e.potential_profit),a("#start_time, #login_time, #current_time")},f=function(e){var t=String.fromCharCode(e.which);(!/[0-9]/.test(t)&&[8,37,39].indexOf(e.keyCode)<0||/['%]/.test(t))&&(e.returnValue=!1,e.preventDefault())},h=function(){$(n.num_reality_duration).off("keypress").on("keypress",f),s.init(n.selector,[{selector:n.num_reality_duration,validations:["req",["number",{min:10,max:60}]],exclude_request:1,no_scroll:1}]),s.handleSubmit({form_selector:n.selector,fnc_response_handler:m})},m=function(){var e=+$(n.num_reality_duration).val();i.set("interval",60*e*1e3),i.set("keep_open",0),i.set("ack",1),v()},g=function(){var e=window.open(o("user/statementws")+"#no-reality-check","_blank");e&&e.focus()},_=function(){r.send({logout:"1"})},v=function(){$("#reality_check").remove(),y()},y=function(){var e=+i.get("interval"),t=e-(Date.now()-l)%e;setTimeout(function(){i.set("keep_open",1),w()},t)},b=function(){var e=window.location;return!(/no-reality-check/.test(e.hash)&&/statementws/.test(e.pathname))},w=function(){c.shouldShowPopup()&&r.send({reality_check:1}).then(function(e){d(i.summaryData(e.reality_check))})};return{renderFrequencyPopUp:function(){d()},closePopUp:v,startSummaryTimer:y,getSummaryAsync:w,setLoginTime:function(e){l=e},shouldShowPopup:b}}();e.exports=c},function(e,t){"use strict";"includes"in Array.prototype||(Array.prototype.includes=function(e){var t=Object(this),n=parseInt(t.length)||0;if(0===n)return!1;var i,r=parseInt(arguments[1])||0;r>=0?i=r:(i=n+r,i<0&&(i=0));for(var a;i<n;){if(a=t[i],e===a||e!==e&&a!==a)return!0;i++}return!1})},function(e,t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};"includes"in String.prototype||(String.prototype.includes=function(e,t){if("object"===("undefined"==typeof e?"undefined":n(e))&&e instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(e,t)!==-1})},function(e,t,n){"use strict";var i=n(313).urlFor,r=n(310),a=n(315).jpClient,o=n(318),s=function(){var e="affiliate_disclaimer_popup",t=function(){r.isLoggedIn()||o.wait("website_status").then(function(t){(a()||"jp"===t.website_status.clients_country)&&$.ajax({url:i("affiliate_disclaimer"),dataType:"html",method:"GET",success:function(t){$("body").append($("<div/>",{id:e,class:"lightbox"}).append($("<div/>").append($(t)))),$("#btn_affiliate_proceed").off("click").on("click",n)}})})},n=function(){$("#"+e).remove()};return{show:t}}();e.exports=s},function(e,t,n){"use strict";var i=n(310),r=n(314).get,a=(n(313).urlForStatic,n(496).Pushwoosh),o=function(){var e=new a,t=!1,n=function(){/^(www|staging)\.binary\.com$/.test(window.location.hostname)&&(t||(e.push(["init",{logLevel:"error",applicationCode:"D04E6-FA474",safariWebsitePushID:"web.com.binary",defaultNotificationTitle:"Binary.com",defaultNotificationImage:"https://style.binary.com/images/logo/logomark.png"}]),t=!0,o()))},o=function(){e.push(function(e){e.getTags().then(function(t){return t.result["Login ID"]&&t.result["Site Language"]?null:e.setTags({"Login ID":i.get("loginid"),"Site Language":r()})}).catch(function(e){})})};return{init:n}}();e.exports=o},,,,,,,,,,,,,,function(e,t,n){"use strict";var i=n(311),r=n(318),a=n(510),o=n(310),s=n(363),c=n(368),l=n(399),d=n(369),u=n(309).getPropertyValue,p=n(511),f=function(){var e=function(e){l.hideNotification(),e&&(d.isLoginPages()||(o.validateLoginid(),r.send({website_status:1,subscribe:1})),s.startClock())},t=function(e){l.hideNotification("CONNECTION_ERROR");var t=void 0;switch(e.msg_type){case"website_status":t=/^up$/i.test(u(e,["website_status","site_status"])),t&&!r.availability()?window.location.reload():t||l.displayNotification(e.website_status.message,!0),r.availability(t);break;case"authorize":if(e.error){var s="1"===sessionStorage.getItem("active_tab");"SelfExclusion"===u(e,["error","code"])&&s&&(sessionStorage.removeItem("active_tab"),window.alert(e.error.message)),o.sendLogoutRequest(s)}else e.authorize.loginid!==i.get("loginid")?o.sendLogoutRequest(!0):(d.isLoginPages()||(o.responseAuthorize(e),r.send({balance:1,subscribe:1}),r.send({get_settings:1}),r.send({get_account_status:1}),r.send({payout_currencies:1}),r.send({mt5_login_list:1}),n(e.authorize.country||i.get("residence")),o.get("is_virtual")||r.send({get_self_exclusion:1})),r.sendBuffered());break;case"balance":a(e);break;case"logout":o.doLogout(e);break;case"landing_company":if(l.upgradeMessageVisibility(),!e.error){var f=o.currentLandingCompany();f&&o.set("default_currency",f.legal_default_currency)}break;case"get_self_exclusion":p.exclusionResponseHandler(e);break;case"payout_currencies":o.set("currencies",e.payout_currencies.join(","));break;case"get_settings":e.get_settings&&(n(e.get_settings.country_code),c.eventHandler(e.get_settings),e.get_settings.is_authenticated_payment_agent&&$("#topMenuPaymentAgent").setVisibility(1),o.set("first_name",e.get_settings.first_name))}},n=function(e){e&&(o.setCookie("residence",e),o.set("residence",e),r.send({landing_company:e}))},f=function(){return{onOpen:e,onMessage:t,notify:l.displayNotification,is_logged_in:o.isLoggedIn()}};return{initOptions:f}}();e.exports=f},function(e,t,n){"use strict";var i=n(361),r=n(358).updateContractBalance,a=n(310),o=n(325).formatMoney,s=function(e){if(e.hasOwnProperty("error"))return void console.log(e.error.message);var t=e.balance.balance;a.set("balance",t),i.updateBalance();var n=e.balance.currency;if(n){var s=o(n,t);r(t),$(".topMenuBalance").text(s).css("visibility","visible")}};e.exports=s},function(e,t,n){"use strict";var i=n(305),r=n(310),a=n(319).localize,o=function(){var e=void 0,t=void 0,n=void 0,o=void 0,s=function a(){clearTimeout(t),clearTimeout(n),clearTimeout(o),$("#session_limit").remove(),e=1e4;var s=1*r.get("session_duration_limit"),c=i().unix(),d=1*r.get("session_start"),u=Math.pow(2,31)-1,p=1e3*(s+d-c);p<0&&(p=e);var f=function(){n=setTimeout(l,p-e),o=setTimeout(r.sendLogoutRequest,p)};p>u?(p%=u,t=setTimeout(a,p)):f()},c=function(e){if(!e.hasOwnProperty("error")&&e.hasOwnProperty("get_self_exclusion")){var t=60*e.get_self_exclusion.session_duration_limit;isNaN(t)||t<=0||(r.set("session_duration_limit",t),window.addEventListener("storage",s,!1),s())}},l=function(){$("body").append($("<div/>",{id:"session_limit",class:"lightbox"}).append($("<div/>",{class:"gr-padding-10 gr-gutter",text:a("Your session duration limit will end in [_1] seconds.",[e/1e3])}))),$("#session_limit").click(function(){$(this).remove()})};return{exclusionResponseHandler:c}}();e.exports=o}]);
//# sourceMappingURL=binary.min.js.map